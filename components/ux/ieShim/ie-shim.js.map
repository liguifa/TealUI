{"version":3,"file":"ie-shim.js","sourceRoot":"../../..","sources":["components/ux/ieShim/ie-shim.ts"],"sourcesContent":["// #todo\r\n\r\n/**\r\n * @fileOverview 为低版本浏览器提供 HTML5 的部分常用函数。\r\n * @author xuld@vip.qq.com\r\n * @remark 本组件主要针对 IE8 以及老版本 FireFox, Safari 和 Chrome。\r\n */\r\n\r\n// #region lte IE 8\r\n\r\n/*@cc_on if(!+\"\\v1\") {\r\n\r\n/// @category IE8 补丁\r\n\r\n/// 用于创建一个异步请求。\r\n/// @example new XMLHttpRequest()\r\n/// @since ES4\r\nXMLHttpRequest = function(){\r\n    return new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n};\r\n\r\nvar Document = Document || HTMLDocument;\r\n\r\n(function (ep, dp, evtp, trp) {\r\n\r\n    function createHTML5Tags(doc){\r\n        \"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video\".replace(/\\w+/g, function (tagName) {\r\n            doc.createElement(tagName);\r\n        });\r\n    }\r\n\r\n    // 定义一个属性。\r\n    function defineProperty(obj, propName, getter, setter) {\r\n        Object.defineProperty(obj, propName, { get: getter, set: setter });\r\n    }\r\n    \r\n    // 让 IE6-8 支持 HTML5 新标签。\r\n    createHTML5Tags(document);\r\n\r\n    dp.createFragment = function(){\r\n        var fragment = this.createDocumentFragment();\r\n        createHTML5Tags(fragment);\r\n        return fragment;\r\n    };\r\n\r\n    // 文档。\r\n\r\n    /// 获取当前文档的所属窗口。\r\n    /// @example document.defaultView // window\r\n    /// @since ES4\r\n    defineProperty(dp, 'defaultView', function () { return this.parentWindow;});\r\n    \r\n    // 元素。\r\n    \r\n    /// 获取当前节点的所属文档。\r\n    /// @example document.body.ownerDocument // document\r\n    /// @since ES4\r\n    defineProperty(ep, 'ownerDocument',  function () { return this.document; });\r\n\r\n    /// 获取或设置当前元素的内部文本。\r\n    /// @example \r\n    /// document.body.textContent\r\n    /// document.body.textContent = 'text'\r\n    /// @since ES4\r\n    defineProperty(ep, 'textContent', function () { \r\n        return this.innerText;\r\n    }, function(value) {\r\n        this.innerText = value;\r\n    });\r\n    \r\n    /// 为当前元素添加指定监听器。\r\n    /// @since ES4\r\n    /// @memberOf Element.prototype\r\n    /// @example document.body.addEventListener('click', function(){}, false)\r\n    window.addEventListener = dp.addEventListener = ep.addEventListener = function (eventName, eventHandler) {\r\n        this.attachEvent('on' + eventName, eventHandler);\r\n    };\r\n    \r\n    /// 为当前元素移除指定监听器。\r\n    /// @since ES4\r\n    /// @memberOf Element.prototype\r\n    /// @example document.body.removeEventListener('click', function(){}, false)\r\n    window.removeEventListener = dp.removeEventListener = ep.removeEventListener = function (eventName, eventHandler) {\r\n        this.detachEvent('on' + eventName, eventHandler);\r\n    };\r\n\r\n    /// 阻止当前事件冒泡。\r\n    /// @memberOf Event.prototype\r\n    /// @example \r\n    /// document.onclick = function(e){ \r\n    ///     e.stopPropagation();\r\n    /// }\r\n    /// @since ES4\r\n    evtp.stopPropagation = function () {this.cancelBubble = true;};\r\n    \r\n    /// 阻止事件默认行为。\r\n    /// @memberOf Event.prototype\r\n    /// @example \r\n    /// document.onclick = function(e){ \r\n    ///     e.preventDefault();\r\n    /// }\r\n    /// @since ES4\r\n    evtp.preventDefault = function () { this.returnValue = false;};\r\n    \r\n    /// 获取事件发生的目标元素。\r\n    /// @memberOf Event.prototype\r\n    /// @name target\r\n    /// @example \r\n    /// document.onclick = function(e){ \r\n    ///     console.log(e.target);\r\n    /// }\r\n    /// @since ES4\r\n    defineProperty(evtp, 'target', function () { return this.srcElement; });\r\n            \r\n    /// 获取事件发生的相关元素。\r\n    /// @memberOf Event.prototype\r\n    /// @name relatedTarget\r\n    /// @example \r\n    /// document.onclick = function(e){ \r\n    ///     console.log(e.relatedTarget);\r\n    /// }\r\n    /// @since ES4\r\n    defineProperty(evtp, 'relatedTarget', function () { return this.toElement || this.fromElement;});\r\n            \r\n    /// 获取事件发生的鼠标按键。\r\n    /// @memberOf Event.prototype\r\n    /// @name which\r\n    /// @example \r\n    /// document.onclick = function(e){ \r\n    ///     console.log(e.which);\r\n    /// }\r\n    /// @since ES4\r\n    defineProperty(evtp, 'which', function () {\r\n        return this.button & 1 ? 1 : (this.button & 2 ? 3 : (this.button & 4 ? 2 : 0));\r\n    });\r\n          \r\n    /// 获取事件发生的鼠标屏幕水平坐标。\r\n    /// @memberOf Event.prototype\r\n    /// @name pageX\r\n    /// @example \r\n    /// document.onclick = function(e){ \r\n    ///     console.log(e.pageX);\r\n    /// }\r\n    /// @since ES4\r\n    defineProperty(evtp, 'pageX', function () { return this.x; });\r\n               \r\n    /// 获取事件发生的鼠标屏幕垂直坐标。\r\n    /// @memberOf Event.prototype\r\n    /// @name pageY\r\n    /// @example \r\n    /// document.onclick = function(e){ \r\n    ///     console.log(e.pageY);\r\n    /// }\r\n    /// @since ES4\r\n    defineProperty(evtp, 'pageY', function () { return this.y; });\r\n    \r\n    // 区域（Element.prototype.getBoundingClientRect() 返回的对象）。\r\n              \r\n    /// 获取当前区域的宽。\r\n    /// @memberOf TextRectangle.prototype\r\n    /// @name width\r\n    /// @example document.body.getBoundingClientRect().width\r\n    /// @since ES4\r\n    defineProperty(trp, 'width', function () {\r\n        return this.right - this.left;\r\n    });\r\n    \r\n    /// 获取当前区域的高。\r\n    /// @memberOf TextRectangle.prototype\r\n    /// @name height\r\n    /// @example document.body.getBoundingClientRect().height\r\n    /// @since ES4\r\n    defineProperty(trp, 'height', function () {\r\n        return this.bottom - this.top;\r\n    });\r\n   \r\n})(Element.prototype, Document.prototype, Event.prototype, TextRectangle.prototype);\r\n\r\n} @*/\r\n\r\n// #endregion\r\n\r\n// #region IEMobile\r\n\r\nif (navigator.userAgent.match(/IEMobile\\/10\\.0/)) {\r\n    (function () {\r\n        var msViewportStyle = document.createElement('style')\r\n        msViewportStyle.appendChild(\r\n            document.createTextNode(\r\n                '@-ms-viewport{width:auto!important}'\r\n            )\r\n        )\r\n        document.querySelector('head').appendChild(msViewportStyle)\r\n    })();\r\n}\r\n\r\n// #endregion\r\n"],"mappings":"AAAA,QAAQ;AAER;;;;GAIG;AAEH,mBAAmB;AAEnB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAwKK;AAEL,aAAa;AAEb,mBAAmB;AAEnB,EAAE,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;IAC/C,CAAC;QACG,IAAI,eAAe,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAA;QACrD,eAAe,CAAC,WAAW,CACvB,QAAQ,CAAC,cAAc,CACnB,qCAAqC,CACxC,CACJ,CAAA;QACD,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC,eAAe,CAAC,CAAA;IAC/D,CAAC,CAAC,EAAE,CAAC;AACT,CAAC;AAED,aAAa"}