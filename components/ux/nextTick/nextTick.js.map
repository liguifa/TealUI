{"version":3,"file":"nextTick.js","sourceRoot":"../../..","sources":["components/ux/nextTick/nextTick.ts"],"sourcesContent":["let nextTickImpl: typeof nextTick;\r\n\r\n// Edge: 原生支持 setImmediate。\r\nif (typeof setImmediate !== \"undefined\") {\r\n    nextTickImpl = setImmediate;\r\n} else if (window.postMessage && !(window as any).importScripts && window.addEventListener) {\r\n    // 除 IE 8-: 使用 postMessage。\r\n    // 存在 importScripts 表示在 web worker 中运行，此时无法使用 postMessage。\r\n    const queue: Function[] = [];\r\n    window.addEventListener(\"message\", e => {\r\n        if ((e.source === window || e.source === null) && e.data === \"_nextTick\") {\r\n            e.stopPropagation();\r\n            const func = queue.shift();\r\n            if (func) {\r\n                func();\r\n            }\r\n        }\r\n    }, true);\r\n    nextTickImpl = (func: Function) => {\r\n        queue.push(func);\r\n        window.postMessage(\"_nextTick\", \"*\");\r\n    };\r\n} else {\r\n    // 其它浏览器。\r\n    nextTickImpl = setTimeout;\r\n}\r\n\r\n/**\r\n * 等待下一帧执行。\r\n * @param func 要执行的函数。\r\n * @example nextTick(() => alert(1))\r\n */\r\nexport default function nextTick(func: Function) {\r\n    nextTickImpl(func);\r\n}\r\n"],"mappings":";;IAAA,IAAI,YAA6B,CAAC;IAElC,2BAA2B;IAC3B,EAAE,CAAC,CAAC,OAAO,YAAY,KAAK,WAAW,CAAC,CAAC,CAAC;QACtC,YAAY,GAAG,YAAY,CAAC;IAChC,CAAC;IAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,WAAW,IAAI,CAAE,MAAc,CAAC,aAAa,IAAI,MAAM,CAAC,gBAAgB,CAAC,CAAC,CAAC;QACzF,2BAA2B;QAC3B,0DAA0D;QAC1D,MAAM,KAAK,GAAe,EAAE,CAAC;QAC7B,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC;YAChC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,MAAM,IAAI,CAAC,CAAC,MAAM,KAAK,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,WAAW,CAAC,CAAC,CAAC;gBACvE,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,MAAM,IAAI,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC;gBAC3B,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;oBACP,IAAI,EAAE,CAAC;gBACX,CAAC;YACL,CAAC;QACL,CAAC,EAAE,IAAI,CAAC,CAAC;QACT,YAAY,GAAG,CAAC,IAAc;YAC1B,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACjB,MAAM,CAAC,WAAW,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC;QACzC,CAAC,CAAC;IACN,CAAC;IAAC,IAAI,CAAC,CAAC;QACJ,SAAS;QACT,YAAY,GAAG,UAAU,CAAC;IAC9B,CAAC;IAED;;;;OAIG;IACH,kBAAiC,IAAc;QAC3C,YAAY,CAAC,IAAI,CAAC,CAAC;IACvB,CAAC;IAFD,2BAEC"}