{"version":3,"file":"waterfall.js","sourceRoot":"../../..","sources":["components/ux/waterfall/waterfall.ts"],"sourcesContent":["// #todo\r\n\r\n\r\n/**\r\n * 对指定节点进行瀑布流布局。\r\n * @param {Element} container 要布局的容器。\r\n * @param {Number} [columnCount=4] 要分割的列数。\r\n * @param {Number} [rowSpace=10] 每行之间的空白。\r\n * @param {Number} [columnSpace=10] 每列之间的空白。\r\n */\r\nfunction waterfallLayout(container, columnCount, rowSpace, columnSpace) {\r\n    \r\n        if (columnCount == null) {\r\n            columnCount = 4;\r\n        }\r\n    \r\n        if (rowSpace == null) {\r\n            rowSpace = 10;\r\n        }\r\n    \r\n        if (columnSpace == null) {\r\n            columnSpace = 10;\r\n        }\r\n    \r\n        // 支持内部元素绝对位置。\r\n        container.style.position = 'relative';\r\n    \r\n        var node = container.firstElementChild,\r\n            layoutInfo = [],\r\n            leftInfo = [],\r\n            minColumn = 0,\r\n            i,\r\n            columnWidth = (container.offsetWidth - columnSpace * (columnCount - 1)) / columnCount;\r\n    \r\n        // 初始化每列信息。\r\n        for (i = 0; i < columnCount; i++) {\r\n            layoutInfo[i] = 0;\r\n            leftInfo[i] = minColumn;\r\n            minColumn += columnWidth + columnSpace;\r\n        }\r\n    \r\n        // 对每个节点布局。\r\n        for (; node; node = node.nextElementSibling) {\r\n            node.style.position = \"absolute\";\r\n            node.style.width = columnWidth + \"px\";\r\n    \r\n            minColumn = 0;\r\n    \r\n            // 从每一列中找到最小的列。\r\n            for (i = 1; i < columnCount; i++) {\r\n                if (layoutInfo[i] < layoutInfo[minColumn]) {\r\n                    minColumn = i;\r\n                }\r\n            }\r\n    \r\n            node.style.left = leftInfo[minColumn] + \"px\";\r\n            node.style.top = layoutInfo[minColumn] + \"px\";\r\n    \r\n            layoutInfo[minColumn] += node.offsetHeight + rowSpace;\r\n    \r\n        }\r\n    \r\n        // 设置容器的高度。\r\n        minColumn = 0;\r\n        for (i = 0; i < columnCount; i++) {\r\n            if (layoutInfo[i] > minColumn) {\r\n                minColumn = layoutInfo[i];\r\n            }\r\n        }\r\n        container.style.height = Math.max(minColumn - rowSpace, 0) + \"px\";\r\n    \r\n    }\r\n    "],"mappings":"AAAA,QAAQ;AAGR;;;;;;GAMG;AACH,yBAAyB,SAAS,EAAE,WAAW,EAAE,QAAQ,EAAE,WAAW;IAE9D,EAAE,CAAC,CAAC,WAAW,IAAI,IAAI,CAAC,CAAC,CAAC;QACtB,WAAW,GAAG,CAAC,CAAC;IACpB,CAAC;IAED,EAAE,CAAC,CAAC,QAAQ,IAAI,IAAI,CAAC,CAAC,CAAC;QACnB,QAAQ,GAAG,EAAE,CAAC;IAClB,CAAC;IAED,EAAE,CAAC,CAAC,WAAW,IAAI,IAAI,CAAC,CAAC,CAAC;QACtB,WAAW,GAAG,EAAE,CAAC;IACrB,CAAC;IAED,cAAc;IACd,SAAS,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;IAEtC,IAAI,IAAI,GAAG,SAAS,CAAC,iBAAiB,EAClC,UAAU,GAAG,EAAE,EACf,QAAQ,GAAG,EAAE,EACb,SAAS,GAAG,CAAC,EACb,CAAC,EACD,WAAW,GAAG,CAAC,SAAS,CAAC,WAAW,GAAG,WAAW,GAAG,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC;IAE1F,WAAW;IACX,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,EAAE,CAAC,EAAE,EAAE,CAAC;QAC/B,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QAClB,QAAQ,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC;QACxB,SAAS,IAAI,WAAW,GAAG,WAAW,CAAC;IAC3C,CAAC;IAED,WAAW;IACX,GAAG,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1C,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;QACjC,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,WAAW,GAAG,IAAI,CAAC;QAEtC,SAAS,GAAG,CAAC,CAAC;QAEd,eAAe;QACf,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,EAAE,CAAC,EAAE,EAAE,CAAC;YAC/B,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;gBACxC,SAAS,GAAG,CAAC,CAAC;YAClB,CAAC;QACL,CAAC;QAED,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,QAAQ,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;QAC7C,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,UAAU,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;QAE9C,UAAU,CAAC,SAAS,CAAC,IAAI,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;IAE1D,CAAC;IAED,WAAW;IACX,SAAS,GAAG,CAAC,CAAC;IACd,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,EAAE,CAAC,EAAE,EAAE,CAAC;QAC/B,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC;YAC5B,SAAS,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;QAC9B,CAAC;IACL,CAAC;IACD,SAAS,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,QAAQ,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC;AAEtE,CAAC"}