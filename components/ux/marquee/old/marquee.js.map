{"version":3,"file":"marquee.js","sourceRoot":"../../../..","sources":["components/ux/marquee/old/marquee.ts"],"sourcesContent":["// #todo\r\n\r\n/**\r\n * @author xuld@vip.qq.com\r\n */\r\n\r\n\r\ntypeof include === \"function\" && include(\"fx/animate.js\");\r\ntypeof include === \"function\" && include(\"dom/dom.js\");\r\n\r\nvar Marquee = Base.extend({\r\n\r\n\t/**\r\n\t * 每次滚动的效果时间。\r\n\t */\r\n\tduration: -1,\r\n\r\n\t/**\r\n\t * 自动滚动的延时时间。\r\n\t */\r\n\tdelay: 3000,\r\n\r\n\t/**\r\n\t * 移动的方向。\r\n\t * @config\r\n\t */\r\n\tdirection: 'left',\r\n\r\n\t/**\r\n\t * 每次移动的张数。\r\n\t * @config\r\n\t */\r\n\tdelta: 1,\r\n\r\n\t/**\r\n\t * 是否循环播放。\r\n\t * @config\r\n\t */\r\n\tloop: true,\r\n\r\n\t/**\r\n\t * 是否保证平滑滚动。\r\n\t * @config\r\n\t */\r\n\tflow: true,\r\n\r\n\t/**\r\n     * 当前正在显示的索引。\r\n     */\r\n\tcurrentIndex: 0,\r\n\r\n\t/**\r\n\t * 是否循环。\r\n\t * @property {Boolean} loop\r\n\t */\r\n\r\n\t_getWidthBefore: function (ctrl, xy) {\r\n\t\treturn ctrl && (ctrl = Dom.prev(ctrl)) ? Dom.calc(ctrl, xy) + this._getWidthBefore(ctrl, xy) : 0;\r\n\t},\r\n\r\n\t_getScrollByIndex: function (value) {\r\n\t\treturn this._getWidthBefore(Dom.child(this.elem, value), this._horizonal ? 'marginLeft+marginRight+width' : 'marginTop+marginBottom+height');\r\n\t},\r\n\r\n\t_getTotalSize: function () {\r\n\t\tvar size = 0;\r\n\t\tvar xy = this._horizonal ? \"marginLeft+marginRight+width\" : \"marginTop+marginBottom+height\";\r\n\t\tDom.children(this.elem).each(function (child) {\r\n\t\t\tsize += Dom.calc(child, xy);\r\n\t\t});\r\n\t\treturn size;\r\n\t},\r\n\r\n\t/**\r\n\t * 内部实现移动到指定位置的效果。\r\n\t */\r\n\t_animateToWithoutLoop: function (index, lt) {\r\n\r\n\t\tvar me = this,\r\n\t\t\toldIndex = me._fixIndex(me.currentIndex),\r\n\t\t\tobj;\r\n\r\n\t\tif (me.beforeChange(index, oldIndex) !== false) {\r\n\r\n\t\t\t// 暂停自动播放，防止出现抢资源问题。\r\n\t\t\tme.pause();\r\n\r\n\t\t\t// 记录当前正在转向的目标索引。\r\n\t\t\tme.currentIndex = index;\r\n\r\n\t\t\t// 计算滚动坐标。\r\n\r\n\t\t\tobj = {};\r\n\t\t\tobj[me._horizonal ? 'marginLeft' : 'marginTop'] = -me._getScrollByIndex(index);\r\n\t\t\tDom.animate(me.elem, {\r\n\t\t\t\tparams: obj,\r\n\t\t\t\tduration: me.duration,\r\n\t\t\t\tcomplete: function () {\r\n\r\n\t\t\t\t\t// 滚动完成后触发事件。\r\n\t\t\t\t\tme.afterChange(index, oldIndex);\r\n\r\n\t\t\t\t\t// 如果本来正在自动播放中，这里恢复自动播放。\r\n\t\t\t\t\tif (me.step)\r\n\t\t\t\t\t\tme.resume();\r\n\t\t\t\t},\r\n\t\t\t\tlink: 'abort'\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * 内部实现移动到指定位置的效果。\r\n\t * @param {Number} index 滚动的目标索引。\r\n\t * @param {Boolean} lt 回滚还是继续滚。\r\n\t */\r\n\t_animateToWithLoop: function (index, lt) {\r\n\r\n\t\tvar me = this,\r\n\t\t\toldIndex = me._fixIndex(me.currentIndex);\r\n\r\n\t\tif (me.beforeChange(index, oldIndex) !== false) {\r\n\r\n\t\t\t// 暂停自动播放，防止出现抢资源问题。\r\n\t\t\tme.pause();\r\n\r\n\t\t\tDom.animate(me.elem, {\r\n\t\t\t\tparams: {},\r\n\t\t\t\tduration: me.duration,\r\n\t\t\t\tcomplete: function () {\r\n\r\n\t\t\t\t\t// 效果结束。\r\n\t\t\t\t\tme._animatingTargetIndex = null;\r\n\r\n\t\t\t\t\t// 滚动完成后触发事件。\r\n\t\t\t\t\tme.afterChange(index, oldIndex);\r\n\r\n\t\t\t\t\t// 如果本来正在自动播放中，这里恢复自动播放。\r\n\t\t\t\t\tif (me.step)\r\n\t\t\t\t\t\tme.resume();\r\n\t\t\t\t},\r\n\t\t\t\tstart: function (options) {\r\n\r\n\t\t\t\t\t// 实际所滚动的区域。\r\n\t\t\t\t\tvar actualIndex = index + me.length,\r\n\t\t\t\t\t\t\tprop = me._horizonal ? 'marginLeft' : 'marginTop',\r\n\t\t\t\t\t\t\tfrom = Dom.styleNumber(me.elem, prop),\r\n\t\t\t\t\t\t\tto = -me._getScrollByIndex(actualIndex);\r\n\r\n\t\t\t\t\t// 如果保证是平滑滚动，则修正错误的位置。\r\n\t\t\t\t\tif (me.flow) {\r\n\r\n\t\t\t\t\t\t// 如果是往上、左方向滚。\r\n\t\t\t\t\t\tif (lt) {\r\n\r\n\t\t\t\t\t\t\t// 确保 from > to\r\n\t\t\t\t\t\t\tif (from > to) {\r\n\t\t\t\t\t\t\t\tfrom -= me._size;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t// 确保 from < to\r\n\t\t\t\t\t\t\tif (from < to) {\r\n\t\t\t\t\t\t\t\tfrom += me._size;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\toptions.params[prop] = from + '-' + to;\r\n\r\n\t\t\t\t\t// 记录当前正在转向的目标索引。\r\n\t\t\t\t\tme.currentIndex = index;\r\n\t\t\t\t},\r\n\t\t\t\tlink: 'stop'\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t_fixIndex: function (index) {\r\n\t\treturn index = index >= 0 ? index % this.length : index + this.length;\r\n\t},\r\n\r\n\tbeforeChange: function (newIndex, oldIndex) {\r\n\t\treturn !this.disabled && this.trigger('changing', {\r\n\t\t\tfrom: oldIndex,\r\n\t\t\tto: newIndex\r\n\t\t});\r\n\t},\r\n\r\n\tafterChange: function (newIndex, oldIndex) {\r\n\t\tthis.trigger('changed', {\r\n\t\t\tfrom: oldIndex,\r\n\t\t\tto: newIndex\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * 更新节点状态。\r\n\t */\r\n\tupdate: function () {\r\n\t\tvar children = Dom.children(this.elem),\r\n\t\t\tsize,\r\n\t\t\txy = this._horizonal ? 'Width' : 'Height';\r\n\r\n\t\tif (!this.cloned) {\r\n\r\n\t\t\t// 设置大小。\r\n\t\t\tthis.length = children.length;\r\n\r\n\t\t\t// 如果不需要滚动，自动设为 disabled 属性。\r\n\t\t\tthis.disabled = Dom['get' + xy](Dom.parent(this.elem)) >= size;\r\n\t\t\t//  this.disabled = Dom.getScrollSize(this.elem)[this._horizonal ? 'x' : 'y'] > size;\r\n\r\n\t\t\tif (!this.disabled && this.loop) {\r\n\t\t\t\tchildren.each(function (elem) {\r\n\t\t\t\t\tDom.append(this.elem, Dom.clone(elem));\r\n\t\t\t\t}, this);\r\n\t\t\t\tchildren.each(function (elem) {\r\n\t\t\t\t\tDom.append(this.elem, Dom.clone(elem));\r\n\t\t\t\t}, this);\r\n\t\t\t\tthis.cloned = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsize = this._getTotalSize();\r\n\t\tthis._size = this.cloned ? size / 3 : size;\r\n\r\n\t\tDom['set' + xy](this.elem, size);\r\n\t\tthis.set(this.currentIndex);\r\n\t},\r\n\r\n\tpause: function () {\r\n\t\tif (this.timer) {\r\n\t\t\tclearTimeout(this.timer);\r\n\t\t\tthis.timer = 0;\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tresume: function () {\r\n\t\tif (!this.timer) {\r\n\t\t\tthis.timer = setTimeout(this.step, this.delay);\r\n\t\t}\r\n\t},\r\n\r\n\tconstructor: function (elem, direction, loop, deferUpdate) {\r\n\t\telem = Dom.find(elem);\r\n\t\tthis.elem = Dom.find('ul', elem) || elem;\r\n\t\tDom.setStyle(Dom.parent(this.elem), 'overflow', 'hidden');\r\n\r\n\t\tif (loop === false) {\r\n\t\t\tthis.loop = false;\r\n\t\t}\r\n\r\n\t\tthis.setDirection(direction || this.direction);\r\n\r\n\t\tthis.update();\r\n\r\n\t\t// Chrome 无法直接获取图片大小。\r\n\t\tif (deferUpdate !== false && !Dom.isLoaded) {\r\n\t\t\tDom.load(this.update.bind(this));\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * 暂停滚动\r\n\t * @method pause\r\n\t */\r\n\tstop: function () {\r\n\t\tclearInterval(this.timer);\r\n\t\tthis.timer = 0;\r\n\t\tthis.step = null;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetDirection: function (direction) {\r\n\t\tthis.direction = direction;\r\n\t\tthis._lt = /^[rb]/.test(direction);\r\n\t\tthis._horizonal = /^[lr]/.test(direction);\r\n\t},\r\n\r\n\t/**\r\n\t * (重新)开始滚动\r\n\t * @method start\r\n\t */\r\n\tstart: function (delta) {\r\n\t\tvar me = this.stop();\r\n\t\tdelta = delta || me.delta;\r\n\t\tif (delta < 0) {\r\n\t\t\tme._lt = !me._lt;\r\n\t\t\tdelta = -delta;\r\n\t\t}\r\n\r\n\t\tif (me._lt) {\r\n\t\t\tdelta = -delta;\r\n\t\t}\r\n\r\n\t\t// 如果不延时。\r\n\t\tif (me.delay === 0) {\r\n\r\n\t\t\tme.moving = function () {\r\n\r\n\t\t\t\tvar value = me._current - delta;\r\n\r\n\t\t\t\tif (value <= me._min) {\r\n\t\t\t\t\tvalue += me._unit;\r\n\t\t\t\t} else if (value >= me._max) {\r\n\t\t\t\t\tvalue -= me._unit;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tme._current = value;\r\n\r\n\t\t\t\tme.elem.style[me._prop] = value + 'px';\r\n\r\n\t\t\t\tme.timer = setTimeout(me.moving, me.duration);\r\n\r\n\t\t\t};\r\n\r\n\t\t\tme.step = function () {\r\n\r\n\t\t\t\tme._prop = me._horizonal ? 'marginLeft' : 'marginTop';\r\n\t\t\t\tme._current = Dom.styleNumber(me.elem, me._prop);\r\n\t\t\t\tme._unit = me._getScrollByIndex(me.length + 1);\r\n\r\n\t\t\t\tif (me.loop) {\r\n\t\t\t\t\tme._min = -me._unit * 2;\r\n\t\t\t\t\tme._max = -me._unit;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tme._min = -me._unit;\r\n\t\t\t\t\tme._max = 0;\r\n\t\t\t\t}\r\n\t\t\t\tme.moving();\r\n\t\t\t};\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// 设置单步的执行函数。\r\n\t\t\tme.step = function () {\r\n\t\t\t\tvar index = me.currentIndex + delta;\r\n\t\t\t\tindex = me._fixIndex(index);\r\n\t\t\t\tme[me.loop ? '_animateToWithLoop' : '_animateToWithoutLoop'](index, me._lt);\r\n\t\t\t\tme.timer = setTimeout(me.step, me.delay);\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\t// 正式开始。\r\n\t\tme.resume();\r\n\r\n\t\treturn me;\r\n\t},\r\n\r\n\tset: function (index) {\r\n\t\tvar newIndex = index = this._fixIndex(index);\r\n\t\tif (this.loop) {\r\n\t\t\tindex += this.length;\r\n\t\t}\r\n\t\tDom.setStyle(this.elem, this._horizonal ? 'marginLeft' : 'marginTop', -this._getScrollByIndex(index));\r\n\t\tthis.afterChange(index, this.currentIndex);\r\n\t\tthis.currentIndex = newIndex;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tmoveTo: function (index, lt) {\r\n\t\tindex = this._fixIndex(index);\r\n\t\tthis[this.loop ? '_animateToWithLoop' : '_animateToWithoutLoop'](index, lt === undefined ? index < this.currentIndex : lt);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tmoveBy: function (index) {\r\n\t\treturn this.moveTo(this.currentIndex + index % this.length, index < 0);\r\n\t},\r\n\r\n\tprev: function () {\r\n\t\treturn this.moveTo(this.currentIndex - 1, true);\r\n\t},\r\n\r\n\tnext: function () {\r\n\t\treturn this.moveTo(this.currentIndex + 1, false);\r\n\t}\r\n\r\n});\r\n"],"mappings":"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"}