{"version":3,"file":"flexible.js","sourceRoot":"../../../..","sources":["components/ux/flexible/flexible/flexible.ts"],"sourcesContent":["/**\r\n * 自动缩放。\r\n */\r\nexport function flexible() {\r\n    (function (doc, win) {\r\n    var docEl = doc.documentElement,\r\n        isIPhone = window.navigator.appVersion.match(/iphone/gi),\r\n        fontSize,scale,\r\n        platform = navigator.platform;\r\n\r\n    function recalc() {\r\n        var clientWidth = docEl.clientWidth; //window.document.documentElement.getBoundingClientRect().width\r\n        var dpr = window.devicePixelRatio;\r\n        var justMobile = !/win32/i.test(platform);  //只限移动端，pc不缩放\r\n        var ua = navigator.userAgent.toLowerCase();\r\n        var wechat = ua.match(/MicroMessenger/i) == \"micromessenger\" ? true : false;\r\n\r\n        // iOS下，对于2和3的屏，用2倍的方案，其余的用1倍方案 ,  其他设备下，仍旧使用1倍的方案\r\n        if (!(isIPhone && justMobile)) {\r\n            dpr = 1;\r\n        }\r\n        scale = 1 / (dpr > 1 ? 2 : dpr);\r\n        if(wechat) {\r\n            scale = 1;\r\n        }\r\n        fontSize = 20 * (clientWidth / 320) / scale;\r\n        fontSize = (fontSize > 54) ? 54: fontSize;\r\n\r\n        docEl.style.fontSize = fontSize + 'px';\r\n        docEl.setAttribute('data-dpr', dpr);\r\n\r\n        //设置viewport\r\n        var viewport = document.querySelector('meta[name=\"viewport\"]');\r\n        var viewport_content = 'initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no';\r\n        viewport && viewport.setAttribute('content', viewport_content);\r\n\r\n\r\n    };\r\n    recalc();\r\n})(document, window);\r\n\r\n\r\n}\r\n\r\nexport default flexible;\r\n"],"mappings":";;IAAA;;OAEG;IACH;QACI,CAAC,UAAU,GAAG,EAAE,GAAG;YACnB,IAAI,KAAK,GAAG,GAAG,CAAC,eAAe,EAC3B,QAAQ,GAAG,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,CAAC,EACxD,QAAQ,EAAC,KAAK,EACd,QAAQ,GAAG,SAAS,CAAC,QAAQ,CAAC;YAElC;gBACI,IAAI,WAAW,GAAG,KAAK,CAAC,WAAW,CAAC,CAAC,+DAA+D;gBACpG,IAAI,GAAG,GAAG,MAAM,CAAC,gBAAgB,CAAC;gBAClC,IAAI,UAAU,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAE,aAAa;gBACzD,IAAI,EAAE,GAAG,SAAS,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC;gBAC3C,IAAI,MAAM,GAAG,EAAE,CAAC,KAAK,CAAC,iBAAiB,CAAC,IAAI,gBAAgB,GAAG,IAAI,GAAG,KAAK,CAAC;gBAE5E,kDAAkD;gBAClD,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC;oBAC5B,GAAG,GAAG,CAAC,CAAC;gBACZ,CAAC;gBACD,KAAK,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC;gBAChC,EAAE,CAAA,CAAC,MAAM,CAAC,CAAC,CAAC;oBACR,KAAK,GAAG,CAAC,CAAC;gBACd,CAAC;gBACD,QAAQ,GAAG,EAAE,GAAG,CAAC,WAAW,GAAG,GAAG,CAAC,GAAG,KAAK,CAAC;gBAC5C,QAAQ,GAAG,CAAC,QAAQ,GAAG,EAAE,CAAC,GAAG,EAAE,GAAE,QAAQ,CAAC;gBAE1C,KAAK,CAAC,KAAK,CAAC,QAAQ,GAAG,QAAQ,GAAG,IAAI,CAAC;gBACvC,KAAK,CAAC,YAAY,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;gBAEpC,YAAY;gBACZ,IAAI,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,uBAAuB,CAAC,CAAC;gBAC/D,IAAI,gBAAgB,GAAG,gBAAgB,GAAG,KAAK,GAAG,kBAAkB,GAAG,KAAK,GAAG,kBAAkB,GAAG,KAAK,GAAG,oBAAoB,CAAC;gBACjI,QAAQ,IAAI,QAAQ,CAAC,YAAY,CAAC,SAAS,EAAE,gBAAgB,CAAC,CAAC;YAGnE,CAAC;YAAA,CAAC;YACF,MAAM,EAAE,CAAC;QACb,CAAC,CAAC,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;IAGrB,CAAC;IAvCD,4BAuCC;IAED,kBAAe,QAAQ,CAAC"}