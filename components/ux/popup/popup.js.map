{"version":3,"file":"popup.js","sourceRoot":"../../..","sources":["components/ux/popup/popup.ts"],"sourcesContent":["import * as dom from \"ux/dom\";\r\nimport pin, { PinAlign, PinResult } from \"ux/pin\";\r\n\r\n/**\r\n * 表示一个弹层。\r\n */\r\nexport class Popup {\r\n\r\n    /**\r\n     * 触发弹层显示的元素。\r\n     */\r\n    target: HTMLElement;\r\n\r\n    /**\r\n     * 触发弹层显示的事件。\r\n     * @desc\r\n     * - `click`(默认): 点击 `target` 后弹出，点击屏幕空白处消失。\r\n     * - `dblclick`: 双击 `target` 后弹出，点击屏幕空白处消失。\r\n     * - `auxclick`: 右击 `target` 后弹出，点击屏幕空白处消失。\r\n     * - `pointerdown`: 指针在 `target` 按下后弹出，点击屏幕空白处消失。\r\n     * - `pointerup`: 指针在 `target` 按出后弹出，点击屏幕空白处消失。\r\n     * - `contextmenu`：作为 `target` 右键菜单后弹出，点击屏幕空白处消失。\r\n     * - `pointerenter`: 指针移入 `target`  后自动弹出，移到屏幕空白处消失。\r\n     * - `hover`: 指针移入 `target` 后自动弹出，移出 `target` 后消失。\r\n     * - `pointermove`: 指针移入 `target`  后自动弹出，并跟随鼠标移动。\r\n     * - `active`：指针在 `target` 按下时显示，松开后消失。\r\n     * - `focus`： `target` 获取焦点后显示，失去焦点后后消失。\r\n     * - `focusin`：`target` 获取焦点后显示，点击屏幕空白处消失。\r\n     * - 其它：不绑定事件。\r\n     */\r\n    event: \"click\" | \"dblclick\" | \"auxclick\" | \"contextmenu\" | \"pointerdown\" | \"pointerup\" | \"pointerenter\" | \"pointermove\" | \"hover\" | \"active\" | \"focus\" | \"focusin\" | null;\r\n\r\n    /**\r\n     * 显示弹层的延时毫秒数。仅对指针移动事件有效。\r\n     * @default 100\r\n     */\r\n    delay: number;\r\n\r\n    /**\r\n     * 弹层对齐的位置。如果为 null 则不自动对齐。\r\n     */\r\n    align: PinAlign | null;\r\n\r\n    /**\r\n     * 弹层对齐的目标节点或区域。默认同 *target*。\r\n     */\r\n    pinTarget?: Document | HTMLElement | dom.Rect;\r\n\r\n    /**\r\n     * 元素的外边距，即对齐时元素和 *pinTarget* 的距离。\r\n     */\r\n    margin?: number;\r\n\r\n    /**\r\n     * 容器节点或区域，定位超出容器后会自动调整。\r\n     */\r\n    container?: Document | HTMLElement | null;\r\n\r\n    /**\r\n     * 容器的内边距。\r\n     * @default 0\r\n     */\r\n    containerPadding?: number;\r\n\r\n    /**\r\n     * 定位后的额外偏移距离。如果小于 1，则表示相对元素大小的百分比。\r\n     * @default 0\r\n     */\r\n    offset?: number;\r\n\r\n    /**\r\n     * 如果容器比元素小，是否允许更改元素大小。\r\n     * @default false\r\n     */\r\n    resize?: boolean;\r\n\r\n    /**\r\n     * 显示弹层时使用的动画。\r\n     */\r\n    animation: dom.ToggleAnimation;\r\n\r\n    /**\r\n     * 切换效果的动画毫秒数。\r\n     */\r\n    duration: number;\r\n\r\n    /**\r\n     * 隐藏弹层时使用的动画。默认同 *animation*。\r\n     */\r\n    hideAnimation?: dom.ToggleAnimation;\r\n\r\n    /**\r\n     * 隐藏动画的持续毫秒数。默认同 *duration*。\r\n     */\r\n    hideDuration?: number;\r\n\r\n    /**\r\n     * 显示弹层时使用的动画渐变函数。\r\n     */\r\n    timingFunction: string;\r\n\r\n    /**\r\n     * 显示弹层时使用的动画渐变函数。\r\n     */\r\n    hideTimingFunction: string;\r\n\r\n    /**\r\n     * 是否在点击屏幕空白处后消失。\r\n     */\r\n    autoHide: boolean;\r\n\r\n    /**\r\n     * 是否在滚动后自动重定位。\r\n     */\r\n    autoScroll: boolean;\r\n\r\n    /**\r\n     * 弹层显示事件。\r\n     * @param sender 触发事件的源。\r\n     */\r\n    onShow?: (sender: this) => void;\r\n\r\n    /**\r\n     * 弹层隐藏事件。\r\n     * @param sender 触发事件的源。\r\n     */\r\n    onHide?: (sender: this) => void;\r\n\r\n    /**\r\n     * 弹层对齐事件。\r\n     * @param result 对齐的结果。\r\n     * @param sender 事件源。\r\n     */\r\n    onAlign?: (result: PinResult, sender: this) => void;\r\n\r\n    /**\r\n     * 弹层元素。\r\n     */\r\n    elem: HTMLElement;\r\n\r\n    /**\r\n     * 实际绑定的事件处理函数。\r\n     */\r\n    private _handle?: any;\r\n\r\n    /**\r\n     * 实际绑定的事件处理函数。\r\n     */\r\n    private _handle1?: any;\r\n\r\n    /**\r\n     * 实际绑定的事件处理函数。\r\n     */\r\n    private _handle2?: any;\r\n\r\n    /**\r\n     * 启用弹层。\r\n     */\r\n    enable() {\r\n        if (!this._handle || this._handle1) {\r\n            const target = this.target;\r\n            let event = this.event;\r\n            switch (event) {\r\n                case \"click\":\r\n                case \"dblclick\":\r\n                case \"auxclick\":\r\n                case \"pointerdown\":\r\n                case \"pointerup\":\r\n                    dom.on(target, event, this._handle = () => {\r\n                        this.toggle();\r\n                    });\r\n                    break;\r\n                case \"pointermove\":\r\n                    this.align = \"rr-bb\";\r\n                    dom.on(target, event, this._handle = (e: MouseEvent) => {\r\n                        this.pinTarget = {\r\n                            x: e.pageX,\r\n                            y: e.pageY,\r\n                            width: 16,\r\n                            height: 16\r\n                        };\r\n                        this.realign();\r\n                    });\r\n                // fall through\r\n                case \"pointerenter\":\r\n                case \"hover\":\r\n                    let showTimer: any;\r\n                    let hideTimer: any;\r\n                    const show = this._handle1 = (e: PointerEvent) => {\r\n                        if (hideTimer) {\r\n                            clearTimeout(hideTimer);\r\n                            hideTimer = 0;\r\n                        } else if (!showTimer) {\r\n                            showTimer = setTimeout(() => {\r\n                                showTimer = 0;\r\n                                this.show();\r\n                            }, this.delay);\r\n                        }\r\n                    };\r\n                    const hide = this._handle2 = (e: PointerEvent) => {\r\n                        if (showTimer) {\r\n                            clearTimeout(showTimer);\r\n                            showTimer = 0;\r\n                        } else if (!hideTimer) {\r\n                            hideTimer = setTimeout(() => {\r\n                                hideTimer = 0;\r\n                                this.hide();\r\n                            }, this.delay);\r\n                        }\r\n                    };\r\n                    dom.on(target, \"pointerenter\", show);\r\n                    dom.on(target, \"pointerleave\", hide);\r\n\r\n                    // pointerenter 事件在指针移到目标元素后不消失。\r\n                    if (event === \"pointerenter\") {\r\n                        dom.on(this.elem, \"pointerenter\", show);\r\n                        dom.on(this.elem, \"pointerleave\", hide);\r\n                    }\r\n                    break;\r\n                case \"focusin\":\r\n                    dom.on(target, event, this._handle = this.show, this);\r\n                    break;\r\n                case \"focus\":\r\n                    dom.on(target, \"focus\", this._handle1 = this.show, this);\r\n                    dom.on(target, \"blur\", this._handle2 = this.hide, this);\r\n                    break;\r\n                case \"active\":\r\n                    dom.on(target, \"pointerdown\", this._handle1 = this.show, this);\r\n                    dom.on(document, \"pointerup\", this._handle2 = this.hide, this);\r\n                    break;\r\n                case \"contextmenu\":\r\n                    this.align = \"rr-bb\";\r\n                    dom.on(target, event, this._handle = (e: MouseEvent) => {\r\n                        if (e.which === 3) {\r\n                            e.preventDefault();\r\n                            this.pinTarget = {\r\n                                x: e.pageX,\r\n                                y: e.pageY,\r\n                                width: 1,\r\n                                height: 1\r\n                            };\r\n                            this.show();\r\n                        }\r\n                    });\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 禁用弹层。\r\n     */\r\n    disable() {\r\n        const target = this.target;\r\n        let event = this.event;\r\n        switch (event) {\r\n            case \"click\":\r\n            case \"dblclick\":\r\n            case \"auxclick\":\r\n            case \"pointerdown\":\r\n            case \"pointerup\":\r\n            case \"contextmenu\":\r\n                dom.off(target, event, this._handle);\r\n                delete this._handle;\r\n                break;\r\n            case \"pointermove\":\r\n                dom.off(target, event, this._handle);\r\n                delete this._handle;\r\n            // fall through\r\n            case \"pointerenter\":\r\n            case \"hover\":\r\n                dom.off(target, \"pointerenter\", this._handle1);\r\n                dom.off(target, \"pointerleave\", this._handle2);\r\n                if (event === \"pointerenter\") {\r\n                    dom.off(this.elem, \"pointerenter\", this._handle1);\r\n                    dom.off(this.elem, \"pointerleave\", this._handle2);\r\n                }\r\n                delete this._handle1;\r\n                delete this._handle2;\r\n                break;\r\n            case \"focusin\":\r\n                dom.off(target, event, this._handle, this);\r\n                delete this._handle;\r\n                break;\r\n            case \"focus\":\r\n                dom.off(target, \"focus\", this._handle1, this);\r\n                dom.off(target, \"blur\", this._handle2, this);\r\n                delete this._handle1;\r\n                delete this._handle2;\r\n                break;\r\n            case \"active\":\r\n                dom.off(target, \"pointerdown\", this._handle1, this);\r\n                dom.off(document, \"pointerup\", this._handle2, this);\r\n                delete this._handle1;\r\n                delete this._handle2;\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 判断当前元素是否已隐藏。\r\n     */\r\n    get hidden() { return dom.isHidden(this.elem); }\r\n\r\n    /**\r\n     * 存储最终需要切换的效果。\r\n     */\r\n    private _toggle: boolean;\r\n\r\n    /**\r\n     * 显示当前浮层。\r\n     */\r\n    show() {\r\n        const toggle = this._toggle !== undefined ? this._toggle : !this.hidden;\r\n        if (toggle !== true) {\r\n            this._toggle = true;\r\n            this.autoHide && dom.on(document, \"pointerdown\", this.handleDocumentPointerDown, this);\r\n            this.autoScroll && dom.on(document, \"scroll\", this.handleDocumentScroll, this);\r\n            this.onShow && this.onShow(this);\r\n            if (this._toggle === true) {\r\n                dom.show(this.elem);\r\n                this.realign();\r\n                dom.show(this.elem, this.animation, () => {\r\n                    delete this._toggle;\r\n                }, this.duration, this.timingFunction, this.target);\r\n            }\r\n        } else if (this._toggle === undefined) {\r\n            this.realign();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 隐藏当前浮层。\r\n     */\r\n    hide() {\r\n        const toggle = this._toggle !== undefined ? this._toggle : !this.hidden;\r\n        if (toggle !== false) {\r\n            this._toggle = false;\r\n            dom.off(document, \"pointerdown\", this.handleDocumentPointerDown, this);\r\n            dom.off(document, \"scroll\", this.handleDocumentScroll, this);\r\n            this.onHide && this.onHide(this);\r\n            if (this._toggle === false) {\r\n                dom.hide(this.elem, this.hideAnimation || this.animation, () => {\r\n                    delete this._toggle;\r\n                }, this.hideDuration != undefined ? this.hideDuration : this.duration, this.hideTimingFunction || this.timingFunction, this.target);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 切换显示或隐藏当前浮层。\r\n     * @param value 如果为 true 则强制显示。如果为 false 则强制隐藏。\r\n     */\r\n    toggle(value = this.hidden) {\r\n        value ? this.show() : this.hide();\r\n    }\r\n\r\n    /**\r\n     * 处理文档指针按下事件。\r\n     * @param e 事件参数。\r\n     */\r\n    protected handleDocumentPointerDown(e: MouseEvent) {\r\n        const target = e.target as HTMLElement;\r\n        if (!dom.contains(this.elem, target) && !dom.contains(this.target, target)) {\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 处理文档滚动事件。\r\n     * @param e 事件参数。\r\n     */\r\n    protected handleDocumentScroll(e: MouseEvent) {\r\n        this.realign();\r\n    }\r\n\r\n    /**\r\n     * 重新对齐浮层的位置。\r\n     * @return 如果已重新定位则返回定位的结果。\r\n     */\r\n    realign() {\r\n        if (this.align && !this.hidden) {\r\n            const pinResult = pin(this.elem, this.pinTarget || this.target, this.align, this.margin, this.container === undefined ? this.target.ownerDocument : this.container, this.containerPadding, this.offset, this.resize);\r\n            this.onAlign && this.onAlign(pinResult, this);\r\n            return pinResult;\r\n        }\r\n    }\r\n\r\n}\r\n\r\nPopup.prototype.event = \"click\";\r\nPopup.prototype.delay = 100;\r\nPopup.prototype.animation = \"opacity\";\r\nPopup.prototype.align = \"bottomLeft\";\r\nPopup.prototype.autoHide = Popup.prototype.autoScroll = true;\r\n\r\n/**\r\n * 创建一个弹层。\r\n * @param elem 弹层的元素。\r\n * @param options 弹层的选项。\r\n * @return 返回一个弹层对象。\r\n */\r\nexport default function popup(elem: HTMLElement, options?: Partial<Popup>) {\r\n    const result = new Popup();\r\n    result.elem = elem;\r\n    Object.assign(result, options);\r\n    result.target = result.target || dom.prev(elem);\r\n    result.enable();\r\n    return result;\r\n}\r\n"],"mappings":"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"}