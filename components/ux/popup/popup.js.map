{"version":3,"file":"popup.js","sourceRoot":"../../..","sources":["components/ux/popup/popup.ts"],"sourcesContent":["import * as dom from \"ux/dom\";\r\nimport pin, { PinAlign, PinResult } from \"ux/pin\";\r\n\r\n/**\r\n * 表示一个弹层。\r\n */\r\nexport class Popup {\r\n\r\n    /**\r\n     * 触发弹层显示的元素。\r\n     */\r\n    target: HTMLElement;\r\n\r\n    /**\r\n     * 触发弹层显示的事件。\r\n     * @desc\r\n     * - `click`(默认): 点击 `target` 后弹出，点击屏幕空白处消失。\r\n     * - `auxclick`: 右击 `target` 后弹出，点击屏幕空白处消失。\r\n     * - `pointerdown`: 指针在 `target` 按下后弹出，点击屏幕空白处消失。\r\n     * - `pointerup`: 指针在 `target` 按出后弹出，点击屏幕空白处消失。\r\n     * - `contextmenu`：作为 `target` 右键菜单后弹出，点击屏幕空白处消失。\r\n     * - `pointerenter`: 指针移入 `target`  后自动弹出，移到屏幕空白处消失。\r\n     * - `hover`: 指针移入 `target` 后自动弹出，移出 `target` 后消失。\r\n     * - `pointermove`: 指针移入 `target`  后自动弹出，并跟随鼠标移动。\r\n     * - `active`：指针在 `target` 按下时显示，松开后消失。\r\n     * - `focus`： `target` 获取焦点后显示，失去焦点后后消失。\r\n     * - `focusin`：`target` 获取焦点后显示，点击屏幕空白处消失。\r\n     * - 其它：不绑定事件。\r\n     */\r\n    event: \"click\" | \"auxclick\" | \"contextmenu\" | \"pointerdown\" | \"pointerup\" | \"pointerenter\" | \"pointermove\" | \"hover\" | \"active\" | \"focus\" | \"focusin\" | null;\r\n\r\n    /**\r\n     * 显示弹层的延时。仅对指针移动事件有效。\r\n     */\r\n    delay: number;\r\n\r\n    /**\r\n     * 弹层对齐的目标节点或区域。如果为 null 则不对齐。默认同 *target*。\r\n     */\r\n    pinTarget?: Document | HTMLElement | dom.Rect | null;\r\n\r\n    /**\r\n     * 弹层对齐的位置。\r\n     */\r\n    align?: PinAlign;\r\n\r\n    /**\r\n     * 元素的外边距。\r\n     */\r\n    margin?: number;\r\n\r\n    /**\r\n     * 容器节点或区域，定位超出容器后会自动调整。\r\n     */\r\n    container?: Document | HTMLElement | null;\r\n\r\n    /**\r\n     * 容器的内边距。\r\n     */\r\n    containerPadding?: number;\r\n\r\n    /**\r\n     * 定位后的额外偏移距离。如果小于 1，则表示相对元素大小的百分比。\r\n     */\r\n    offset?: number;\r\n\r\n    /**\r\n     * 如果容器比元素小，是否允许更改元素大小。\r\n     */\r\n    resize?: boolean;\r\n\r\n    /**\r\n     * 显示弹层时使用的动画。\r\n     */\r\n    animation?: dom.ToggleAnimation;\r\n\r\n    /**\r\n     * 弹层显示事件。\r\n     * @param sender 触发事件的源。\r\n     */\r\n    onShow?: (sender: this) => void;\r\n\r\n    /**\r\n     * 弹层隐藏事件。\r\n     * @param sender 触发事件的源。\r\n     */\r\n    onHide?: (sender: this) => void;\r\n\r\n    /**\r\n     * 弹层对齐事件。\r\n     * @param result 对齐的结果。\r\n     * @param sender 事件源。\r\n     */\r\n    onAlign?: (result: PinResult, sender: this) => void;\r\n\r\n    /**\r\n     * 切换效果的动画毫秒数。\r\n     */\r\n    duration?: number;\r\n\r\n    /**\r\n     * 是否在点击屏幕空白处后消失。\r\n     */\r\n    autoHide?: boolean;\r\n\r\n    /**\r\n     * 是否在滚动后自动重定位。\r\n     */\r\n    autoScroll?: boolean;\r\n\r\n    /**\r\n     * 弹层元素。\r\n     */\r\n    elem: HTMLElement;\r\n\r\n    /**\r\n     * 实际绑定的事件处理函数。\r\n     */\r\n    private _handle: any;\r\n\r\n    /**\r\n     * 实际绑定的事件处理函数。\r\n     */\r\n    private _handle1: any;\r\n\r\n    /**\r\n     * 实际绑定的事件处理函数。\r\n     */\r\n    private _handle2: any;\r\n\r\n    /**\r\n     * 启用弹层。\r\n     */\r\n    enable() {\r\n        const target = this.target;\r\n        let event = this.event;\r\n        switch (event) {\r\n            case \"focusin\":\r\n                event = \"focus\";\r\n            // fall through\r\n            case \"click\":\r\n            case \"auxclick\":\r\n            case \"pointerdown\":\r\n            case \"pointerup\":\r\n                dom.on(target, event, this._handle = () => {\r\n                    this.toggle();\r\n                });\r\n                break;\r\n            case \"pointermove\":\r\n                dom.on(target, event, this._handle = (e: MouseEvent) => {\r\n                    this.align = \"rr-bb\";\r\n                    this.pinTarget = {\r\n                        x: e.pageX,\r\n                        y: e.pageY,\r\n                        width: 16,\r\n                        height: 16\r\n                    };\r\n                    this.realign();\r\n                });\r\n            // fall through\r\n            case \"pointerenter\":\r\n            case \"hover\":\r\n                let showTimer: number;\r\n                let hideTimer: number;\r\n                const show = this._handle1 = (e: PointerEvent) => {\r\n\r\n                    // 如果正在隐藏弹层，则放弃隐藏保持打开状态。\r\n                    if (hideTimer) {\r\n                        clearTimeout(hideTimer);\r\n                        hideTimer = 0;\r\n                    } else {\r\n\r\n                        // 否则倒计时显示。\r\n                        showTimer = showTimer || setTimeout(() => {\r\n                            showTimer = 0;\r\n                            this.target = target as HTMLElement;\r\n                            this.show();\r\n                        }, this.delay) as any;\r\n                    }\r\n                };\r\n                const hide = this._handle2 = (e: PointerEvent) => {\r\n\r\n                    // 如果正在打开弹层，则放弃打开保持关闭状态。\r\n                    if (showTimer) {\r\n                        clearTimeout(showTimer);\r\n                        showTimer = 0;\r\n                    } else {\r\n\r\n                        // 否则倒计时开始关闭。\r\n                        hideTimer = hideTimer || setTimeout(() => {\r\n                            hideTimer = 0;\r\n                            this.hide();\r\n                        }, this.delay) as any;\r\n                    }\r\n                };\r\n                dom.on(target, \"pointerenter\", show);\r\n                dom.on(target, \"pointerleave\", hide);\r\n\r\n                // pointerenter 事件在指针移到目标元素后不消失。\r\n                if (event === \"pointerenter\") {\r\n                    dom.on(this.elem, \"pointerenter\", show);\r\n                    dom.on(this.elem, \"pointerleave\", hide);\r\n                }\r\n                break;\r\n            case \"focus\":\r\n                dom.on(target, \"focus\", this.show, this);\r\n                dom.on(target, \"blur\", this.hide, this);\r\n                break;\r\n            case \"active\":\r\n                dom.on(target, \"pointerdown\", this.show, this);\r\n                dom.on(document, \"pointerup\", this.hide, this);\r\n                break;\r\n            case \"contextmenu\":\r\n                dom.on(target, event, this._handle = (e: MouseEvent) => {\r\n                    if (e.which === 3) {\r\n                        e.preventDefault();\r\n                        this.align = \"rr-bb\";\r\n                        this.pinTarget = {\r\n                            x: e.pageX,\r\n                            y: e.pageY,\r\n                            width: 1,\r\n                            height: 1\r\n                        };\r\n                        this.show();\r\n                    }\r\n                });\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 禁用弹层。\r\n     */\r\n    disable() {\r\n        const target = this.target;\r\n        let event = this.event;\r\n        switch (event) {\r\n            case \"focusin\":\r\n                event = \"focus\";\r\n            // fall through\r\n            case \"click\":\r\n            case \"auxclick\":\r\n            case \"pointerdown\":\r\n            case \"pointerup\":\r\n            case \"contextmenu\":\r\n                dom.off(target, event, this._handle);\r\n                delete this._handle;\r\n                break;\r\n            case \"pointerenter\":\r\n                dom.off(this.elem, \"pointerenter\", this._handle1);\r\n                dom.off(this.elem, \"pointerleave\", this._handle2);\r\n            // fall through\r\n            case \"hover\":\r\n            case \"pointermove\":\r\n                dom.off(target, \"pointerenter\", this._handle1);\r\n                dom.off(target, \"pointerleave\", this._handle2);\r\n                if (event === \"pointermove\") {\r\n                    dom.off(target, event, this._handle);\r\n                }\r\n                delete this._handle1;\r\n                delete this._handle2;\r\n                delete this._handle;\r\n                break;\r\n            case \"focus\":\r\n                dom.off(target, \"focus\", this.show, this);\r\n                dom.off(target, \"blur\", this.hide, this);\r\n                break;\r\n            case \"active\":\r\n                dom.off(target, \"pointerdown\", this.show, this);\r\n                dom.off(document, \"pointerup\", this.hide, this);\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 判断当前元素是否已隐藏。\r\n     */\r\n    get hidden() { return dom.isHidden(this.elem); }\r\n\r\n    /**\r\n     * 显示当前浮层。\r\n     */\r\n    show() {\r\n        if (this.hidden) {\r\n            dom.show(this.elem);\r\n            this.realign();\r\n            dom.show(this.elem, this.animation, undefined, this.duration, undefined, this.target);\r\n            this.autoHide && dom.on(document, \"pointerdown\", this.handleDocumentPointerDown, this);\r\n            this.autoScroll && dom.on(document, \"scroll\", this.handleDocumentScroll, this);\r\n            this.onShow && this.onShow(this);\r\n        } else {\r\n            this.realign();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 隐藏当前浮层。\r\n     */\r\n    hide() {\r\n        if (!this.hidden) {\r\n            dom.hide(this.elem, this.animation, () => {\r\n                this.onHide && this.onHide(this);\r\n            }, this.duration, undefined, this.target);\r\n            dom.off(document, \"pointerdown\", this.handleDocumentPointerDown, this);\r\n            dom.off(document, \"scroll\", this.handleDocumentScroll, this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 切换显示或隐藏当前浮层。\r\n     * @param value 如果为 true 则强制显示。如果为 false 则强制隐藏。\r\n     */\r\n    toggle(value = this.hidden) {\r\n        value ? this.show() : this.hide();\r\n    }\r\n\r\n    /**\r\n     * 处理文档指针按下事件。\r\n     * @param e 事件参数。\r\n     */\r\n    protected handleDocumentPointerDown(e: MouseEvent) {\r\n        const target = e.target as HTMLElement;\r\n        if (!dom.contains(this.elem, target) && !dom.contains(this.target, target)) {\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 处理文档滚动事件。\r\n     * @param e 事件参数。\r\n     */\r\n    protected handleDocumentScroll(e: MouseEvent) {\r\n        this.realign();\r\n    }\r\n\r\n    /**\r\n     * 重新对齐浮层的位置。\r\n     * @return 如果已重新定位则返回定位的结果。\r\n     */\r\n    realign() {\r\n        if (this.align && !this.hidden) {\r\n            const pinResult = pin(this.elem, this.pinTarget || this.target, this.align, this.margin, this.container === undefined ? this.target.ownerDocument : this.container, this.containerPadding, this.offset, this.resize);\r\n            this.onAlign && this.onAlign(pinResult, this);\r\n            return pinResult;\r\n        }\r\n    }\r\n\r\n}\r\n\r\nPopup.prototype.event = \"click\";\r\nPopup.prototype.delay = 100;\r\nPopup.prototype.animation = \"opacity\";\r\nPopup.prototype.align = \"bottomLeft\";\r\nPopup.prototype.autoHide = Popup.prototype.autoScroll = true;\r\n\r\n/**\r\n * 创建一个弹层。\r\n * @param elem 弹层的元素。\r\n * @param options 弹层的选项。\r\n * @return 返回一个弹层对象。\r\n */\r\nexport default function popup(elem: HTMLElement, options?: Partial<Popup>) {\r\n    const result = new Popup();\r\n    result.elem = elem;\r\n    Object.assign(result, options);\r\n    result.target = result.target || dom.prev(elem);\r\n    result.enable();\r\n    return result;\r\n}\r\n"],"mappings":"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"}