{"version":3,"file":"dom.js","sourceRoot":"../../..","sources":["components/ux/dom/dom.ts"],"sourcesContent":["type ParseWrapper = [number, string, string];\r\nvar parseFix: { [name: string]: ParseWrapper };\r\nvar parseContainer: HTMLElement;\r\n\r\n/**\r\n * 解析一段 HTML 并返回相应的节点。\r\n * @param html 要解析的 HTML 片段。\r\n * @param context 创建节点使用的文档。\r\n * @return 返回创建的节点。如果 HTML 片段中含多个节点，则返回一个文档片段。\r\n */\r\nexport function parse(html: string, context = document) {\r\n    if (!parseFix) {\r\n        const select: ParseWrapper = [1, \"<select multiple='multiple'>\", \"</select>\"];\r\n        const table: ParseWrapper = [1, \"<table>\", \"</table>\"];\r\n        const tr: ParseWrapper = [3, \"<table><tbody><tr>\", \"</tr></tbody></table>\"];\r\n        parseFix = {\r\n            __proto__: null!,\r\n            option: select,\r\n            optgroup: select,\r\n            thead: table,\r\n            tbody: table,\r\n            tfoot: table,\r\n            caption: table,\r\n            colgroup: table,\r\n            tr: [2, \"<table><tbody>\", \"</tbody></table>\"],\r\n            col: [2, \"<table><tbody></tbody><colgroup>\", \"</colgroup></table>\"],\r\n            td: tr,\r\n            th: tr,\r\n            legend: [1, \"<fieldset>\", \"</fieldset>\"],\r\n            area: [1, \"<map>\", \"</map>\"],\r\n            param: [1, \"<object>\", \"</object>\"]\r\n        };\r\n        parseContainer = document.createElement(\"div\");\r\n    }\r\n    let container = context === document ? parseContainer : context.createElement(\"div\");\r\n    const match = /^<(\\w+)/.exec(html);\r\n    const wrapper = match && parseFix[match[1].toLowerCase()];\r\n    if (wrapper) {\r\n        container.innerHTML = wrapper[1] + html + wrapper[2];\r\n        for (let level = wrapper[0]; level--; container = container.lastChild as HTMLElement);\r\n    } else {\r\n        container.innerHTML = html;\r\n    }\r\n    let result = container.firstChild || context.createTextNode(html);\r\n    if (result.nextSibling) {\r\n        result = context.createDocumentFragment();\r\n        while (container.firstChild) {\r\n            result.appendChild(container.firstChild);\r\n        }\r\n    }\r\n    return result as HTMLElement | Text | DocumentFragment;\r\n}\r\n\r\n/**\r\n * 查找 CSS 选择器匹配的所有元素。\r\n * @param node 要查找的根节点。\r\n * @param selector 要查找的 CSS 选择器。\r\n * @return 返回匹配的元素列表。\r\n */\r\nexport function query(node: Element | Document, selector: string): HTMLElement[];\r\n\r\n/**\r\n * 查找 CSS 选择器匹配的所有元素。\r\n * @param selector 要查找的 CSS 选择器。\r\n * @return 返回匹配的元素列表。\r\n */\r\nexport function query(selector: string): HTMLElement[];\r\n\r\nexport function query(node: Element | Document | string, selector?: string) {\r\n    return Array.prototype.slice.call(querySelector(node, selector), 0);\r\n}\r\n\r\n/**\r\n * 查找 CSS 选择器匹配的第一个元素。\r\n * @param node 要查找的根节点。\r\n * @param selector 要查找的 CSS 选择器。\r\n * @return 返回匹配的第一个元素。如果找不到则返回 null。\r\n */\r\nexport function find(node: Element | Document, selector: string): HTMLElement | null;\r\n\r\n/**\r\n * 查找 CSS 选择器匹配的第一个元素。\r\n * @param selector 要查找的 CSS 选择器。\r\n * @return 返回匹配的第一个元素。如果找不到则返回 null。\r\n */\r\nexport function find(selector: string): HTMLElement | null;\r\n\r\nexport function find(node: Element | Document | string, selector?: string) {\r\n    return querySelector(node, selector, true);\r\n}\r\n\r\nfunction querySelector(node: Element | Document | string, selector?: string, first?: boolean) {\r\n    if (typeof node === \"string\") {\r\n        selector = node;\r\n        node = document;\r\n    }\r\n    return first ? node.querySelector(selector!) : node.querySelectorAll(selector!);\r\n}\r\n\r\n/**\r\n * 判断元素是否匹配指定的 CSS 选择器。\r\n * @param elem 要判断的元素。\r\n * @param selector 要判断的 CSS 选择器。\r\n * @return 如果匹配则返回 true，否则返回 false。\r\n * @example matches(document.body, \"body\") // true\r\n */\r\nexport function match(elem: Element, selector: string) {\r\n    if (elem.matches) {\r\n        return elem.matches(selector);\r\n    }\r\n    const parent = elem.parentNode as HTMLElement;\r\n    const actualParent = parent || elem.ownerDocument.documentElement;\r\n    parent || actualParent.appendChild(elem);\r\n    try {\r\n        return Array.prototype.indexOf.call(querySelector(actualParent, selector), elem) >= 0;\r\n    } finally {\r\n        parent || actualParent.removeChild(elem);\r\n    }\r\n}\r\n\r\n/**\r\n * 获取节点的第一个子元素。\r\n * @param node 要获取的节点。\r\n * @param selector 用于筛选元素的 CSS 选择器。\r\n * @return 返回元素。如果元素不存在则返回 null。\r\n */\r\nexport function first(node: Node, selector?: string) {\r\n    return walk(node, selector, \"nextSibling\", \"firstChild\");\r\n}\r\n\r\n/**\r\n * 获取节点的最后一个子元素。\r\n * @param node 要获取的节点。\r\n * @param selector 用于筛选元素的 CSS 选择器。\r\n * @return 返回元素。如果元素不存在则返回 null。\r\n */\r\nexport function last(node: Node, selector?: string) {\r\n    return walk(node, selector, \"previousSibling\", \"lastChild\");\r\n}\r\n\r\n/**\r\n * 获取节点的下一个相邻元素。\r\n * @param node 要获取的节点。\r\n * @param selector 用于筛选元素的 CSS 选择器。\r\n * @return 返回元素。如果元素不存在则返回 null。\r\n */\r\nexport function next(node: Node, selector?: string) {\r\n    return walk(node, selector, \"nextSibling\");\r\n}\r\n\r\n/**\r\n * 获取节点的上一个相邻元素。\r\n * @param node 要获取的节点。\r\n * @param selector 用于筛选元素的 CSS 选择器。\r\n * @return 返回元素。如果元素不存在则返回 null。\r\n */\r\nexport function prev(node: Node, selector?: string) {\r\n    return walk(node, selector, \"previousSibling\");\r\n}\r\n\r\n/**\r\n * 获取指定节点的父元素。\r\n * @param node 要获取的节点。\r\n * @param selector 用于筛选元素的 CSS 选择器。\r\n * @return 返回元素。如果元素不存在则返回 null。\r\n */\r\nexport function parent(node: Node, selector?: string) {\r\n    return walk(node, selector, \"parentNode\");\r\n}\r\n\r\nfunction walk(node: Node | null, selector: string | undefined, nextProp: \"nextSibling\" | \"previousSibling\" | \"parentNode\", firstProp: typeof nextProp | \"firstChild\" | \"lastChild\" = nextProp) {\r\n    for (node = node![firstProp]; node; node = node[nextProp]) {\r\n        if (node.nodeType === 1 && (!selector || match(node as Element, selector))) {\r\n            return node as HTMLElement;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\n/**\r\n * 从指定节点开始向父元素查找第一个匹配指定 CSS 选择器的元素。\r\n * @param node 要开始查找的节点。\r\n * @param selector 要匹配的 CSS 选择器。\r\n * @param context 如果提供了上下文，则只在指定的元素内搜索。\r\n * @return 返回元素。如果元素不存在则返回 null。\r\n * @example closest(document.body, \"body\")\r\n */\r\nexport function closest(node: Node, selector: string, context?: HTMLElement | Document | null) {\r\n    while (node && node !== context && (node.nodeType !== 1 || !match(node as HTMLElement, selector))) {\r\n        node = node.parentNode!;\r\n    }\r\n    return node === context ? null : node as HTMLElement;\r\n}\r\n\r\n/**\r\n * 获取指定节点的所有子元素。\r\n * @param node 要获取的节点。\r\n * @param selector 用于筛选元素的 CSS 选择器。\r\n * @return 返回包含所有子元素的数组。\r\n */\r\nexport function children(node: Node, selector?: string) {\r\n    const result: HTMLElement[] = [];\r\n    for (node = node.firstChild!; node; node = node.nextSibling!) {\r\n        if (node.nodeType === 1 && (!selector || match(node as HTMLElement, selector))) {\r\n            result.push(node as HTMLElement);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n/**\r\n * 判断指定节点是否包含另一个节点。\r\n * @param node 要判断的节点。\r\n * @param child 要判断的子节点。\r\n * @return 如果 child 同 node 或是其子节点则返回 true，否则返回 false。\r\n * @example contains(document.body, document.body) // true\r\n */\r\nexport function contains(node: Node, child: Node) {\r\n    if (node.contains) {\r\n        return node.contains(child);\r\n    }\r\n    for (; child; child = child.parentNode!) {\r\n        if (child === node) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * 获取指定节点在其父节点中的索引。\r\n * @param node 要处理的节点。\r\n * @return 返回索引。如果没有父元素则返回 0。\r\n */\r\nexport function index(node: Node) {\r\n    let result = 0;\r\n    while ((node = node.previousSibling!)) {\r\n        if (node.nodeType === 1) {\r\n            result++;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n/**\r\n * 在指定节点末尾插入一段 HTML 或一个节点。\r\n * @param node 插入所在的节点。\r\n * @param content 要插入的 HTML 或节点。\r\n * @return 返回插入的新节点。\r\n */\r\nexport function append(node: Node, content: string | Node | null) {\r\n    return insert(node, content, false, false);\r\n}\r\n\r\n/**\r\n * 在指定节点开头插入一段 HTML 或一个节点。\r\n * @param node 插入所在的节点。\r\n * @param content 要插入的 HTML 或节点。\r\n * @return 返回插入的新节点。\r\n */\r\nexport function prepend(node: Node, content: string | Node | null) {\r\n    return insert(node, content, true, false);\r\n}\r\n\r\n/**\r\n * 在指定节点前插入一段 HTML 或一个节点。\r\n * @param node 插入所在的节点。该节点必须具有父节点。\r\n * @param content 要插入的 HTML 或节点。\r\n * @return 返回插入的新节点。\r\n */\r\nexport function before(node: Node, content: string | Node | null) {\r\n    return insert(node, content, true, true);\r\n}\r\n\r\n/**\r\n * 在指定节点后插入一段 HTML 或一个节点。\r\n * @param node 插入所在的节点。该节点必须具有父节点。\r\n * @param content 要插入的 HTML 或节点。\r\n * @return 返回插入的新节点。\r\n */\r\nexport function after(node: Node, content: string | Node | null) {\r\n    return insert(node, content, false, true);\r\n}\r\n\r\nfunction insert(node: Node, content: string | Node | null, prepend: boolean, sibling: boolean) {\r\n    if (content) {\r\n        if (typeof content === \"string\") {\r\n            content = parse(content, node.ownerDocument || node);\r\n        }\r\n        if (sibling) {\r\n            return node.parentNode!.insertBefore(content, prepend ? node : node.nextSibling);\r\n        }\r\n        return prepend ? node.insertBefore(content, node.firstChild) : node.appendChild(content);\r\n    }\r\n}\r\n\r\n/**\r\n * 移除指定的节点。\r\n * @param node 要移除的节点。\r\n */\r\nexport function remove(node: Node | null) {\r\n    node && node.parentNode && node.parentNode.removeChild(node);\r\n}\r\n\r\n/**\r\n * 复制指定的节点。\r\n * @param node 要复制的节点。\r\n * @return 返回复制的新节点。\r\n */\r\nexport function clone<T extends Node>(node: T) {\r\n    return node.cloneNode(true) as T;\r\n}\r\n\r\n/**\r\n * 获取指定元素的属性值。\r\n * @param elem 要获取的元素。\r\n * @param attrName 要获取的属性名。\r\n * @return 返回属性值。如果不存在则返回 null。\r\n * @example getAttr(document.body, \"class\")\r\n */\r\nexport function getAttr(elem: HTMLElement, attrName: string) {\r\n    return attrName in elem ? (elem as any)[attrName] : elem.getAttribute(attrName);\r\n}\r\n\r\n/**\r\n * 设置指定元素的属性值。\r\n * @param elem 要设置的元素。\r\n * @param attrName 要设置的属性名。\r\n * @param value 要设置的属性值。设置为 null 表示删除属性。\r\n * @example setAttr(document.body, \"class\", \"red\")\r\n * @example setAttr(document.body, \"class\", null)\r\n */\r\nexport function setAttr(elem: HTMLElement, attrName: string, value: any) {\r\n    if (/^on./.test(attrName) && attrName in elem) {\r\n        if (typeof value === \"string\") {\r\n            elem.setAttribute(attrName, value);\r\n        } else {\r\n            (elem as any)[attrName] = value;\r\n        }\r\n    } else {\r\n        if (attrName in elem || value != null && typeof value !== \"string\") {\r\n            (elem as any)[attrName] = value;\r\n        } else if (value == null) {\r\n            elem.removeAttribute(attrName);\r\n        } else {\r\n            elem.setAttribute(attrName, value);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * 获取指定元素的文本内容。\r\n * @param elem 要获取的元素。\r\n * @return 返回文本内容。\r\n * @example getText(document.body)\r\n */\r\nexport function getText(elem: HTMLElement) {\r\n    return (elem as HTMLInputElement)[textProp(elem)]!;\r\n}\r\n\r\n/**\r\n * 设置指定元素的文本内容。\r\n * @param elem 要设置的元素。\r\n * @param value 要设置的文本内容。\r\n * @example setText(document.body, \"text\")\r\n */\r\nexport function setText(elem: HTMLElement, value: string) {\r\n    (elem as HTMLInputElement)[textProp(elem)] = value;\r\n}\r\n\r\nfunction textProp(elem: HTMLElement) {\r\n    return /^(INPUT|SELECT|TEXTAREA)$/.test(elem.tagName) ? \"value\" : \"textContent\";\r\n}\r\n\r\n/**\r\n * 获取指定元素的内部 HTML。\r\n * @param elem 要获取的元素。\r\n * @return 返回内部 HTML。\r\n * @example getHtml(document.body)\r\n */\r\nexport function getHtml(elem: HTMLElement) {\r\n    return elem.innerHTML;\r\n}\r\n\r\n/**\r\n * 设置指定元素的内部 HTML。\r\n * @param elem 要设置的元素。\r\n * @param value 要设置的内部 HTML。\r\n * @example setHtml(document.body, \"html\")\r\n */\r\nexport function setHtml(elem: HTMLElement, value: string) {\r\n    elem.innerHTML = value;\r\n}\r\n\r\n/**\r\n * 判断指定元素是否已添加指定的 CSS 类名。\r\n * @param elem 要判断的元素。\r\n * @param className 要判断的 CSS 类名。\r\n * @return 如果已添加则返回 true，否则返回 false。\r\n */\r\nexport function hasClass(elem: HTMLElement, className: string) {\r\n    return (\" \" + elem.className + \" \").indexOf(\" \" + className + \" \") >= 0;\r\n}\r\n\r\n/**\r\n * 添加指定元素的 CSS 类名。\r\n * @param elem 要处理的元素。\r\n * @param className 要添加的 CSS 类名。\r\n * @example addClass(document.body, \"light\")\r\n */\r\nexport function addClass(elem: HTMLElement, className: string) {\r\n    toggleClass(elem, className, true);\r\n}\r\n\r\n/**\r\n * 删除指定元素的 CSS 类名。\r\n * @param elem 要处理的元素。\r\n * @param className 要删除的 CSS 类名。\r\n * @example removeClass(document.body, \"light\")\r\n */\r\nexport function removeClass(elem: HTMLElement, className: string) {\r\n    toggleClass(elem, className, false);\r\n}\r\n\r\n/**\r\n * 如果存在（不存在）则删除（添加）指定元素的 CSS 类名。\r\n * @param elem 要处理的元素。\r\n * @param className 要添加或删除的 CSS 类名。\r\n * @param value 如果为 true 则添加 CSS 类名；如果为 false 则删除 CSS 类名。\r\n * @example toggleClass(document.body, \"light\")\r\n */\r\nexport function toggleClass(elem: HTMLElement, className: string, value?: boolean) {\r\n    if (hasClass(elem, className)) {\r\n        if (value !== true) {\r\n            elem.className = (\" \" + elem.className + \" \").replace(\" \" + className + \" \", \" \").trim();\r\n        }\r\n    } else if (value !== false) {\r\n        elem.className = elem.className ? elem.className + \" \" + className : className;\r\n    }\r\n}\r\n\r\n/**\r\n * 为指定的 CSS 属性添加当前浏览器特定的后缀（如 webkit-)。\r\n * @param propName 要处理的 CSS 属性名。\r\n * @return 返回已添加后缀的 CSS 属性名。\r\n * @example vendor(\"transform\")\r\n */\r\nexport function vendor(propName: string) {\r\n    if (!(propName in document.documentElement.style)) {\r\n        const capName = propName.charAt(0).toUpperCase() + propName.slice(1);\r\n        for (const prefix of [\"webkit\", \"Moz\", \"ms\", \"O\"]) {\r\n            if ((prefix + capName) in document.documentElement.style) {\r\n                return prefix + capName;\r\n            }\r\n        }\r\n    }\r\n    return propName;\r\n}\r\n\r\n/**\r\n * 获取指定元素的 CSS 属性值。\r\n * @param elem 要获取的元素。\r\n * @param propName 要获取的 CSS 属性名(骆驼规则)。\r\n * @return 返回 CSS 属性值。\r\n * @example getStyle(document.body, \"fontSize\")\r\n */\r\nexport function getStyle(elem: HTMLElement, propName: string) {\r\n    return elem.ownerDocument.defaultView.getComputedStyle(elem)[vendor(propName) as any];\r\n}\r\n\r\n/**\r\n * 设置指定元素的 CSS 属性值。\r\n * @param elem 要设置的元素。\r\n * @param propName 要设置的 CSS 属性名(骆驼规则)。\r\n * @param value 要设置的 CSS 属性值。如果是数字则自动追加像素单位。\r\n * @example setStyle(document.body, \"fontSize\")\r\n */\r\nexport function setStyle(elem: HTMLElement, propName: string, value: string | number) {\r\n    elem.style[vendor(propName) as any] = value && typeof value === \"number\" && !/^(?:columnCount|fillOpacity|flexGrow|flexShrink|fontWeight|lineHeight|opacity|order|orphans|widows|zIndex|zoom)$/.test(propName) ? value + \"px\" : value as any;\r\n}\r\n\r\n/**\r\n * 计算一个元素的样式值。\r\n * @param elem 要计算的元素。\r\n * @param propNames 要计算的 CSS 属性名(骆驼规则)列表。\r\n * @return 返回所有 CSS 属性值的和。\r\n * @example getStyleNumber(document.body, \"fontSize\", \"lineHeight\")\r\n */\r\nexport function computeStyle(elem: HTMLElement, ...propNames: string[]) {\r\n    let result = 0;\r\n    const computedStyle = elem.ownerDocument.defaultView.getComputedStyle(elem);\r\n    for (const prop of propNames) {\r\n        result += parseFloat(computedStyle[prop as any]) || 0;\r\n    }\r\n    return result;\r\n}\r\n\r\n/**\r\n * 表示一个坐标。\r\n */\r\nexport interface Point {\r\n\r\n    /**\r\n     * X 坐标值。\r\n     */\r\n    x: number;\r\n\r\n    /**\r\n     * Y 坐标值。\r\n     */\r\n    y: number;\r\n\r\n}\r\n\r\n/**\r\n * 表示一个大小。\r\n */\r\nexport interface Size {\r\n\r\n    /**\r\n     * 宽度。\r\n     */\r\n    width: number;\r\n\r\n    /**\r\n     * 高度。\r\n     */\r\n    height: number;\r\n\r\n}\r\n\r\n/**\r\n * 表示一个矩形区域。\r\n */\r\nexport interface Rect extends Point, Size { }\r\n\r\n/**\r\n * 获取指定元素的滚动距离。\r\n * @param elem 要获取的元素或文档。\r\n * @return 返回坐标。如果元素不可滚动则返回原点。\r\n * @example getScroll(document.body)\r\n */\r\nexport function getScroll(elem: HTMLElement | Document) {\r\n    if (elem.nodeType === 9) {\r\n        const win = (elem as Document).defaultView;\r\n        if (\"pageXOffset\" in win) {\r\n            return {\r\n                x: win.pageXOffset,\r\n                y: win.pageYOffset\r\n            } as Point;\r\n        }\r\n        elem = (elem as Document).documentElement;\r\n    }\r\n    return {\r\n        x: (elem as HTMLElement).scrollLeft,\r\n        y: (elem as HTMLElement).scrollTop\r\n    } as Point;\r\n}\r\n\r\n/**\r\n * 设置指定元素的滚动距离。\r\n * @param elem 要设置的元素或文档。\r\n * @param value 要设置的坐标。允许只设置部分属性。\r\n * @example setScroll(document.body, { x: 100, y: 500 });\r\n */\r\nexport function setScroll(elem: HTMLElement | Document, value: Partial<Point>) {\r\n    if (elem.nodeType === 9) {\r\n        (elem as Document).defaultView.scrollTo(\r\n            (value.x == null ? getScroll(elem) : value).x,\r\n            (value.y == null ? getScroll(elem) : value).y\r\n        );\r\n    } else {\r\n        if (value.x != null) (elem as HTMLElement).scrollLeft = value.x;\r\n        if (value.y != null) (elem as HTMLElement).scrollTop = value.y;\r\n    }\r\n}\r\n\r\n/**\r\n * 获取指定元素和其定位父元素的偏移距离。\r\n * @param elem 要获取的元素。\r\n * @return 返回坐标。\r\n * @example getOffset(document.body)\r\n */\r\nexport function getOffset(elem: HTMLElement) {\r\n    const left = getStyle(elem, \"left\");\r\n    const top = getStyle(elem, \"top\");\r\n    if ((left && top && left !== \"auto\" && top !== \"auto\") || getStyle(elem, \"position\") !== \"absolute\") {\r\n        return {\r\n            x: parseFloat(left) || 0,\r\n            y: parseFloat(top) || 0\r\n        } as Point;\r\n    }\r\n    const parent = offsetParent(elem);\r\n    const rect = getRect(elem);\r\n    if (parent.nodeName !== \"HTML\") {\r\n        const rootRect = getRect(parent);\r\n        rect.x -= rootRect.x;\r\n        rect.y -= rootRect.y;\r\n    }\r\n    rect.x -= computeStyle(elem, \"marginLeft\") + computeStyle(parent, \"borderLeftWidth\");\r\n    rect.y -= computeStyle(elem, \"marginTop\") + computeStyle(parent, \"borderTopWidth\");\r\n    return rect as Point;\r\n}\r\n\r\n/**\r\n * 设置指定元素和其定位父元素的偏移距离。\r\n * @param elem 要处理的元素。\r\n * @param value 要设置的坐标。允许只设置部分属性。\r\n * @example setOffset(document.body, { x: 100 });\r\n */\r\nexport function setOffset(elem: HTMLElement, value: Partial<Point>) {\r\n    if (value.x! >= 0) {\r\n        elem.style.left = value.x + \"px\";\r\n    }\r\n    if (value.y! >= 0) {\r\n        elem.style.top = value.y + \"px\";\r\n    }\r\n}\r\n\r\n/**\r\n * 获取指定元素的定位父元素。\r\n * @param elem 要获取的元素。\r\n * @return 返回定位父元素。\r\n * @example offsetParent(document.body)\r\n */\r\nexport function offsetParent(elem: HTMLElement) {\r\n    let result = elem;\r\n    while ((result = result.offsetParent as HTMLElement) && result.nodeName !== \"HTML\" && getStyle(result, \"position\") === \"static\");\r\n    return result || elem.ownerDocument.documentElement;\r\n}\r\n\r\n/**\r\n * 获取指定元素的区域。\r\n * @param elem 要获取的元素或文档。\r\n * @return 返回元素实际占用区域（含内边距和边框、不含外边距）。如果元素不可见则返回空区域。\r\n * @example getRect(document.body)\r\n */\r\nexport function getRect(elem: HTMLElement | Document) {\r\n    const doc = elem.ownerDocument || elem;\r\n    const html = doc.documentElement;\r\n    const result = getScroll(doc) as Rect;\r\n    if (elem.nodeType === 9) {\r\n        result.width = html.clientWidth;\r\n        result.height = html.clientHeight;\r\n    } else {\r\n        const rect = (elem as HTMLElement).getBoundingClientRect();\r\n        result.x += rect.left - html.clientLeft;\r\n        result.y += rect.top - html.clientTop;\r\n        result.width = rect.width;\r\n        result.height = rect.height;\r\n    }\r\n    return result;\r\n}\r\n\r\n/**\r\n * 设置指定元素的区域。\r\n * @param elem 要设置的元素。\r\n * @param value 要设置的区域内容（含内边距和边框、不含外边距）。允许只设置部分属性。\r\n * @example setRect(document.body, {width: 200, height: 400})\r\n */\r\nexport function setRect(elem: HTMLElement, value: Partial<Rect>) {\r\n    const style = elem.style;\r\n    if (value.x != null || value.y != null) {\r\n        // 确保对象可移动。\r\n        if (!/^(?:abs|fix)/.test(getStyle(elem, \"position\"))) {\r\n            style.position = \"relative\";\r\n        }\r\n        const currentPosition = getRect(elem);\r\n        const offset = getOffset(elem);\r\n        if (value.y != null) {\r\n            style.top = offset.y + value.y - currentPosition.y + \"px\";\r\n        }\r\n        if (value.x != null) {\r\n            style.left = offset.x + value.x - currentPosition.x + \"px\";\r\n        }\r\n    }\r\n    if (value.width != null || value.height != null) {\r\n        const boxSizing = getStyle(elem, \"boxSizing\") === \"border-box\";\r\n        if (value.width != null) {\r\n            style.width = value.width - (boxSizing ? 0 : computeStyle(elem, \"borderLeftWidth\", \"borderRightWidth\", \"paddingLeft\", \"paddingRight\")) + \"px\";\r\n        }\r\n        if (value.height != null) {\r\n            style.height = value.height - (boxSizing ? 0 : computeStyle(elem, \"borderTopWidth\", \"borderBottomWidth\", \"paddingTop\", \"paddingBottom\")) + \"px\";\r\n        }\r\n    }\r\n}\r\n\r\ninterface EventFix {\r\n\r\n    /**\r\n     * 绑定当前事件时实际绑定的事件。\r\n     */\r\n    bind?: string;\r\n\r\n    /**\r\n     * 委托当前事件时实际绑定的事件。\r\n     */\r\n    delegate?: string;\r\n\r\n    /**\r\n     * 实际绑定的事件触发后筛选是否触发当前事件的过滤器。\r\n     */\r\n    filter?: (this: EventFix, e: Event, elem: Element | Document) => boolean | void;\r\n\r\n    /**\r\n     * 自定义绑定事件的函数。\r\n     */\r\n    add?: (this: EventFix, elem: Element | Document, listener: EventListener) => void;\r\n\r\n    /**\r\n     * 自定义解绑事件的函数。\r\n     */\r\n    remove?: (this: EventFix, elem: Element | Document, listener: EventListener) => void;\r\n\r\n}\r\nvar eventFix: { [event: string]: EventFix };\r\n\r\n/**\r\n * 绑定指定元素的事件。\r\n * @param elem 要绑定的元素或文档。\r\n * @param eventName 要绑定的事件名。\r\n * @param selector 要委托的目标元素的 CSS 选择器。\r\n * @param listener 要绑定的事件监听器。\r\n * @param scope 设置 *listener* 中 this 的值。\r\n * @example on(document.body, \"mouseenter\", \"a\", function(e){ this.firstChild.innerHTML = e.pageX; })\r\n */\r\nexport function on(elem: HTMLElement | Document, eventName: string, selector: string, listener: (e: Event, target: HTMLElement) => void, scope?: any): void;\r\n\r\n/**\r\n * 绑定指定元素的事件。\r\n * @param elem 要绑定的元素或文档。\r\n * @param eventName 要绑定的事件名。\r\n * @param listener 要绑定的事件监听器。\r\n * @param scope 设置 *listener* 中 this 的值。\r\n * @example on(document.body, \"click\", e => { alert(\"点击事件\") })\r\n */\r\nexport function on(elem: HTMLElement | Document, eventName: string, listener: (e: Event, target: typeof elem) => void, scope?: any): void;\r\n\r\nexport function on(elem: HTMLElement | Document, eventName: string, selector: string | typeof listener, listener?: ((e: Event, target?: HTMLElement | Document) => void) | typeof scope, scope?: any) {\r\n    if (!eventFix) {\r\n        const isEnterOrLeave: EventFix[\"filter\"] = (e: MouseEvent, target) => /(?:ter|e)$/.test(e.type) || !contains(target, e.relatedTarget as Node);\r\n\r\n        eventFix = {\r\n            __proto__: null!,\r\n\r\n            // focus/blur 不支持冒泡，委托时使用 foucin/foucsout。\r\n            focus: { delegate: \"focusin\" },\r\n            blur: { delegate: \"focusout\" },\r\n\r\n            // mouseenter/mouseleave 不支持冒泡，委托时使用 mouseover/mouseout。\r\n            mouseenter: { delegate: \"mouseover\", filter: isEnterOrLeave },\r\n            mouseleave: { delegate: \"mouseout\", filter: isEnterOrLeave },\r\n\r\n            // pointerenter/pointerleave 不支持冒泡，委托时使用 pointerover/pointerout。\r\n            pointerenter: { delegate: \"pointerover\", filter: isEnterOrLeave },\r\n            pointerleave: { delegate: \"pointerout\", filter: isEnterOrLeave },\r\n\r\n            // 支持绑定原生 click。\r\n            mouseclick: { bind: \"click\" }\r\n        };\r\n\r\n        const html = Document.prototype;\r\n\r\n        // Firefox: 不支持 focusin/focusout 事件。\r\n        // 注意：Chrome 实际支持 focusin/focusout 事件，但判断比较复杂，所以按不支持处理。\r\n        if (!(\"onfocusin\" in html)) {\r\n            const focusAdd: EventFix[\"add\"] = function (elem, listener) {\r\n                elem.addEventListener(this.bind!, listener, true);\r\n            };\r\n            const focusRemove: EventFix[\"remove\"] = function (elem, listener) {\r\n                elem.removeEventListener(this.bind!, listener, true);\r\n            };\r\n            eventFix.focusin = { bind: \"focus\", add: focusAdd, remove: focusRemove };\r\n            eventFix.focusout = { bind: \"blur\", add: focusAdd, remove: focusRemove };\r\n        }\r\n\r\n        // Firefox/Chrome 30-: 不支持 mouseenter/mouseleave 事件。\r\n        if (!(\"onmouseenter\" in html)) {\r\n            eventFix.mouseenter.bind = \"mouseover\";\r\n            eventFix.mouseleave.bind = \"mouseout\";\r\n        }\r\n\r\n        // Firefox: 不支持 mousewheel 事件。\r\n        if (!(\"onmousewheel\" in html)) {\r\n            eventFix.mousewheel = {\r\n                bind: \"DOMMouseScroll\",\r\n                filter(e: MouseWheelEvent) {\r\n                    // 统一使用 wheelDelta 获取滚轮距离。\r\n                    (e as any).wheelDelta = -(e.detail || 0) / 3;\r\n                }\r\n            };\r\n        }\r\n\r\n        // 低版本浏览器：不支持 auxclick 事件。\r\n        if (!(\"onauxclick\" in html)) {\r\n            eventFix.auxclick = {\r\n                bind: \"mouseup\",\r\n                filter: (e: MouseEvent) => e.which === 3\r\n            };\r\n        }\r\n\r\n        // 低版本浏览器：不支持 pointer* 事件。\r\n        if (!(\"onpointerdown\" in html)) {\r\n            eventFix.pointerover = { bind: \"mouseover\" };\r\n            eventFix.pointerout = { bind: \"mouseout\" };\r\n            eventFix.pointerenter.bind = eventFix.mouseenter.bind || \"mouseenter\";\r\n            eventFix.pointerenter.delegate = \"mouseover\";\r\n            eventFix.pointerleave.bind = eventFix.mouseleave.bind || \"mouseleave\";\r\n            eventFix.pointerleave.delegate = \"mouseout\";\r\n            eventFix.pointerdown = { bind: \"mousedown\" };\r\n            eventFix.pointerup = { bind: \"mouseup\" };\r\n            eventFix.pointermove = { bind: \"mousemove\" };\r\n        }\r\n\r\n        // 触屏：提速鼠标事件。\r\n        if ((window as any).TouchEvent) {\r\n            const initTouchEvent: EventFix[\"filter\"] = function (e: TouchEvent) {\r\n                // PC Chrome: 修复触摸事件的 pageX 和 pageY 始终是 0。\r\n                if (!(e as any).pageX && !(e as any).pageY && (e.changedTouches || 0).length) {\r\n                    Object.defineProperty(e, \"pageX\", { get(this: TouchEvent) { return this.changedTouches[0].pageX; } });\r\n                    Object.defineProperty(e, \"pageY\", { get(this: TouchEvent) { return this.changedTouches[0].pageY; } });\r\n                    Object.defineProperty(e, \"clientX\", { get(this: TouchEvent) { return this.changedTouches[0].clientX; } });\r\n                    Object.defineProperty(e, \"clientY\", { get(this: TouchEvent) { return this.changedTouches[0].clientY; } });\r\n                    Object.defineProperty(e, \"which\", { value: 1 });\r\n                }\r\n            };\r\n            eventFix.click = {\r\n                filter: initTouchEvent,\r\n                add(elem, listener) {\r\n                    let state: any = 0;\r\n                    elem.addEventListener(\"touchstart\", (listener as any).__touchStart__ = function (e: TouchEvent) {\r\n                        if (e.changedTouches.length === 1) {\r\n                            state = [e.changedTouches[0].pageX, e.changedTouches[0].pageY];\r\n                        }\r\n                    }, false);\r\n                    elem.addEventListener(\"touchend\", (listener as any).__touchEnd__ = function (e: TouchEvent) {\r\n                        if (state && e.changedTouches.length === 1 && Math.pow(e.changedTouches[0].pageX - state[0], 2) + Math.pow(e.changedTouches[0].pageY - state[1], 2) < 25) {\r\n                            state = 1;\r\n                            listener.call(elem, e);\r\n                        }\r\n                    }, false);\r\n                    elem.addEventListener(\"click\", (listener as any).__click__ = function (e: MouseEvent) {\r\n                        const trigger = state !== 1;\r\n                        state = 0;\r\n                        trigger && listener.call(this, e);\r\n                    }, false);\r\n                },\r\n                remove(elem, listener) {\r\n                    elem.removeEventListener(\"touchstart\", (listener as any).__touchStart__, false);\r\n                    elem.removeEventListener(\"touchend\", (listener as any).__touchEnd__, false);\r\n                    elem.removeEventListener(\"click\", (listener as any).__click__, false);\r\n                }\r\n            };\r\n            if (eventFix.pointerout) {\r\n                const pointerAdd: EventFix[\"add\"] = function (elem, listener) {\r\n                    let state = 0;\r\n                    elem.addEventListener((this as any).touch, (listener as any).__touch__ = function (e: MouseEvent) {\r\n                        state = 1;\r\n                        listener.call(this, e);\r\n                    }, false);\r\n                    elem.addEventListener(this.bind!, (listener as any).__mouse__ = function (e: MouseEvent) {\r\n                        if (state) {\r\n                            state = 0;\r\n                        } else {\r\n                            listener.call(this, e);\r\n                        }\r\n                    }, false);\r\n                };\r\n                const pointerRemove: EventFix[\"remove\"] = function (elem, listener) {\r\n                    elem.removeEventListener((this as any).touch, (listener as any).__touch__, false);\r\n                    elem.removeEventListener(this.bind!, (listener as any).__mouse__, false);\r\n                };\r\n                eventFix.pointerdown = { bind: \"mousedown\", touch: \"touchstart\", filter: initTouchEvent, add: pointerAdd, remove: pointerRemove } as any;\r\n                eventFix.pointerup = { bind: \"mouseup\", touch: \"touchend\", filter: initTouchEvent, add: pointerAdd, remove: pointerRemove } as any;\r\n                eventFix.pointermove = { bind: \"mousemove\", touch: \"touchmove\", filter: initTouchEvent, add: pointerAdd, remove: pointerRemove } as any;\r\n            }\r\n        }\r\n    }\r\n\r\n    if (typeof selector !== \"string\") {\r\n        scope = listener;\r\n        listener = selector;\r\n        selector = \"\";\r\n    }\r\n    scope = scope || elem;\r\n\r\n    const events = (elem as any).__events__ || ((elem as any).__events__ = { __proto__: null! });\r\n    const key = selector ? eventName + \" \" + selector : eventName;\r\n    const listeners = events[key];\r\n\r\n    const delegateFix = eventFix[eventName] || 0;\r\n    const bindFix = selector && delegateFix.delegate ? eventFix[eventName = delegateFix.delegate!] || 0 : delegateFix;\r\n\r\n    // 如果满足以下任一情况，需要重新封装监听器。\r\n    // 1. 事件委托，需要重新定位目标元素。\r\n    // 2. 事件有特殊过滤器，仅在满足条件时触发。\r\n    // 3. 需要重写回调函数中的 this。\r\n    // 4. 监听器具有第二参数，需要重写回调函数的第二参数。\r\n    // 5. 监听器已添加需要重新封装才能绑定成功。\r\n    if (selector || scope !== elem || bindFix.filter || listener.length > 1 || listeners && indexOfListener(listeners, listener, scope) >= 0) {\r\n        const originalListener = listener;\r\n        listener = (e: Event) => {\r\n            let target = scope;\r\n            if (selector && (!(target = closest(e.target as Node, selector, target)!) || (delegateFix !== bindFix && delegateFix.filter && delegateFix.filter(e, target) === false))) {\r\n                return;\r\n            }\r\n            if (bindFix.filter && bindFix.filter(e, target) === false) {\r\n                return;\r\n            }\r\n            originalListener.call(scope, e, target);\r\n        };\r\n        listener.__original__ = originalListener;\r\n        listener.__scope__ = scope;\r\n    }\r\n\r\n    // 保存监听器以便之后解绑或手动触发事件。\r\n    if (!listeners) {\r\n        events[key] = listener;\r\n    } else if (Array.isArray(listeners)) {\r\n        listeners.push(listener);\r\n    } else {\r\n        events[key] = [listeners, listener];\r\n    }\r\n\r\n    // 底层绑定事件。\r\n    bindFix.add ? bindFix.add(elem, listener) : elem.addEventListener(bindFix.bind || eventName, listener, false);\r\n\r\n}\r\n\r\n/**\r\n * 解绑指定元素的事件。\r\n * @param elem 要解绑的元素或文档。\r\n * @param eventName 要解绑的事件名。\r\n * @param selector 要委托的目标元素的 CSS 选择器。\r\n * @param listener 要解绑的事件监听器。如果未提供则解绑所有监听器。\r\n * @param scope 设置 *listener* 中 this 的值。\r\n * @example off(document.body, \"mouseenter\", \"a\", function(e) { this.firstChild.innerHTML = e.pageX; })\r\n */\r\nexport function off(elem: HTMLElement | Document, eventName: string, selector: string, listener?: (e: Event, target: HTMLElement | Document) => void, scope?: any): void;\r\n\r\n/**\r\n * 解绑指定元素的事件。\r\n * @param elem 要解绑的元素或文档。\r\n * @param eventName 要解绑的事件名。\r\n * @param listener 要解绑的事件监听器。如果未提供则解绑所有监听器。\r\n * @param scope 设置 *listener* 中 this 的值。\r\n * @example off(document.body, \"click\", e => { alert(\"点击事件\") })\r\n */\r\nexport function off(elem: HTMLElement | Document, eventName: string, listener?: (e: Event, target: HTMLElement | Document) => void, scope?: any): void;\r\n\r\nexport function off(elem: HTMLElement | Document, eventName: string, selector?: string | typeof listener, listener?: (e: Event, target: HTMLElement | Document) => void, scope?: any) {\r\n    if (typeof selector !== \"string\") {\r\n        scope = listener;\r\n        listener = selector;\r\n        selector = \"\";\r\n    }\r\n    scope = scope || elem;\r\n\r\n    const events = (elem as any).__events__;\r\n    const key = selector ? eventName + \" \" + selector : eventName;\r\n    const listeners = events && events[key];\r\n    if (listeners) {\r\n        if (listener) {\r\n            // 更新事件列表。\r\n            const index = indexOfListener(listeners, listener, scope);\r\n            if (~index) {\r\n                if (Array.isArray(listeners)) {\r\n                    listener = listeners[index];\r\n                    listeners.splice(index, 1);\r\n                    if (!listeners.length) {\r\n                        delete events[key];\r\n                    }\r\n                } else {\r\n                    listener = listeners;\r\n                    delete events[key];\r\n                }\r\n            }\r\n\r\n            // 底层解绑事件。\r\n            const bindFix = eventFix && eventFix[eventName] || 0;\r\n            bindFix.remove ? bindFix.remove(elem, listener as EventListener) : elem.removeEventListener((selector ? bindFix.delegate : bindFix.bind) || eventName, listener as EventListener, false);\r\n        } else if (Array.isArray(listeners)) {\r\n            for (listener of listeners) {\r\n                off(elem, eventName, selector, listener, scope);\r\n            }\r\n        } else {\r\n            off(elem, eventName, selector, listeners, scope);\r\n        }\r\n    }\r\n}\r\n\r\nfunction indexOfListener(listeners: typeof listener[] | typeof listener | undefined, listener: (e: Event, target: HTMLElement | Document) => void, scope: any) {\r\n    if (Array.isArray(listeners)) {\r\n        for (let i = 0; i < listeners.length; i++) {\r\n            if (listeners[i] === listener || (listeners[i] as any).__original__ === listener && (listeners[i] as any).__scope__ === scope) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    return listeners === listener || (listeners as any).__original__ === listener && (listeners as any).__scope__ === scope ? 0 : -1;\r\n}\r\n\r\n/**\r\n * 触发指定元素的指定事件，执行已添加的事件监听器。\r\n * @param elem 要触发事件的元素或文档。\r\n * @param eventName 要触发的事件名。\r\n * @param selector 要委托的目标元素的 CSS 选择器。\r\n * @param event 传递给监听器的事件参数。\r\n * @example trigger(document.body, \"click\")\r\n */\r\nexport function trigger(elem: HTMLElement | Document, eventName: string, selector: string, event?: Partial<Event>): void;\r\n\r\n/**\r\n * 触发指定元素的指定事件，执行已添加的事件监听器。\r\n * @param elem 要触发事件的元素或文档。\r\n * @param eventName 要触发的事件名。\r\n * @param event 传递给监听器的事件参数。\r\n * @example trigger(document.body, \"click\")\r\n */\r\nexport function trigger(elem: HTMLElement | Document, eventName: string, event?: Partial<Event>): void;\r\n\r\nexport function trigger(elem: HTMLElement | Document, eventName: string, selector: string | typeof event, event?: Partial<Event>) {\r\n    if (typeof selector !== \"string\") {\r\n        event = selector;\r\n        selector = \"\";\r\n    }\r\n    const listeners = (elem as any).__events__[selector ? eventName + \" \" + selector : eventName];\r\n    if (listeners) {\r\n        event = event || {};\r\n        if (!event.type) (event as any).type = eventName;\r\n        if (!event.target) (event as any).target = selector ? find(elem, selector as string) : elem;\r\n        if (Array.isArray(listeners)) {\r\n            for (const listener of listeners.slice(0)) {\r\n                listener.call(elem, event);\r\n            }\r\n        } else {\r\n            listeners.call(elem, event);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * 存储特效相关配置。\r\n */\r\nvar animateFix: {\r\n\r\n    /**\r\n     * 是否支持 CSS3 动画。\r\n     */\r\n    support: boolean,\r\n\r\n    /**\r\n     * transition 属性名。\r\n     */\r\n    transition: string,\r\n\r\n    /**\r\n     * transitionEnd 事件名。\r\n     */\r\n    transitionEnd: string\r\n\r\n};\r\n\r\n/**\r\n * 执行一个自定义动画渐变。\r\n * @param elem 要渐变的元素。\r\n * @param propNames 要渐变的 CSS 属性名和最终的属性值组成的键值对。\r\n * @param callback 渐变执行结束的回调函数。\r\n * @param duration 渐变执行的总毫秒数。\r\n * @param timingFunction 渐变函数。可以使用 CSS3 预设的特效渐变函数。\r\n * @example animate(document.body, { height: 400 });\r\n */\r\nexport function animate(elem: HTMLElement, propNames: { [propName: string]: string | number }, callback?: (this: typeof elem) => void, duration = 200, timingFunction = \"ease\") {\r\n    if (!animateFix) {\r\n        const transition = vendor(\"transition\");\r\n        animateFix = {\r\n            support: transition in document.documentElement.style,\r\n            transition: transition,\r\n            transitionEnd: (transition + \"End\").replace(transition.length > 10 ? /^[A-Z]/ : /[A-Z]/, w => w.toLowerCase())\r\n        };\r\n    }\r\n    if (animateFix.support && duration !== 0) {\r\n        const context = (elem.style as any).__animate__ || ((elem.style as any).__animate__ = { __proto__: null });\r\n        const setTransition = () => {\r\n            let transition = \"\";\r\n            for (const key in context) {\r\n                if (transition) transition += \",\";\r\n                transition += `${key.replace(/[A-Z]|^ms|^webkit/g, word => \"-\" + word.toLowerCase())} ${duration}ms ${timingFunction}`;\r\n            }\r\n            elem.style[animateFix.transition as any] = transition;\r\n        };\r\n        const end = (e: Event) => {\r\n            // 忽略冒泡导致的调用。\r\n            if (timer && (!e || e.target === e.currentTarget)) {\r\n                clearTimeout(timer);\r\n                timer = 0;\r\n                elem.removeEventListener(animateFix.transitionEnd, end, false);\r\n\r\n                // 如果新的渐变覆盖了当前渐变的所有属性，则不触发本次渐变的回调函数。\r\n                let contextUpdated = false;\r\n                for (const key in context) {\r\n                    if (context[key] === end) {\r\n                        delete context[key];\r\n                        contextUpdated = true;\r\n                    }\r\n                }\r\n\r\n                if (contextUpdated) {\r\n                    setTransition();\r\n                    callback && callback.call(elem);\r\n                }\r\n            }\r\n        };\r\n\r\n        // 设置所有属性为起始值。\r\n        for (let propName in propNames) {\r\n            propName = vendor(propName);\r\n            context[propName] = end;\r\n            if (!elem.style[propName as any]) {\r\n                elem.style[propName as any] = getStyle(elem, propName);\r\n            }\r\n        }\r\n\r\n        // 触发重新布局以保证效果可以触发。\r\n        elem.offsetWidth && elem.clientLeft;\r\n\r\n        // 设置要渐变的属性。\r\n        setTransition();\r\n\r\n        // 绑定渐变完成事件。\r\n        elem.addEventListener(animateFix.transitionEnd, end, false);\r\n        let timer = setTimeout(end, duration) as any;\r\n    } else {\r\n        callback && setTimeout(() => { callback.call(elem); }, duration);\r\n    }\r\n\r\n    // 设置属性为最终值，触发动画。\r\n    for (const propName in propNames) {\r\n        setStyle(elem, propName, propNames[propName]);\r\n    }\r\n}\r\n\r\n/**\r\n * 判断指定的元素是否被隐藏。\r\n * @param elem 要判断的元素。\r\n * @return 如果元素被隐藏或正在被隐藏则返回 true，否则返回 false。\r\n * @example isHidden(document.body)\r\n */\r\nexport function isHidden(elem: HTMLElement) {\r\n    return (elem.style as any).__toggle__ === false || (elem.style.display || getStyle(elem, \"display\")) === \"none\";\r\n}\r\n\r\n/**\r\n * 存储标签默认的 display 属性。\r\n */\r\nvar defaultDisplays: { [tagName: string]: string };\r\n\r\n/**\r\n * 存储默认显示动画。\r\n */\r\nvar toggleAnimations: { [animation: string]: { [propName: string]: string | number } };\r\n\r\n/**\r\n * 内置的切换动画名。\r\n */\r\nexport type ToggleAnimation = \"opacity\" | \"height\" | \"width\" | \"top\" | \"bottom\" | \"left\" | \"right\" | \"scale\" | \"scaleX\" | \"scaleY\" | \"slideDown\" | \"slideRight\" | \"slideUp\" | \"slideLeft\" | \"zoomIn\" | \"zoomOut\" | \"rotate\" | typeof toggleAnimations[\"\"];\r\n\r\n/**\r\n * 显示指定的元素。\r\n * @param elem 要显示的元素。\r\n * @param animation 显示时使用的动画。\r\n * @param callback 动画执行完成后的回调。\r\n * @param duration 动画执行的总毫秒数。\r\n * @param timingFunction 渐变函数。可以使用 CSS3 预设的特效渐变函数。\r\n * @param target 动画的目标元素。\r\n */\r\nexport function show(elem: HTMLElement, animation?: ToggleAnimation, callback?: (this: HTMLElement, value: boolean) => void, duration?: number, timingFunction?: string, target?: HTMLElement) {\r\n    if (animation || callback) {\r\n        toggle(elem, true, animation, callback, duration, timingFunction, target);\r\n    } else {\r\n        elem.style.display = (elem.style as any).__display__ || \"\";\r\n\r\n        // 如果清空内联 display 后 display 仍然为 none, 说明通过 CSS 设置了 display 属性。\r\n        // 这时将元素强制设为 inline 或 block。\r\n        if (getStyle(elem, \"display\") === \"none\") {\r\n            const nodeName = elem.nodeName;\r\n            let defaultDisplay = (defaultDisplays || (defaultDisplays = { __proto__: null! }))[nodeName];\r\n            if (!defaultDisplay) {\r\n                // 创建一个新节点以计算其默认的 display 属性。\r\n                const tmp = document.createElement(nodeName);\r\n                document.body.appendChild(tmp);\r\n                defaultDisplay = getStyle(tmp, \"display\");\r\n                document.body.removeChild(tmp);\r\n                // 如果计算失败则设置为默认的 block。\r\n                if (defaultDisplay === \"none\") {\r\n                    defaultDisplay = \"block\";\r\n                }\r\n                // 缓存以加速下次计算。\r\n                defaultDisplays[nodeName] = defaultDisplay;\r\n            }\r\n            elem.style.display = defaultDisplay;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * 隐藏指定的元素。\r\n * @param elem 要隐藏的元素。\r\n * @param animation 显示时使用的动画。\r\n * @param callback 动画执行完成后的回调。\r\n * @param duration 动画执行的总毫秒数。\r\n * @param timingFunction 渐变函数。可以使用 CSS3 预设的特效渐变函数。\r\n * @param target 动画的目标元素。\r\n */\r\nexport function hide(elem: HTMLElement, animation?: ToggleAnimation, callback?: (this: HTMLElement, value: boolean) => void, duration?: number, timingFunction?: string, target?: HTMLElement) {\r\n    if (animation || callback) {\r\n        toggle(elem, false, animation, callback, duration, timingFunction, target);\r\n    } else {\r\n        const currentDisplay = getStyle(elem, \"display\");\r\n        if (currentDisplay !== \"none\") {\r\n            (elem.style as any).__display__ = elem.style.display;\r\n            elem.style.display = \"none\";\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * 切换显示或隐藏指定元素。\r\n * @param elem 要显示或隐藏的元素。\r\n * @param animation 显示或隐藏时使用的动画。\r\n * @param callback 动画执行完成后的回调。\r\n * @param duration 动画执行的总毫秒数。\r\n * @param timingFunction 渐变函数。可以使用 CSS3 预设的特效渐变函数。\r\n * @param target 动画的目标元素。\r\n * @example\r\n * // 折叠/展开\r\n * toggle(document.body, \"height\");\r\n *\r\n * // 深入/淡出\r\n * toggle(document.body, \"opacity\");\r\n *\r\n * // 缩小/放大\r\n * toggle(document.body, \"scale\");\r\n */\r\nexport function toggle(elem: HTMLElement, animation?: ToggleAnimation, callback?: (this: HTMLElement, value: boolean) => void, duration?: number, timingFunction?: string, target?: HTMLElement): void;\r\n\r\n/**\r\n * 切换显示或隐藏指定元素。\r\n * @param elem 要显示或隐藏的元素。\r\n * @param value 如果为 true 则显示元素；如果为 false 则隐藏元素。\r\n * @param animation 显示或隐藏时使用的动画。\r\n * @param callback 动画执行完成后的回调。\r\n * @param duration 动画执行的总毫秒数。\r\n * @param timingFunction 渐变函数。可以使用 CSS3 预设的特效渐变函数。\r\n * @param target 动画的目标元素。\r\n */\r\nexport function toggle(elem: HTMLElement, value: boolean, animation?: ToggleAnimation, callback?: (this: HTMLElement, value: boolean) => void, duration?: number, timingFunction?: string, target?: HTMLElement): void;\r\n\r\nexport function toggle(elem: HTMLElement, value?: boolean | typeof animation, animation?: ToggleAnimation | typeof callback, callback?: ((this: HTMLElement, value: boolean) => void) | typeof duration, duration?: number | typeof timingFunction, timingFunction?: string | typeof target, target?: HTMLElement) {\r\n    if (typeof value !== \"boolean\") {\r\n        target = timingFunction as typeof target;\r\n        timingFunction = duration as string;\r\n        duration = callback as number;\r\n        callback = animation as (this: HTMLElement, value: boolean) => void;\r\n        animation = value as ToggleAnimation;\r\n        value = undefined;\r\n    }\r\n    const hidden = isHidden(elem);\r\n    if (value == undefined) {\r\n        value = hidden;\r\n    }\r\n    if (typeof animation === \"string\") {\r\n        if (!toggleAnimations) {\r\n            toggleAnimations = {\r\n                opacity: {\r\n                    opacity: 0\r\n                },\r\n                height: {\r\n                    marginTop: 0,\r\n                    borderTopWidth: 0,\r\n                    paddingTop: 0,\r\n                    height: 0,\r\n                    paddingBottom: 0,\r\n                    borderBottomWidth: 0,\r\n                    marginBottom: 0\r\n                },\r\n                width: {\r\n                    marginLeft: 0,\r\n                    borderLeftWidth: 0,\r\n                    paddingLeft: 0,\r\n                    width: 0,\r\n                    paddinRight: 0,\r\n                    borderRightWidth: 0,\r\n                    marginRight: 0\r\n                },\r\n                top: { transform: \"translateY(-100%)\" },\r\n                bottom: { transform: \"translateY(100%)\" },\r\n                left: { transform: \"translateX(-100%)\" },\r\n                right: { transform: \"translateX(100%)\" },\r\n                scale: { transform: \"scale(0, 0)\" },\r\n                scaleX: { transform: \"scaleX(0)\" },\r\n                scaleY: { transform: \"scaleY(0)\" },\r\n                slideDown: { opacity: 0, transform: \"translateY(10%)\" },\r\n                slideRight: { opacity: 0, transform: \"translateX(10%)\" },\r\n                slideUp: { opacity: 0, transform: \"translateY(-10%)\" },\r\n                slideLeft: { opacity: 0, transform: \"translateX(-10%)\" },\r\n                zoomIn: { opacity: 0, transform: \"scale(0, 0)\" },\r\n                zoomOut: { opacity: 0, transform: \"scale(1.2, 1.2)\" },\r\n                rotate: { opacity: 0, transform: \"rotate(180deg)\" }\r\n            };\r\n        }\r\n        animation = toggleAnimations[animation];\r\n    }\r\n    if (animation && duration !== 0) {\r\n\r\n        // 优先显示元素以便后续计算。\r\n        if (value && hidden) {\r\n            show(elem);\r\n        }\r\n\r\n        // 设置渐变目标。\r\n        // 如果正在执行渐变，计算新目标会出现错误，直接复用上次设置的目标。\r\n        const setTransformOrigin = target && (animation as typeof toggleAnimations[\"\"]).transform && (elem.style as any).__toggle__ == undefined;\r\n        if (setTransformOrigin) {\r\n            const targetRect = getRect(target!);\r\n            const elemRect = getRect(elem);\r\n            setStyle(elem, \"transformOrigin\", `${(elemRect.x + elemRect.width <= targetRect.x + targetRect.width / 4 ? targetRect.x : targetRect.x + targetRect.width <= elemRect.x + targetRect.width / 4 ? targetRect.x + targetRect.width : targetRect.x + targetRect.width / 2) - elemRect.x}px ${(elemRect.y + elemRect.height <= targetRect.y + targetRect.height / 4 ? targetRect.y : targetRect.y + targetRect.height <= elemRect.y + targetRect.height / 4 ? targetRect.y + targetRect.height : targetRect.y + targetRect.height / 2) - elemRect.y}px`);\r\n        }\r\n\r\n        // 更改宽高时隐藏滚动条。\r\n        const setOverflowX = (animation as typeof toggleAnimations[\"\"]).width != undefined;\r\n        if (setOverflowX) {\r\n            elem.style.overflowX = \"hidden\";\r\n        }\r\n        const setOverflowY = (animation as typeof toggleAnimations[\"\"]).height != undefined;\r\n        if (setOverflowY) {\r\n            elem.style.overflowY = \"hidden\";\r\n        }\r\n\r\n        // 计算渐变的最终属性。\r\n        // 如果隐藏元素，则 animation 表示最终属性。\r\n        // 如果显示元素，则需要手动计算最终属性。\r\n        let to = animation as typeof toggleAnimations[\"\"];\r\n        if (value) {\r\n            to = {};\r\n\r\n            // 如果正在执行渐变，则从当前位置开始渐变而非从隐藏时的值属性开始，同时停止渐变用于计算最终属性。\r\n            let from = animation as typeof toggleAnimations[\"\"];\r\n            if ((elem.style as any).__toggle__ != undefined) {\r\n                from = {};\r\n                for (const prop in animation as typeof toggleAnimations[\"\"]) {\r\n                    from[prop] = getStyle(elem, prop);\r\n                    setStyle(elem, prop, \"\");\r\n                }\r\n                elem.style[animateFix.transition as any] = \"\";\r\n            }\r\n\r\n            // 计算最终属性值并将属性重置为初始值。\r\n            for (const prop in animation as typeof toggleAnimations[\"\"]) {\r\n                to[prop] = getStyle(elem, prop);\r\n                setStyle(elem, prop, from[prop]);\r\n            }\r\n        }\r\n\r\n        // 执行渐变。\r\n        (elem.style as any).__toggle__ = value;\r\n        animate(elem, to, () => {\r\n            delete (elem.style as any).__toggle__;\r\n            if (setOverflowX) {\r\n                elem.style.minWidth = elem.style.overflowX = \"\";\r\n            }\r\n            if (setOverflowY) {\r\n                elem.style.minHeight = elem.style.overflowY = \"\";\r\n            }\r\n            if (setTransformOrigin) {\r\n                setStyle(elem, \"transformOrigin\", \"\");\r\n            }\r\n            for (const prop in to) {\r\n                setStyle(elem, prop, \"\");\r\n            }\r\n            if (!value) {\r\n                hide(elem);\r\n            }\r\n            callback && (callback as Function).call(elem, value);\r\n        }, duration as number, timingFunction as string);\r\n\r\n    } else {\r\n        value ? show(elem) : hide(elem);\r\n        callback && (callback as Function).call(elem, value);\r\n    }\r\n}\r\n\r\n/**\r\n * 确保在页面加载后执行指定的函数。\r\n * @param callback 要执行的回调函数。\r\n * @param context 要等待的文档对象。\r\n */\r\nexport function ready(callback: (this: Document) => void, context = document) {\r\n    if (/^(?:complete|loaded|interactive)$/.test(context.readyState) && context.body) {\r\n        callback.call(context);\r\n    } else {\r\n        context.addEventListener(\"DOMContentLoaded\", callback, false);\r\n    }\r\n}\r\n"],"mappings":"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"}