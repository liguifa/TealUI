{"version":3,"file":"animateText.js","sourceRoot":"../../../..","sources":["components/ux/animateText/old/animateText.ts"],"sourcesContent":["// #todo\r\n\r\n/**\r\n * @author xuld@vip.qq.com\r\n */\r\n\r\n/**\r\n * 以动画方式逐字打印指定节点的内容。\r\n * @param {Number} [speed=150] 每个字打印的间隙时间。\r\n * @param {String} [cursor=\"|\"] 打字时作为光标的字符。\r\n * @param {Function} [callback] 当全部字符打印完成时的回调函数。函数参数为：\r\n * * @this {Element} 当前的目标节点。\r\n * * @param {Number} speed 每个字打印的间隙时间。\r\n * @return this\r\n * @example $(\"#elem1\").animateText()\r\n */\r\nDom.prototype.animateText = function (speed, cursor, callback) {\r\n    speed = speed || 150;\r\n    cursor = cursor == null ? \"|\" : cursor;\r\n    return this.each(function (elem) {\r\n        var html = elem.innerHTML;\r\n        var pos = 0;\r\n\r\n        function step() {\r\n\r\n            // 跳过 HTML 标签和空白字符。\r\n            while (/^[\\s<]/.test(html.charAt(pos))) {\r\n                pos = Math.max(html.charAt(pos++) === \"<\" ? html.indexOf(\">\", pos) : html.substr(pos).search(/\\S/) + pos, pos);\r\n            }\r\n\r\n            elem.innerHTML = html.substr(0, ++pos) + cursor;\r\n\r\n            if (pos < html.length) {\r\n                setTimeout(step, speed);\r\n            } else {\r\n                elem.innerHTML = html;\r\n                callback && callback.call(elem, speed);\r\n            }\r\n        }\r\n\r\n        step();\r\n\r\n    });\r\n};\r\n"],"mappings":"AAAA,QAAQ;AAER;;GAEG;AAEH;;;;;;;;;GASG;AACH,GAAG,CAAC,SAAS,CAAC,WAAW,GAAG,UAAU,KAAK,EAAE,MAAM,EAAE,QAAQ;IACzD,KAAK,GAAG,KAAK,IAAI,GAAG,CAAC;IACrB,MAAM,GAAG,MAAM,IAAI,IAAI,GAAG,GAAG,GAAG,MAAM,CAAC;IACvC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI;QAC3B,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC;QAC1B,IAAI,GAAG,GAAG,CAAC,CAAC;QAEZ;YAEI,mBAAmB;YACnB,OAAO,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC;gBACrC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,KAAK,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,GAAG,EAAE,GAAG,CAAC,CAAC;YACnH,CAAC;YAED,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,GAAG,CAAC,GAAG,MAAM,CAAC;YAEhD,EAAE,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACpB,UAAU,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;YAC5B,CAAC;YAAC,IAAI,CAAC,CAAC;gBACJ,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gBACtB,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;YAC3C,CAAC;QACL,CAAC;QAED,IAAI,EAAE,CAAC;IAEX,CAAC,CAAC,CAAC;AACP,CAAC,CAAC"}