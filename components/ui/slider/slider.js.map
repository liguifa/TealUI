{"version":3,"file":"slider.js","sourceRoot":"../../..","sources":["components/ui/slider/slider.tsx"],"sourcesContent":["// import { Control, VNode, bind } from \"control\";\r\n// import \"./slider.scss\";\r\n\r\n// /**\r\n//  * 表示一个滑动条。\r\n//  */\r\n// export class Slider extends Control {\r\n\r\n//     /**\r\n//      * 当被子类重写时负责渲染当前控件。\r\n//      * @return 返回一个虚拟节点。\r\n//      */\r\n//     protected render() {\r\n//         return <div class=\"x-slider\"></div>;\r\n//     }\r\n\r\n// }\r\n\r\n// export default Slider;\r\n// // #todo\r\n\r\n// /**\r\n//  * @author xuld@vip.qq.com\r\n//  */\r\n\r\n// typeof include === \"function\" && include(\"control/input.js\r\n// typeof include === \"function\" && include(\"dom/drag.js\r\n// \");\r\n\r\n// /**\r\n// \");\r\n//  * ��ʾһ�����顣\r\n//  * @class\r\n//  */\r\n// var Slider = Input.extend({\r\n\r\n//     /**\r\n//      * ���û�������Сֵ��\r\n//      * @type {Number}\r\n//      */\r\n//     min: 0,\r\n\r\n//     /**\r\n//      * ���û���������ֵ��\r\n//      * @type {Number}\r\n//      */\r\n//     max: 100,\r\n\r\n//     /**\r\n//      * ���û����Ĳ�����\r\n//      * @type {Number}\r\n//      */\r\n//     step: 0,\r\n\r\n//     init: function (options) {\r\n//         NodeList.each(this.elem.queryAll('.x-slider-handle'), this.initHandle, this);\r\n//         var me = this;\r\n//         this.elem.on('mousedown', function (e) { me.onClick(e); });\r\n//         this.onChange();\r\n//     },\r\n\r\n//     onClick: function (e) {\r\n\r\n//         if (e.target.matches('.x-slider-handle')) {\r\n//             return;\r\n//         }\r\n\r\n//         var handles = this.elem.queryAll('.x-slider-handle'),\r\n//             left = e.pageX - this.elem.getRect().left,\r\n//             leftP = left * 100 / this.elem.offsetWidth,\r\n//             min = 101,\r\n//             handle = handles[0];\r\n\r\n//         // �ҵ������ĵ㡣\r\n//         for (var i = handles.length - 1; i >= 0; i--) {\r\n//             // ���ұ߸������˳�ѭ����\r\n//             var value = Math.abs(parseFloat(handles[i].style.left) - leftP);\r\n//             if (value < min) {\r\n//                 handle = handles[i];\r\n//                 min = value;\r\n//             }\r\n//         }\r\n\r\n//         this._setHandleOffset(handle, left);\r\n//         handle.trigger('mousedown', e);\r\n//     },\r\n\r\n//     _setHandleOffset: function (handle, left) {\r\n//         var draggable = {\r\n//             endOffset: { left: left }\r\n//         };\r\n//         this._handleDragStart(handle, draggable);\r\n//         this._handleDragMove(handle, draggable);\r\n//     },\r\n\r\n//     _handleDragStart: function (handle, draggable) {\r\n//         // �϶���ʼǰȷ����ǰ�����Ŀ��÷�Χ��ÿ�������ķ�Χ��ǰ�󻬿�֮�䡣\r\n//         var handles = this.elem.queryAll('.x-slider-handle'),\r\n//             min = 101,\r\n//             max = -1,\r\n//             value;\r\n\r\n//         for (var i = 0; i < handles.length; i++) {\r\n//             if (handles[i] !== i) {\r\n//                 value = parseFloat(handles[i].style.left);\r\n//                 if (value < min) {\r\n//                     min = value;\r\n//                 }\r\n//                 if (value > max) {\r\n//                     max = value;\r\n//                 }\r\n//             }\r\n//         }\r\n\r\n//         if (min === 101) {\r\n//             min = 0;\r\n//         }\r\n\r\n//         if (max === -1) {\r\n//             max = 100;\r\n//         }\r\n\r\n//         draggable.min = min,\r\n//         draggable.max = max;\r\n\r\n//         // �����������ص�ʱ�����������л�˳����\r\n//         var currentValue = parseFloat(handle.style.left);\r\n//         if (currentValue === draggable.min) {\r\n//             draggable.min = 0;\r\n//         }\r\n//         if (currentValue === draggable.max) {\r\n//             draggable.max = 100;\r\n//         }\r\n\r\n//         draggable.part = this.step && this.elem.offsetWidth * this.step / (this.max - this.min);\r\n//     },\r\n\r\n//     _handleDragMove: function (handle, draggable, e) {\r\n//         var left = draggable.endOffset.left;\r\n\r\n//         // ʵʱ������\r\n//         if (draggable.part) {\r\n//             left = draggable.part * Math.floor((left + draggable.part / 2) / draggable.part);\r\n//         }\r\n\r\n//         // �����ٷֱȡ�\r\n//         left = left * 100 / this.elem.offsetWidth;\r\n\r\n//         // ȷ�������ں����϶���Χ�ڡ�\r\n//         draggable.value = left = Math.max(draggable.min, Math.min(draggable.max, left));\r\n\r\n//         if (this.onChanging(draggable, e) !== false) {\r\n\r\n//             // ������ X ���꼴�ɡ�\r\n//             handle.style.left = left + '%';\r\n\r\n//             // ���»���������\r\n//             this.onChange();\r\n\r\n//         }\r\n\r\n//     },\r\n\r\n//     initHandle: function (handle) {\r\n//         var me = this;\r\n//         handle.setDraggable({\r\n//             autoSrcoll: 0,\r\n//             onDragStart: function (e) {\r\n//                 me._handleDragStart(handle, this, e);\r\n//             },\r\n//             onDragMove: function (e) {\r\n//                 me._handleDragMove(handle, this, e);\r\n//                 // ��ֹĬ�ϵ�����λ�ù��ܡ�\r\n//                 return false;\r\n//             }\r\n//         });\r\n\r\n//         // �޸� handle �� left ֵ��\r\n//         if (!/%$/.test(handle.style.left)) {\r\n//             handle.style.left = handle.getOffset().left * 100 / this.elem.offsetWidth + '%';\r\n//         }\r\n//     },\r\n\r\n//     /**\r\n//      * ����ĳ��������ֵ��\r\n//      * @param {Element} handle Ҫ���õĻ��顣\r\n//      * @return {Number} ����һ�� 0 �� 1 ��ֵ����ʾ����������ֵ��\r\n//      */\r\n//     getValueOfHandle: function (handle) {\r\n//         return handle ? this.min + parseFloat(handle.style.left) * (this.max - this.min) / 100 : 0;\r\n//     },\r\n\r\n//     /**\r\n//      * ����ĳ��������ֵ��\r\n//      * @param {Element} handle Ҫ���õĻ��顣\r\n//      * @param {Number} value һ�� 0 �� 1 ��ֵ����ʾ����������ֵ��\r\n//      */\r\n//     setValueOfHandle: function (handle, value) {\r\n//         if (handle) {\r\n//             handle.style.left = (value - this.min) * 100 / (this.max - this.min) + '%';\r\n//             this.onChange();\r\n//         }\r\n//         return this;\r\n//     },\r\n\r\n//     /**\r\n//      * �ڻ��鼴���ƶ�ǰ������\r\n//      * @param {Object} draggable ���汾�λ������ص���Ϣ��\r\n//      * @param {Event} e ����������ԭʼ�¼���Ϣ��\r\n//      * @return {Boolean} �������λ�����Ч���򷵻� false��\r\n//      */\r\n//     onChanging: function (draggable, e) {\r\n//         return this.trigger('chaning', draggable);\r\n//     },\r\n\r\n//     onChange: function () {\r\n\r\n//         // �����ı�����\r\n//         this.getInput().value = this.getValues();\r\n\r\n//         // ���û���ǰ��ɫ��\r\n//         var handles = this.elem.queryAll('.x-slider-handle'),\r\n//             startHandle = this.getStartHandle(),\r\n//             endHandle = this.getEndHandle(),\r\n//             start = startHandle ? parseFloat(startHandle.style.left) : 0,\r\n//             fore = this.elem.query('.x-slider-fore');\r\n//         fore.style.left = start + '%';\r\n//         fore.style.width = endHandle ? Math.max(0, parseFloat(endHandle.style.left) - start) + '%' : 0;\r\n\r\n//         return this.trigger('change');\r\n//     },\r\n\r\n//     /**\r\n//      * ��ȡÿ��������ֵ��\r\n//      */\r\n//     getValues: function () {\r\n//         var values = [];\r\n//         NodeList.each(this.elem.queryAll('.x-slider-handle'), function (handle, index) {\r\n//             values[index] = this.getValueOfHandle(handle);\r\n//         }, this);\r\n//         return values;\r\n//     },\r\n\r\n//     getStartHandle: function () {\r\n//         var handles =  this.elem.queryAll('.x-slider-handle'),\r\n//             min = 0;\r\n//         for (var i = 1; i < handles.length; i++) {\r\n//             if (parseFloat(handles[min].style.left) > parseFloat(handles[i].style.left)) {\r\n//                 min = i;\r\n//             }\r\n//         }\r\n//         return handles.length > 1 ? handles[min] : null;\r\n//     },\r\n\r\n//     getEndHandle: function () {\r\n//         var handles =  this.elem.queryAll('.x-slider-handle'),\r\n//             max = 0;\r\n//         for (var i = 1; i < handles.length; i++) {\r\n//             if (parseFloat(handles[max].style.left) < parseFloat(handles[i].style.left)) {\r\n//                 max = i;\r\n//             }\r\n//         }\r\n//         return handles[max];\r\n//     },\r\n\r\n//     getStart: function (value) {\r\n//         return this.getValueOfHandle(this.getStartHandle());\r\n//     },\r\n\r\n//     setStart: function (value) {\r\n//         return this.setValueOfHandle(this.getStartHandle(), value);\r\n//     },\r\n\r\n//     getEnd: function (value) {\r\n//         return this.getValueOfHandle(this.getEndHandle());\r\n//     },\r\n\r\n//     setEnd: function (value) {\r\n//         return this.setValueOfHandle(this.getEndHandle(), value);\r\n//     },\r\n\r\n//     getValue: function () {\r\n//         return this.getEnd() - this.getStart();\r\n//     },\r\n\r\n//     setValue: function (value) {\r\n//         return this.setEnd(this.getStart() + value);\r\n//     }\r\n\r\n// });"],"mappings":"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"}