{"version":3,"file":"pager-full.js","sourceRoot":"../../../..","sources":["components/ui/pagination/old/pager-full.ts"],"sourcesContent":["\r\n\r\nimport * as dom from \"dom\";\r\nimport ComboBox from \"comboBox\";\r\nimport { initPager } from \"pager/pager-simple\";\r\n\r\nexport default function pager(elem: HTMLElement, callback?: (page: number, pageSize: number) => boolean | void, totalCount?: number, currentPage = 1, pageSize = 10) {\r\n    const pageCount = Math.ceil(totalCount / pageSize) || 1;\r\n    const changePage = (value: number) => {\r\n        const pageSize = +comboBox.value;\r\n        if (value >= 1 && value <= pageCount) {\r\n            pager(elem, callback, totalCount, value, pageSize);\r\n            callback && callback(value, pageSize);\r\n        }\r\n    };\r\n    elem.innerHTML = `显示行数：\r\n<span class=\"x-picker x-page-size\" style=\"width: 70px;\">\r\n    <input type=\"text\" class=\"x-textbox x-pager-input \" readonly>\r\n    <button class=\"x-button\"><i class=\"x-icon\">↡</i></button>\r\n</span>\r\n<menu class=\"x-listbox x-popover\">\r\n    <li><a href=\"javascript:;\">10</a></li>\r\n    <li><a href=\"javascript:;\">20</a></li>\r\n    <li><a href=\"javascript:;\">50</a></li>\r\n</menu>\r\n\r\n<div class=\"x-pager-total\">\r\n    <span>总共${totalCount?totalCount:'0'}条记录，共${pageCount?pageCount:'0'}页</span>\r\n</div>\r\n\r\n<div class=\"x-right\">\r\n    <span class=\"x-pager\" style=\"margin: 0\"></span>\r\n    <form style=\"margin-left: 2em; display: inline\">\r\n        跳至：<input type=\"number\" class=\"x-textbox x-page-current\"value=\"${currentPage}\" min=\"1\" max=\"${pageCount}\"> 页 \r\n        <input type=\"submit\" class=\"x-button  x-page-goto-page\" value=\"跳转\" style=\"min-width: 60px;\">\r\n    </form> \r\n</div>`;\r\n    const comboBox = new ComboBox();\r\n    comboBox.autoResize = false;\r\n    comboBox.elem = dom.find(\".x-page-size\", elem);\r\n    comboBox.value = pageSize + \"\";\r\n    comboBox.on(\"change\", e => {\r\n        changePage(1);\r\n    });\r\n    initPager(dom.find(\".x-pager\", elem), p => {\r\n        changePage(p);\r\n    }, pageCount, currentPage);\r\n    dom.on(dom.find(\"form\", elem), \"submit\", e => {\r\n        e.preventDefault();\r\n        changePage(+dom.getText(dom.find('.x-page-current', elem)));\r\n    });\r\n} "],"mappings":";;IAMA,eAA8B,IAAiB,EAAE,QAA6D,EAAE,UAAmB,EAAE,WAAW,GAAG,CAAC,EAAE,QAAQ,GAAG,EAAE;QAC/J,MAAM,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;QACxD,MAAM,UAAU,GAAG,CAAC,KAAa;YAC7B,MAAM,QAAQ,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC;YACjC,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,IAAI,KAAK,IAAI,SAAS,CAAC,CAAC,CAAC;gBACnC,KAAK,CAAC,IAAI,EAAE,QAAQ,EAAE,UAAU,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;gBACnD,QAAQ,IAAI,QAAQ,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;YAC1C,CAAC;QACL,CAAC,CAAC;QACF,IAAI,CAAC,SAAS,GAAG;;;;;;;;;;;;cAYP,UAAU,GAAC,UAAU,GAAC,GAAG,QAAQ,SAAS,GAAC,SAAS,GAAC,GAAG;;;;;;yEAMG,WAAW,kBAAkB,SAAS;;;OAGxG,CAAC;QACJ,MAAM,QAAQ,GAAG,IAAI,kBAAQ,EAAE,CAAC;QAChC,QAAQ,CAAC,UAAU,GAAG,KAAK,CAAC;QAC5B,QAAQ,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;QAC/C,QAAQ,CAAC,KAAK,GAAG,QAAQ,GAAG,EAAE,CAAC;QAC/B,QAAQ,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC;YACnB,UAAU,CAAC,CAAC,CAAC,CAAC;QAClB,CAAC,CAAC,CAAC;QACH,wBAAS,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,EAAE,CAAC;YACnC,UAAU,CAAC,CAAC,CAAC,CAAC;QAClB,CAAC,EAAE,SAAS,EAAE,WAAW,CAAC,CAAC;QAC3B,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,EAAE,QAAQ,EAAE,CAAC;YACtC,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,UAAU,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;QAChE,CAAC,CAAC,CAAC;IACP,CAAC;IA7CD,wBA6CC"}