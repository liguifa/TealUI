{"version":3,"file":"imageViewer.js","sourceRoot":"../../..","sources":["components/ui/imageViewer/imageViewer.tsx"],"sourcesContent":["import { Control, VNode, bind } from \"control\";\r\nimport \"./imageViewer.scss\";\r\n\r\n/**\r\n * 表示一个图片查看器。\r\n */\r\nexport class ImageViewer extends Control {\r\n\r\n    /**\r\n     * 当被子类重写时负责渲染当前控件。\r\n     * @return 返回一个虚拟节点。\r\n     */\r\n    protected render() {\r\n        return <div class=\"x-imageviewer\"></div>;\r\n    }\r\n\r\n}\r\n\r\nexport default ImageViewer;\r\n// #todo\r\n\r\n/**\r\n * @author xuld@vip.qq.com\r\n */\r\n\r\ntypeof include === \"function\" && include(\"dom/imagezoom.css\");\r\ntypeof include === \"function\" && include(\"dom/dom.js\");\r\n\r\nDom.imageZoom = function (elem, getUrlCallback) {\r\n\r\n    Dom.addClass(elem, 'x-imagezoom-small');\r\n    Dom.on(elem, 'click', function (e) {\r\n        var oldState, data = Dom.data(this);\r\n\r\n        if (Dom.hasClass(this, 'x-imagezoom-small')) {\r\n            Dom.removeClass(this, 'x-imagezoom-small');\r\n            Dom.addClass(this, 'x-imagezoom-large');\r\n            if (getUrlCallback) {\r\n                data.imageZoomSrc = this.src;\r\n                this.src = getUrlCallback(this.src);\r\n            } else {\r\n                data.imageZoomWidth = Dom.getWidth(this);\r\n                data.imageZoomHeight = Dom.getHeight(this);\r\n                this.style.width = this.style.height = 'auto';\r\n            }\r\n        } else {\r\n            Dom.addClass(this, 'x-imagezoom-small');\r\n            Dom.removeClass(this, 'x-imagezoom-large');\r\n            if (getUrlCallback) {\r\n                this.src = data.imageZoomSrc;\r\n            } else {\r\n                Dom.setWidth(this, data.imageZoomWidth);\r\n                Dom.setHeight(this, data.imageZoomHeight);\r\n            }\r\n        }\r\n    });\r\n\r\n};\r\n\r\nDom.prototype.imageZoom = function () {\r\n    return;\r\n};"],"mappings":";;IAGA;;OAEG;IACH,iBAAyB,SAAQ,iBAAO;QAEpC;;;WAGG;QACO,MAAM;YACZ,MAAM,CAAC,gCAAK,KAAK,EAAC,eAAe,GAAO,CAAC;QAC7C,CAAC;KAEJ;IAVD,kCAUC;IAED,kBAAe,WAAW,CAAC;IAC3B,QAAQ;IAER;;OAEG;IAEH,OAAO,OAAO,KAAK,UAAU,IAAI,OAAO,CAAC,mBAAmB,CAAC,CAAC;IAC9D,OAAO,OAAO,KAAK,UAAU,IAAI,OAAO,CAAC,YAAY,CAAC,CAAC;IAEvD,GAAG,CAAC,SAAS,GAAG,UAAU,IAAI,EAAE,cAAc;QAE1C,GAAG,CAAC,QAAQ,CAAC,IAAI,EAAE,mBAAmB,CAAC,CAAC;QACxC,GAAG,CAAC,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,UAAU,CAAC;YAC7B,IAAI,QAAQ,EAAE,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAEpC,EAAE,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,EAAE,mBAAmB,CAAC,CAAC,CAAC,CAAC;gBAC1C,GAAG,CAAC,WAAW,CAAC,IAAI,EAAE,mBAAmB,CAAC,CAAC;gBAC3C,GAAG,CAAC,QAAQ,CAAC,IAAI,EAAE,mBAAmB,CAAC,CAAC;gBACxC,EAAE,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;oBACjB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC;oBAC7B,IAAI,CAAC,GAAG,GAAG,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBACxC,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACJ,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;oBACzC,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;oBAC3C,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;gBAClD,CAAC;YACL,CAAC;YAAC,IAAI,CAAC,CAAC;gBACJ,GAAG,CAAC,QAAQ,CAAC,IAAI,EAAE,mBAAmB,CAAC,CAAC;gBACxC,GAAG,CAAC,WAAW,CAAC,IAAI,EAAE,mBAAmB,CAAC,CAAC;gBAC3C,EAAE,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;oBACjB,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC;gBACjC,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACJ,GAAG,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;oBACxC,GAAG,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;gBAC9C,CAAC;YACL,CAAC;QACL,CAAC,CAAC,CAAC;IAEP,CAAC,CAAC;IAEF,GAAG,CAAC,SAAS,CAAC,SAAS,GAAG;QACtB,MAAM,CAAC;IACX,CAAC,CAAC"}