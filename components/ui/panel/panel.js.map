{"version":3,"file":"panel.js","sourceRoot":"../../..","sources":["components/ui/panel/panel.tsx"],"sourcesContent":["import * as dom from \"ux/dom\";\r\nimport Control, { VNode, bind, NodeLike } from \"ui/control\";\r\nimport \"typo/icon/icon.scss\";\r\nimport \"./panel.scss\";\r\n\r\n/**\r\n * 表示一个面板。\r\n */\r\nexport default class Panel extends Control {\r\n\r\n    /**\r\n     * 即将切换折叠事件。\r\n     * @param value 如果为 true 表示即将折叠。否则表示即将展开。\r\n     * @param sender 事件源。\r\n     * @return 如果返回 false 则禁用折叠。\r\n     */\r\n    onCollapseChange: (value: boolean, sender: this) => boolean | void;\r\n\r\n    protected render() {\r\n        return <section class=\"x-panel\">\r\n            <header class=\"x-panel-header\">\r\n                <h5></h5>\r\n            </header>\r\n            <div class=\"x-panel-body\"></div>\r\n        </section>;\r\n    }\r\n\r\n    /**\r\n     * 头部。\r\n     */\r\n    @bind(\".x-panel-header\") header: HTMLElement;\r\n\r\n    @bind(\".x-panel-body\") body: HTMLElement;\r\n\r\n    /**\r\n     * 标题。\r\n     */\r\n    @bind(\".x-panel-header h5\", \"innerHTML\") title: NodeLike;\r\n\r\n    /**\r\n     * 是否可折叠。\r\n     */\r\n    get collapsable() {\r\n        return dom.hasClass(this.elem, \"x-panel-collapsable\");\r\n    }\r\n    set collapsable(value) {\r\n        if (value !== this.collapsable) {\r\n            dom.toggleClass(this.elem, \"x-panel-collapsable\", value);\r\n            if (value) {\r\n                dom.on(this.header, \"click\", this.handleHeaderClick, this);\r\n            } else {\r\n                dom.off(this.header, \"click\", this.handleHeaderClick, this);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 处理标题点击事件。\r\n     */\r\n    protected handleHeaderClick() {\r\n        this.toggleCollapse();\r\n    }\r\n\r\n    /**\r\n     * 是否已折叠。\r\n     */\r\n    @bind(\"\", \"class\", \"x-panel-collapsed\") collapsed: boolean;\r\n\r\n    /**\r\n     * 切换面板的折叠状态。\r\n     * @param value 如果为 true 则强制折叠；如果为 false 则强制展开。\r\n     */\r\n    toggleCollapse(value = !this.collapsed) {\r\n        if (value !== this.collapsed && (!this.onCollapseChange || this.onCollapseChange(value, this) !== false)) {\r\n            dom.addClass(this.elem, \"x-panel-collapsing\");\r\n            this.collapsed = value;\r\n            dom.toggle(this.body, !value, \"height\", () => {\r\n                dom.removeClass(this.elem, \"x-panel-collapsing\");\r\n                if (value) {\r\n                    this.body.style.display = \"\";\r\n                }\r\n            }, this.duration);\r\n        }\r\n    }\r\n\r\n}\r\n"],"mappings":";;;;;;;;IAKA;;OAEG;IACH,WAA2B,SAAQ,iBAAO;QAU5B,MAAM;YACZ,MAAM,CAAC,oCAAS,KAAK,EAAC,SAAS;gBAC3B,mCAAQ,KAAK,EAAC,gBAAgB;oBAC1B,kCAAS,CACJ;gBACT,gCAAK,KAAK,EAAC,cAAc,GAAO,CAC1B,CAAC;QACf,CAAC;QAcD;;WAEG;QACH,IAAI,WAAW;YACX,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,qBAAqB,CAAC,CAAC;QAC1D,CAAC;QACD,IAAI,WAAW,CAAC,KAAK;YACjB,EAAE,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC7B,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,qBAAqB,EAAE,KAAK,CAAC,CAAC;gBACzD,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;oBACR,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE,OAAO,EAAE,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;gBAC/D,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACJ,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,OAAO,EAAE,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;gBAChE,CAAC;YACL,CAAC;QACL,CAAC;QAED;;WAEG;QACO,iBAAiB;YACvB,IAAI,CAAC,cAAc,EAAE,CAAC;QAC1B,CAAC;QAOD;;;WAGG;QACH,cAAc,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,SAAS;YAClC,EAAE,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,SAAS,IAAI,CAAC,CAAC,IAAI,CAAC,gBAAgB,IAAI,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC;gBACvG,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,oBAAoB,CAAC,CAAC;gBAC9C,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;gBACvB,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,KAAK,EAAE,QAAQ,EAAE;oBACpC,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,oBAAoB,CAAC,CAAC;oBACjD,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;wBACR,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC;oBACjC,CAAC;gBACL,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;YACtB,CAAC;QACL,CAAC;KAEJ;IAvD4B;QAAxB,cAAI,CAAC,iBAAiB,CAAC;yCAAqB;IAEtB;QAAtB,cAAI,CAAC,eAAe,CAAC;uCAAmB;IAKA;QAAxC,cAAI,CAAC,oBAAoB,EAAE,WAAW,CAAC;wCAAiB;IA6BjB;QAAvC,cAAI,CAAC,EAAE,EAAE,OAAO,EAAE,mBAAmB,CAAC;4CAAoB;IA1D/D,wBA6EC"}