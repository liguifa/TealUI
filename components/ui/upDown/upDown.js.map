{"version":3,"file":"upDown.js","sourceRoot":"../../..","sources":["components/ui/upDown/upDown.tsx"],"sourcesContent":["import { Control, VNode, bind } from \"control\";\r\nimport \"./upDown.scss\";\r\n\r\n/**\r\n * 表示一个调节器。\r\n */\r\nexport class UpDown extends Control {\r\n\r\n    /**\r\n     * 当被子类重写时负责渲染当前控件。\r\n     * @return 返回一个虚拟节点。\r\n     */\r\n    protected render() {\r\n        return <div class=\"x-updown\"></div>;\r\n    }\r\n\r\n}\r\n\r\nexport default UpDown;\r\n/**\r\n * @author xuld@vip.qq.com\r\n */\r\n\r\ntypeof include === \"function\" && include(\"../dom/keyNav\");\r\ntypeof include === \"function\" && include(\"../control/base\");\r\n\r\nvar UpDown = Control.extend({\r\n\r\n    changeSpeed: 90,\r\n\r\n    holdDuration: 600,\r\n\r\n    init: function (options) {\r\n        var me = this;\r\n        bindEvent('up', -1);\r\n        bindEvent('down', 1);\r\n\r\n        this.elem.keyNav({\r\n            up: function() {\r\n                me.onUpDown(-1);\r\n            },\r\n            down: function () {\r\n                me.onUpDown(1);\r\n            }\r\n        });\r\n\r\n        function bindEvent(d, delta) {\r\n            d = me.elem.querySelector('.x-updown-' + d);\r\n\r\n            d.onmousedown = function () {\r\n                me.onUpDown(delta);\r\n                if (me.timer)\r\n                    clearInterval(me.timer);\r\n                me.timer = setTimeout(function () {\r\n                    me.timer = setInterval(function () { me.onUpDown(delta); }, me.changeSpeed);\r\n                }, me.holdDuration);\r\n            };\r\n\r\n            d.onmouseout = d.onmouseup = function () {\r\n                clearTimeout(me.timer);\r\n                clearInterval(me.timer);\r\n                me.timer = 0;\r\n            };\r\n        }\r\n    },\r\n\r\n    onUpDown: function (delta) {}\r\n\r\n});\r\n"],"mappings":";;IAGA;;OAEG;IACH,YAAoB,SAAQ,iBAAO;QAE/B;;;WAGG;QACO,MAAM;YACZ,MAAM,CAAC,gCAAK,KAAK,EAAC,UAAU,GAAO,CAAC;QACxC,CAAC;KAEJ;IAVD,wBAUC;IAED,kBAAe,MAAM,CAAC;IACtB;;OAEG;IAEH,OAAO,OAAO,KAAK,UAAU,IAAI,OAAO,CAAC,eAAe,CAAC,CAAC;IAC1D,OAAO,OAAO,KAAK,UAAU,IAAI,OAAO,CAAC,iBAAiB,CAAC,CAAC;IAE5D,IAAI,MAAM,GAAG,iBAAO,CAAC,MAAM,CAAC;QAExB,WAAW,EAAE,EAAE;QAEf,YAAY,EAAE,GAAG;QAEjB,IAAI,EAAE,UAAU,OAAO;YACnB,IAAI,EAAE,GAAG,IAAI,CAAC;YACd,SAAS,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;YACpB,SAAS,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;YAErB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;gBACb,EAAE,EAAE;oBACA,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;gBACpB,CAAC;gBACD,IAAI,EAAE;oBACF,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBACnB,CAAC;aACJ,CAAC,CAAC;YAEH,mBAAmB,CAAC,EAAE,KAAK;gBACvB,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC;gBAE5C,CAAC,CAAC,WAAW,GAAG;oBACZ,EAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;oBACnB,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC;wBACT,aAAa,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;oBAC5B,EAAE,CAAC,KAAK,GAAG,UAAU,CAAC;wBAClB,EAAE,CAAC,KAAK,GAAG,WAAW,CAAC,cAAc,EAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,WAAW,CAAC,CAAC;oBAChF,CAAC,EAAE,EAAE,CAAC,YAAY,CAAC,CAAC;gBACxB,CAAC,CAAC;gBAEF,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,SAAS,GAAG;oBACzB,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;oBACvB,aAAa,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;oBACxB,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC;gBACjB,CAAC,CAAC;YACN,CAAC;QACL,CAAC;QAED,QAAQ,EAAE,UAAU,KAAK,IAAG,CAAC;KAEhC,CAAC,CAAC"}