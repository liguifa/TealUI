{"version":3,"file":"select.js","sourceRoot":"../../..","sources":["components/ui/select/select.tsx"],"sourcesContent":["import * as dom from \"ux/dom\";\r\nimport Control, { VNode, bind } from \"ui/control\";\r\nimport Picker from \"ui/picker\";\r\nimport ListBox, { ListItem } from \"ui/listBox\";\r\nimport { ComboBoxBase } from \"ui/comboBox\";\r\n\r\n/**\r\n * 表示一个选择框。\r\n */\r\nexport default class Select extends ComboBoxBase {\r\n\r\n    get readOnly() {\r\n        return this.input.readOnly && this.button.disabled;\r\n    }\r\n    set readOnly(value) {\r\n        this.button.disabled = this.input.readOnly = value;\r\n        dom.toggleClass(this.elem, \"x-picker-readonly\", value);\r\n    }\r\n\r\n    /**\r\n     * 是否允许用户输入。\r\n     */\r\n    get canInput() {\r\n        return !dom.hasClass(this.elem, \"x-picker-select\");\r\n    }\r\n    set canInput(value) {\r\n        dom.toggleClass(this.elem, \"x-picker-select\", !value);\r\n        this.input.readOnly = !value;\r\n    }\r\n\r\n    protected init() {\r\n        super.init();\r\n        dom.on(this.input, \"click\", this.dropDown.show, this.dropDown);\r\n    }\r\n\r\n    get value() {\r\n        const value = this.input.value;\r\n        const item = this.menu.findItemByContent(value);\r\n        if (item) {\r\n            return item.key;\r\n        }\r\n        return value;\r\n    }\r\n    set value(value) {\r\n        const item = this.menu.selectedItem = this.menu.findItemByKey(value);\r\n        if (item) {\r\n            value = item.content;\r\n        }\r\n        this.menu.value = value;\r\n    }\r\n\r\n    protected handleMenuSelect(item: ListItem, e: UIEvent) {\r\n        this.input.value = item.content;\r\n        this.dropDown.hide();\r\n        this.onChange && this.onChange(e, this);\r\n    }\r\n\r\n}\r\n"],"mappings":";;IAMA;;OAEG;IACH,YAA4B,SAAQ,uBAAY;QAE5C,IAAI,QAAQ;YACR,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC;QACvD,CAAC;QACD,IAAI,QAAQ,CAAC,KAAK;YACd,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC;YACnD,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,mBAAmB,EAAE,KAAK,CAAC,CAAC;QAC3D,CAAC;QAED;;WAEG;QACH,IAAI,QAAQ;YACR,MAAM,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,iBAAiB,CAAC,CAAC;QACvD,CAAC;QACD,IAAI,QAAQ,CAAC,KAAK;YACd,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,iBAAiB,EAAE,CAAC,KAAK,CAAC,CAAC;YACtD,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,CAAC,KAAK,CAAC;QACjC,CAAC;QAES,IAAI;YACV,KAAK,CAAC,IAAI,EAAE,CAAC;YACb,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,EAAE,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QACnE,CAAC;QAED,IAAI,KAAK;YACL,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;YAC/B,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;YAChD,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACP,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC;YACpB,CAAC;YACD,MAAM,CAAC,KAAK,CAAC;QACjB,CAAC;QACD,IAAI,KAAK,CAAC,KAAK;YACX,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YACrE,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACP,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC;YACzB,CAAC;YACD,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QAC5B,CAAC;QAES,gBAAgB,CAAC,IAAc,EAAE,CAAU;YACjD,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC;YAChC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;YACrB,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;QAC5C,CAAC;KAEJ;IAhDD,yBAgDC"}