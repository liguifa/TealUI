{"version":3,"file":"scrollToTop.js","sourceRoot":"../../..","sources":["components/ui/scrollToTop/scrollToTop.tsx"],"sourcesContent":["import { Control, VNode, bind } from \"control\";\r\nimport \"./scrollToTop.scss\";\r\n\r\n/**\r\n * 表示一个滚到顶部。\r\n */\r\nexport class ScrollToTop extends Control {\r\n\r\n    /**\r\n     * 当被子类重写时负责渲染当前控件。\r\n     * @return 返回一个虚拟节点。\r\n     */\r\n    protected render() {\r\n        return <div class=\"x-scrolltotop\"></div>;\r\n    }\r\n\r\n}\r\n\r\nexport default ScrollToTop;\r\n// #todo\r\n\r\n/**\r\n * @author xuld@vip.qq.com\r\n */\r\n\r\ntypeof include === \"function\" && include(\"../control/base\");\r\ntypeof include === \"function\" && include(\"../dom/animate\");\r\ntypeof include === \"function\" && include(\"../dom/scrollTo\");\r\ntypeof include === \"function\" && include(\"../dom/rect\");\r\n\r\nControl.extend({\r\n\r\n    role: \"scrollToTop\",\r\n\r\n    scrollDuration: 100,\r\n\r\n    minScroll: 130,\r\n    \r\n    init: function () {\r\n        var me = this;\r\n        window.addEventListener('scroll', function () {\r\n            var isHidden = me.dom.isHidden();\r\n            if (Dom(document).scroll().top > me.minScroll) {\r\n                isHidden && me.dom.show('opacity', null, me.duration);\r\n            } else {\r\n                !isHidden && me.dom.hide('opacity', null, me.duration);\r\n            }\r\n        }, false);\r\n        me.dom.on('click', function (e) {\r\n            e.preventDefault();\r\n            Dom(document).scrollTo(null, 0, me.scrollDuration);\r\n        });\r\n    }\r\n\r\n});\r\n"],"mappings":";;IAGA;;OAEG;IACH,iBAAyB,SAAQ,iBAAO;QAEpC;;;WAGG;QACO,MAAM;YACZ,MAAM,CAAC,gCAAK,KAAK,EAAC,eAAe,GAAO,CAAC;QAC7C,CAAC;KAEJ;IAVD,kCAUC;IAED,kBAAe,WAAW,CAAC;IAC3B,QAAQ;IAER;;OAEG;IAEH,OAAO,OAAO,KAAK,UAAU,IAAI,OAAO,CAAC,iBAAiB,CAAC,CAAC;IAC5D,OAAO,OAAO,KAAK,UAAU,IAAI,OAAO,CAAC,gBAAgB,CAAC,CAAC;IAC3D,OAAO,OAAO,KAAK,UAAU,IAAI,OAAO,CAAC,iBAAiB,CAAC,CAAC;IAC5D,OAAO,OAAO,KAAK,UAAU,IAAI,OAAO,CAAC,aAAa,CAAC,CAAC;IAExD,iBAAO,CAAC,MAAM,CAAC;QAEX,IAAI,EAAE,aAAa;QAEnB,cAAc,EAAE,GAAG;QAEnB,SAAS,EAAE,GAAG;QAEd,IAAI,EAAE;YACF,IAAI,EAAE,GAAG,IAAI,CAAC;YACd,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE;gBAC9B,IAAI,QAAQ,GAAG,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;gBACjC,EAAE,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;oBAC5C,QAAQ,IAAI,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,EAAE,EAAE,CAAC,QAAQ,CAAC,CAAC;gBAC1D,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACJ,CAAC,QAAQ,IAAI,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,EAAE,EAAE,CAAC,QAAQ,CAAC,CAAC;gBAC3D,CAAC;YACL,CAAC,EAAE,KAAK,CAAC,CAAC;YACV,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,OAAO,EAAE,UAAU,CAAC;gBAC1B,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,GAAG,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE,CAAC,cAAc,CAAC,CAAC;YACvD,CAAC,CAAC,CAAC;QACP,CAAC;KAEJ,CAAC,CAAC"}