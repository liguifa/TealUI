{"version":3,"file":"addToHomeScreen.js","sourceRoot":"../../..","sources":["components/ui/addToHomeScreen/addToHomeScreen.tsx"],"sourcesContent":["// #todo\r\n\r\n/**\r\n * @author xuld@vip.qq.com\r\n */\r\n\r\n/**\r\n * 对于 IOS/Android 用户，弹出添加到主屏幕的浮层。\r\n * @param {Object} [options] 可选的配置信息。\r\n * @remark\r\n * 请确保必须在 DomReady 中调用本函数。\r\n */\r\nfunction addToHomeScreen(options) {\r\n\r\n    // IE6-8: 不支持。\r\n    /*@cc_on if(!-\"\\v1\")return; @*/\r\n\r\n    typeof console === \"object\" && console.assert(document.body, \"addToHomeScreen(options): 必须在 DOM Ready 后才能调用此函数\");\r\n\r\n    // 排除一些浏览器。\r\n    var opt = {\r\n\r\n        // 是否强制显示浮层。\r\n        forceShow: true,\r\n\r\n        // 存储显示信息的本地存储键。\r\n        storageKey: 'TealUI_addToHomeScreen',\r\n\r\n        // 最小访问次数。如果用户实际访问次数小于指定值，则不显示提示。\r\n        minVisitCount: 0,\r\n\r\n        // 最多显示次数。\r\n        maxShowCount: 1,\r\n        \r\n        // 显示的天数有效期。在指定天数内不再重复显示。\r\n        period: 30,\r\n\r\n        // 指示当前提示框是否可关闭。\r\n        closable: true,\r\n\r\n        // 指示当前时间。\r\n        now: new Date,\r\n\r\n        // 显示的图标地址。如果为 true 则根据页面 meta 标签获取。\r\n        icon: true,\r\n\r\n        tpls: {\r\n            //ios: \"<div class=\"flight-shortcut flight-shortcut-iphone-safari\" onclick=\"$(this).hide()\" style=\"z-index:9999999\">                            <i class=\"flight-shortcut-close\">close</i>                            <i class=\"flight-shortcut-logo\">ctrip-logo</i>                            <p class=\"flight-shortcut-txt\">先点击<i class=\"flight-shortcut-iconios\"><em></em></i><br>再“添加到主屏幕”                            </p>                        </div>\"\r\n        }\r\n\r\n    }, key;\r\n\r\n    // 读取用户相关的配置项。\r\n    try {\r\n        // 在私有模式使用 localStorage 会引发异常。\r\n        // 读取错误数据引发异常。\r\n        opt.session = JSON.parse(localStorage.getItem(opt.storageKey));\r\n    } catch (e) {\r\n        opt.session = {\r\n\r\n            // 是否已添加到桌面图标。\r\n            added: false,\r\n\r\n            // 用户访问时间。\r\n            visitCount: 0,\r\n\r\n            // 浮层显示次数。\r\n            showCount: 0,\r\n\r\n            // 最后显示时间。\r\n            lastShowTime: 0\r\n        };\r\n\r\n    }\r\n\r\n    // 应用用户配置。\r\n    for (key in options) opt[key] = options[key];\r\n\r\n    function check(opt) {\r\n\r\n        var ua = navigator.userAgent,\r\n            hasToken = /[?&]standalone=true(&|$)/.test(document.location.search),\r\n            isIDevice = (/iphone|ipod|ipad/i).test(ua),\r\n            isMobileChrome = ua.indexOf('Android') > -1 && (/Chrome\\/[.0-9]*/).test(_ua) && _ua.indexOf(\"Version\") == -1,\r\n            isMobileIE = ua.indexOf('Windows Phone') > -1,\r\n           \r\n            _nav = window.navigator,\r\n            isMobileSafari = ath.isIDevice && _ua.indexOf('Safari') > -1 && _ua.indexOf('CriOS') < 0,\r\n            OS = ath.isIDevice ? 'ios' : ath.isMobileChrome ? 'android' : ath.isMobileIE ? 'windows' : 'unsupported',\r\n            OSVersion = _ua.match(/(OS|Android) (\\d+[_\\.]\\d+)/),\r\n            OSVersion = ath.OSVersion && ath.OSVersion[2] ? +ath.OSVersion[2].replace('_', '.') : 0,\r\n\r\n            isTablet = (isMobileSafari && ~ua.indexOf('iPad')) || (isMobileChrome && ua.indexOf('Mobile') < 0),\r\n\r\n            isAndriodUC = /UCBrowser/.test(ua) && /And(roid|\\b)/.test(ua),\r\n\r\n            isSupported = (isMobileSafari && OSVersion >= 6) || isMobileChrome || isAndriodUC;\r\n\r\n        // 1. 当前设备不支持添加到主屏幕。\r\n        if (!isSupported) return 10000;\r\n\r\n        // 2. 已添加过主屏幕。\r\n        if (opt.session.added) return 10000;\r\n\r\n        // 3. 当前从主屏幕打开。\r\n        if (navigator.standalone === true) {\r\n            opt.session.added = true;\r\n            return 1;\r\n        }\r\n\r\n        // 4. 当前网址包含来自主屏幕的标记。\r\n        // 如果第一次访问就包含标记，则认为是外链地址已包含标记，此时认为标记无效。\r\n        if (hasToken && opt.session.visitCount) {\r\n            opt.session.added = true;\r\n            return 1;\r\n        }\r\n\r\n        // 5. 用户访问次数不够。\r\n        if (++opt.session.visitorCount < opt.minVisitCount) return 1;\r\n\r\n        // 6. 显示次数太多。\r\n        if (++opt.session.showCount >= opt.maxShowCount) return 1;\r\n\r\n        // 7. 上次显示仍在有效期。\r\n        if (opt.now - opt.session.lastShowTime / 86400000 < opt.period) return 1;\r\n        opt.session.lastShowTime = +opt.now;\r\n\r\n        // 为网址添加来自主屏幕的标记。\r\n        if (!hasToken) history.replaceState('', document.title, document.location.href + (document.location.search ? '&' : '?') + 'standalone=true');\r\n\r\n        // 可以显示菜单。\r\n        return 0;\r\n    }\r\n\r\n    function show(opt) {\r\n\r\n        // message already on screen\r\n        if (opt.shown) {\r\n            opt.doLog(\"Add to homescreen: not displaying callout because already shown on screen\");\r\n            return;\r\n        }\r\n\r\n        var now = Date.now();\r\n        var lastDisplayTime = opt.session.lastDisplayTime;\r\n\r\n        opt.shown = true;\r\n\r\n        // try to get the highest resolution application icon\r\n        if (!opt.applicationIcon) {\r\n            if (ath.OS == 'ios') {\r\n                opt.applicationIcon = document.querySelector('head link[rel^=apple-touch-icon][sizes=\"152x152\"],head link[rel^=apple-touch-icon][sizes=\"144x144\"],head link[rel^=apple-touch-icon][sizes=\"120x120\"],head link[rel^=apple-touch-icon][sizes=\"114x114\"],head link[rel^=apple-touch-icon]');\r\n            } else {\r\n                opt.applicationIcon = document.querySelector('head link[rel^=\"shortcut icon\"][sizes=\"196x196\"],head link[rel^=apple-touch-icon]');\r\n            }\r\n        }\r\n\r\n        var message = '';\r\n\r\n        if (typeof opt.options.message == 'object' && ath.language in opt.options.message) {\t\t// use custom language message\r\n            message = opt.options.message[ath.language][ath.OS];\r\n        } else if (typeof opt.options.message == 'object' && ath.OS in opt.options.message) {\t\t// use custom os message\r\n            message = opt.options.message[ath.OS];\r\n        } else if (opt.options.message in ath.intl) {\t\t\t\t// you can force the locale\r\n            message = ath.intl[opt.options.message][ath.OS];\r\n        } else if (opt.options.message !== '') {\t\t\t\t\t\t// use a custom message\r\n            message = opt.options.message;\r\n        } else if (ath.OS in ath.intl[ath.language]) {\t\t\t\t// otherwise we use our message\r\n            message = ath.intl[ath.language][ath.OS];\r\n        }\r\n\r\n        // add the action icon\r\n        message = '<p>' + message.replace('%icon', '<span class=\"ath-action-icon\">icon</span>') + '</p>';\r\n\r\n        // create the message container\r\n        opt.viewport = document.createElement('div');\r\n        opt.viewport.className = 'ath-viewport';\r\n        if (opt.options.modal) {\r\n            opt.viewport.className += ' ath-modal';\r\n        }\r\n        if (opt.options.mandatory) {\r\n            opt.viewport.className += ' ath-mandatory';\r\n        }\r\n        opt.viewport.style.position = 'absolute';\r\n\r\n        // create the actual message element\r\n        opt.element = document.createElement('div');\r\n        opt.element.className = 'ath-container ath-' + ath.OS + ' ath-' + ath.OS + (ath.OSVersion + '').substr(0, 1) + ' ath-' + (ath.isTablet ? 'tablet' : 'phone');\r\n        opt.element.style.cssText = '-webkit-transition-property:-webkit-transform,opacity;-webkit-transition-duration:0s;-webkit-transition-timing-function:ease-out;transition-property:transform,opacity;transition-duration:0s;transition-timing-function:ease-out;';\r\n        opt.element.style.webkitTransform = 'translate3d(0,-' + window.innerHeight + 'px,0)';\r\n        opt.element.style.transform = 'translate3d(0,-' + window.innerHeight + 'px,0)';\r\n\r\n        // add the application icon\r\n        if (opt.options.icon && opt.applicationIcon) {\r\n            opt.element.className += ' ath-icon';\r\n            opt.img = document.createElement('img');\r\n            opt.img.className = 'ath-application-icon';\r\n            opt.img.addEventListener('load', this, false);\r\n            opt.img.addEventListener('error', this, false);\r\n\r\n            opt.img.src = opt.applicationIcon.href;\r\n            opt.element.appendChild(opt.img);\r\n        }\r\n\r\n        opt.element.innerHTML += message;\r\n\r\n        // we are not ready to show, place the message out of sight\r\n        opt.viewport.style.left = '-99999em';\r\n\r\n        // attach all elements to the DOM\r\n        opt.viewport.appendChild(opt.element);\r\n        opt.container.appendChild(opt.viewport);\r\n\r\n        // if we don't have to wait for an image to load, show the message right away\r\n        if (opt.img) {\r\n            opt.doLog(\"Add to homescreen: not displaying callout because waiting for img to load\");\r\n        } else {\r\n            opt._delayedShow();\r\n        }\r\n    }\r\n\r\n    opt.errorCode = check(opt);\r\n\r\n    // 保存用户状态。\r\n    if (opt.errorCode < 10) {\r\n        try {\r\n            localStorage.setItem(opt.storageKey, JSON.stringify(opt.session));\r\n        } catch (e) { }\r\n    }\r\n\r\n    // 检查当前网址是否包含来自网址复制。\r\n\r\n    if (!opt.errorCode || opt.forceShow) {\r\n\r\n    }\r\n    // message in all supported languages\r\n    ath.intl = {\r\n        zh_cn: {\r\n            ios: '如要把应用程序加至主屏幕,请点击%icon, 然后<strong>添加到主屏幕</strong>',\r\n            android: 'To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon <span class=\"ath-action-icon\">icon</span>.</small>',\r\n        }\r\n    };\r\n\r\n    // default options\r\n    ath.defaults = {\r\n        \r\n        fontSize: 15,\t\t\t\t// base font size, used to properly resize the popup based on viewport scale factor\r\n        \r\n        modal: false,\t\t\t\t// prevent further actions until the message is closed\r\n      \r\n        autostart: true,\t\t\t// show the message automatically\r\n        skipFirstVisit: false,\t\t// show only to returning visitors (ie: skip the first time you visit)\r\n        startDelay: 1,\t\t\t\t// display the message after that many seconds from page load\r\n        lifespan: 15,\t\t\t\t// life of the message in seconds\r\n        displayPace: 1440,\t\t\t// minutes before the message is shown again (0: display every time, default 24 hours)\r\n        maxDisplayCount: 0,\t\t\t// absolute maximum number of times the message will be shown to the user (0: no limit)\r\n        icon: true,\t\t\t\t\t// add touch icon to the message\r\n        message: '',\t\t\t\t// the message can be customized\r\n      \r\n    };\r\n\r\n    ath.Class.prototype = {\r\n\r\n        _delayedShow: function (e) {\r\n            setTimeout(opt._show.bind(this), opt.options.startDelay * 1000 + 500);\r\n        },\r\n\r\n        _show: function () {\r\n            var that = this;\r\n\r\n            // update the viewport size and orientation\r\n            opt.updateViewport();\r\n\r\n            // reposition/resize the message on orientation change\r\n            window.addEventListener('resize', this, false);\r\n            window.addEventListener('scroll', this, false);\r\n            window.addEventListener('orientationchange', this, false);\r\n\r\n            if (opt.options.modal) {\r\n                // lock any other interaction\r\n                document.addEventListener('touchmove', this, true);\r\n            }\r\n\r\n            // Enable closing after 1 second\r\n            if (!opt.options.mandatory) {\r\n                setTimeout(function () {\r\n                    that.element.addEventListener('click', that, true);\r\n                }, 1000);\r\n            }\r\n\r\n            // kick the animation\r\n            setTimeout(function () {\r\n                that.element.style.webkitTransitionDuration = '1.2s';\r\n                that.element.style.transitionDuration = '1.2s';\r\n                that.element.style.webkitTransform = 'translate3d(0,0,0)';\r\n                that.element.style.transform = 'translate3d(0,0,0)';\r\n            }, 0);\r\n\r\n            // set the destroy timer\r\n            if (opt.options.lifespan) {\r\n                opt.removeTimer = setTimeout(opt.remove.bind(this), opt.options.lifespan * 1000);\r\n            }\r\n\r\n            // fire the custom onShow event\r\n            if (opt.options.onShow) {\r\n                opt.options.onShow.call(this);\r\n            }\r\n        },\r\n\r\n        remove: function () {\r\n            clearTimeout(opt.removeTimer);\r\n\r\n            // clear up the event listeners\r\n            if (opt.img) {\r\n                opt.img.removeEventListener('load', this, false);\r\n                opt.img.removeEventListener('error', this, false);\r\n            }\r\n\r\n            window.removeEventListener('resize', this, false);\r\n            window.removeEventListener('scroll', this, false);\r\n            window.removeEventListener('orientationchange', this, false);\r\n            document.removeEventListener('touchmove', this, true);\r\n            opt.element.removeEventListener('click', this, true);\r\n\r\n            // remove the message element on transition end\r\n            opt.element.addEventListener('transitionend', this, false);\r\n            opt.element.addEventListener('webkitTransitionEnd', this, false);\r\n            opt.element.addEventListener('MSTransitionEnd', this, false);\r\n\r\n            // start the fade out animation\r\n            opt.element.style.webkitTransitionDuration = '0.3s';\r\n            opt.element.style.opacity = '0';\r\n        },\r\n\r\n        _removeElements: function () {\r\n            opt.element.removeEventListener('transitionend', this, false);\r\n            opt.element.removeEventListener('webkitTransitionEnd', this, false);\r\n            opt.element.removeEventListener('MSTransitionEnd', this, false);\r\n\r\n            // remove the message from the DOM\r\n            opt.container.removeChild(opt.viewport);\r\n\r\n            opt.shown = false;\r\n\r\n            // fire the custom onRemove event\r\n            if (opt.options.onRemove) {\r\n                opt.options.onRemove.call(this);\r\n            }\r\n        },\r\n\r\n        updateViewport: function () {\r\n            if (!opt.shown) {\r\n                return;\r\n            }\r\n\r\n            opt.viewport.style.width = window.innerWidth + 'px';\r\n            opt.viewport.style.height = window.innerHeight + 'px';\r\n            opt.viewport.style.left = window.scrollX + 'px';\r\n            opt.viewport.style.top = window.scrollY + 'px';\r\n\r\n            var clientWidth = document.documentElement.clientWidth;\r\n\r\n            opt.orientation = clientWidth > document.documentElement.clientHeight ? 'landscape' : 'portrait';\r\n\r\n            var screenWidth = ath.OS == 'ios' ? opt.orientation == 'portrait' ? screen.width : screen.height : screen.width;\r\n            opt.scale = screen.width > clientWidth ? 1 : screenWidth / window.innerWidth;\r\n\r\n            opt.element.style.fontSize = opt.options.fontSize / opt.scale + 'px';\r\n        },\r\n\r\n        resize: function () {\r\n            clearTimeout(opt.resizeTimer);\r\n            opt.resizeTimer = setTimeout(opt.updateViewport.bind(this), 100);\r\n        },\r\n\r\n        clearSession: function () {\r\n            opt.session = _defaultSession;\r\n            opt.updateSession();\r\n        },\r\n\r\n        getItem: function (item) {\r\n            try {\r\n                if (!localStorage) {\r\n                    throw new Error('localStorage is not defined');\r\n                }\r\n\r\n                return localStorage.getItem(item);\r\n            } catch (e) {\r\n                // Preventing exception for some browsers when fetching localStorage key\r\n                ath.hasLocalStorage = false;\r\n            }\r\n        },\r\n\r\n        clearDisplayCount: function () {\r\n            opt.session.displayCount = 0;\r\n            opt.updateSession();\r\n        },\r\n\r\n        _preventDefault: function (e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        }\r\n    };\r\n\r\n    // utility\r\n    function _extend(target, obj) {\r\n        for (var i in obj) {\r\n            target[i] = obj[i];\r\n        }\r\n\r\n        return target;\r\n    }\r\n\r\n}\r\n\r\n\r\n"],"mappings":"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"}