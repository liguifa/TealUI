<!DOCTYPE html>
<html class="doc">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>palette - TealUI | 打造小而全、精而美的开源组件库</title>
    <link rel="shortcut icon" href="../../../../assets/doc/images/favicon.ico">
    <link rel="stylesheet" href="../../../../assets/doc/doc.css">
    <script src="../../../../components/require.js"></script>
	<script>require(["ui/palette/old/palette"])</script>
</head>
<body>
    <header id="doc_header">
        <div class="doc-container">
            <h1 id="doc_logo">
                <a href="../../../../" title="Teal" id="doc_logo_image"><img src="../../../../assets/doc/images/logo.svg" alt="TealUI"></a>
                <a href="../../../../" id="doc_logo_title">TealUI</a>
                <div id="doc_version" class="doc-menubutton">
                    <a href="javascript://切换版本">4.0.0 <i class="doc-icon">⏷</i></a>
                    <menu>
                        <li><a href="http://tealui.com/v3.x/" target="_blank">3.x</a></li>
                        <li><a href="http://tealui.com/v2.x/" target="_blank">2.x</a></li>
                    </menu>
                </div>
            </h1>
            <nav id="doc_navbar">
                <ul>
                    <li><a href="../../../../docs" title="文档和规范">文档</a></li>
                    <li class="doc-navbar-active"><a href="../../../../components" title="组件和演示">组件</a></li>
                    <li><a href="../../../../tools" title="工具和资源">工具</a></li>
                </ul>
                <a href="https://github.com/Teal/TealUI" target="_blank" title="GitHub" id="doc_repository" class="doc-icon">😺</a>
                <a href="javascript:Doc.toggleSidebar()" title="菜单" id="doc_togglesidebar" class="doc-icon">≡</a>
            </nav>
        </div>
    </header>
    <div id="doc_body" class="doc-container">
        <aside id="doc_sidebar">
            <div id="doc_sidebar_header">
                <input type="search" placeholder="查找组件..." autocomplete="off" id="doc_sidebar_filter">
            </div>
            <ul id="doc_sidebar_menu">
                <li class="doc-tip"><i class="doc-icon doc-spin">҉</i> 正在载入列表...</li>
            </ul>
        </aside>
        <article id="doc_main" class="doc">
<aside id="doc_mainmenu" class="doc-menubutton">
                            <a href="javascript://打开工具" title="工具" class="doc-icon">🔧⏷</a>
                            <menu>
                                
                                <li><a href="javascript:Doc.toggleFullScreen()" accesskey="f"><i class="doc-icon">✥</i>全屏显示</a></li>
                                
                                <li><a href="javascript:Doc.toggleApis()" accesskey="a"><i class="doc-icon">≡</i>展开 API</a></li>
                                <li class="doc-menu-divider"><a href="https://github.com/Teal/TealUI/tree/master/components/ui/palette/old/palette.ts" target="_blank"><i class="doc-icon">😺</i>查看源码</a></li>
                                <li><a href="https://github.com/Teal/TealUI/issues/new?title=ui/palette/old/palette" target="_blank"><i class="doc-icon">🐛</i>报告 BUG</a></li>
                                <li><a href="https://github.com/Teal/TealUI/edit/master/components/ui/palette/old/palette.md" target="_blank"><i class="doc-icon">✍</i>编辑此页</a></li>
                            </menu>
                        </aside>
                        <aside class="doc-demo">
<div class="x-palette">
<div class="x-palette-alpha">透明度： 100%</div>
<div class="x-palette-footer"><span class="x-palette-history"></span><span class="x-palette-history"></span><span class="x-palette-history"></span><span class="x-palette-history"></span><span class="x-palette-history"></span><span class="x-palette-history"></span><span class="x-palette-history"></span><span class="x-palette-history"></span><span class="x-palette-history"></span><span class="x-palette-history"></span><span class="x-palette-history"></span></div>
</div>
</aside>
                        <h2 id="api"><a href="#api" title="链接" aria-hidden="true" class="doc-icon doc-permalink">☍</a>API</h2><div class="doc doc-scrollable"><table class="doc-api"><tr>
                                <th class="doc-api-property">变量</th>
                                <th class="doc-api-type">类型</th>
                                <th class="doc-api-summary">描述</th>
                                
                            </tr><tr id="api/Palette">
                            <td>
                                <a href="https://github.com/Teal/TealUI/tree/master/components/ui/palette/old/palette.ts#L8-350" target="_blank" title="源码：ui/palette/old/palette.ts，第 8 行" aria-hidden="true" class="doc-icon doc-sourcelink doc-api-more">⅏</a>
                                <a href="javascript://详细信息" title="展开/折叠详细信息" class="doc-icon doc-api-toggle" onclick="Doc.toggleApi(this)">⮞</a>
                                <code>Palette</code>
                                <span class="doc-api-more">: <code>any</code> = <code>Control.extend({

    /**
     * 当用户点击某一项时执行。
     * @param {Dom} item 正在被点击的项。
     * @protected virtual
     */
    onItemClick: function (item) {

        // 如果此项是允许点击的。则生成新的日期对象，并设置为当前值。
        if (!item.hasClass('x-monthcalender-disabled')) {
            this.selectItem(item);
        }

        return false;
    },

    /**
     * 模拟用户选中某一项。
     * @param {Dom} item 需要选中的项。
     */
    selectItem: function (item) {

        // 根据 item 取得 value 。
        var value = new Date(this.displayedValue.getFullYear(), this.displayedValue.getMonth(), parseInt(item.getText()));

        // 如果允许选中。
        if (this.trigger('selecting', value)) {

            // 获取原值。
            var oldValue = this.getValue();

            // 设置值。
            this.setValue(value);

            // 检测值是否改变。
            if (value - oldValue &gt; 0) {
                this.trigger('change');
            }

        }

        return this;

    },

    /**
     * 设置当前日历的值。
     * @param {Date} value 要设置的值。
     */
    setValue: function (value) {

        // 设置值。
        this.value = value;


        if (this._isPopup) {
            this.element.val(c)
                .next().attr('style', 'background-color:' + c);
        } else {
            this._setColorInd(c, 1);
        }
        if (this.options.history &amp;&amp; this._paletteIdx &gt; 0) {
            this._add2History(c);
        }
        this.element.trigger('change.color', c);

        return this;
    },

    /**
     * 获取当前日历的值。
     */
    getValue: function (fn) {
        return this.value;
    },

    /**
     * 切换当前显示的界面。
     */
    setView: function (view) {
        
    },

    _create: function () {
        this._paletteIdx = 1;
        this._id = 'evo-cp' + _idx++;
        this._enabled = true;
        var that = this;
        switch (this.element.get(0).tagName) {
            case 'INPUT':
                var color = this.options.color,
                    e = this.element;
                this._isPopup = true;
                this._palette = null;
                if (color != null) {
                    e.val(color);
                } else {
                    var v = e.val();
                    if (v != '') {
                        color = this.options.color = v;
                    }
                }
                e.addClass('colorPicker ' + this._id)
                    .wrap('&lt;div style=&quot;width:' + (this.element.width() + 32) + 'px;'
                        + (isIE ? 'margin-bottom:-21px;' : '')
                        + ($.browser.mozilla ? 'padding:1px 0;' : '')
                        + '&quot;&gt;&lt;/div&gt;')
                    .after('&lt;div class=&quot;evo-colorind' + ($.browser.mozilla ? '-ff' : _ie) + '&quot; ' +
                        (color != null ? 'style=&quot;background-color:' + color + '&quot;' : '') + '&gt;&lt;/div&gt;')
                    .on('keyup onpaste', function (evt) {
                        var c = $(this).val();
                        if (c != that.options.color) {
                            that._setValue(c, true);
                        }
                    });
                var showOn = this.options.showOn;
                if (showOn == 'both' || showOn == 'focus') {
                    e.on('focus', function () {
                        that.showPalette();
                    })
                }
                if (showOn == 'both' || showOn == 'button') {
                    e.next().on('click', function (evt) {
                        evt.stopPropagation();
                        that.showPalette();
                    });
                }
                break;
            default:
                this._isPopup = false;
                this._palette = this.element.html(this._paletteHTML())
                    .attr('aria-haspopup', 'true');
                this._bindColors();
        }
        if (color != null &amp;&amp; this.options.history) {
            this._add2History(color);
        }
    },

    _paletteHTML: function () {
        var h = [], pIdx = this._paletteIdx = Math.abs(this._paletteIdx),
            opts = this.options,
            labels = opts.strings.split(',');
        h.push('&lt;div class=&quot;evo-pop', _ie, ' x-widget x-widget-content x-corner-all&quot;',
            this._isPopup ? ' style=&quot;position:absolute&quot;' : '', '&gt;');
        h.push('&lt;span&gt;', this['_paletteHTML' + pIdx](), '&lt;/span&gt;');
        h.push('&lt;div class=&quot;evo-more&quot;&gt;&lt;a href=&quot;javascript:void(0)&quot;&gt;', labels[1 + pIdx], '&lt;/a&gt;');
        if (opts.history) {
            h.push('&lt;a href=&quot;javascript:void(0)&quot; class=&quot;evo-hist&quot;&gt;', labels[5], '&lt;/a&gt;');
        }
        h.push('&lt;/div&gt;');
        h.push(this._colorIndHTML(this.options.color, 'left'), this._colorIndHTML('', 'right'));
        h.push('&lt;/div&gt;');
        return h.join('');
    },

    _colorIndHTML: function (c, fl) {
        var h = [];
        h.push('&lt;div class=&quot;evo-color&quot; style=&quot;float:left&quot;&gt;&lt;div style=&quot;');
        h.push(c ? 'background-color:' + c : 'display:none');
        if (isIE) {
            h.push('&quot; class=&quot;evo-colorboui-ie&quot;&gt;&lt;/div&gt;&lt;span class=&quot;.evo-colortxt-ie&quot; ');
        } else {
            h.push('&quot;&gt;&lt;/div&gt;&lt;span ');
        }
        h.push(c ? '&gt;' + c + '&lt;/span&gt;' : '/&gt;');
        h.push('&lt;/div&gt;');
        return h.join('');
    },

    _paletteHTML1: function () {
        var h = [], labels = this.options.strings.split(','),
            oTD = '&lt;td style=&quot;background-color:#',
            cTD = isIE ? '&quot;&gt;&lt;div style=&quot;width:2px;&quot;&gt;&lt;/div&gt;&lt;/td&gt;' : '&quot;&gt;&lt;span/&gt;&lt;/td&gt;',
            oTRTH = '&lt;tr&gt;&lt;th colspan=&quot;10&quot; class=&quot;x-widget-content&quot;&gt;';
        // base theme colors
        h.push('&lt;table class=&quot;evo-palette', _ie, '&quot;&gt;', oTRTH, labels[0], '&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;');
        for (var i = 0; i &lt; 10; i++) {
            h.push(oTD, baseThemeColors[i], cTD);
        }
        h.push('&lt;/tr&gt;');
        if (!isIE) {
            h.push('&lt;tr&gt;&lt;th colspan=&quot;10&quot;&gt;&lt;/th&gt;&lt;/tr&gt;');
        }
        h.push('&lt;tr class=&quot;top&quot;&gt;');
        // theme colors
        for (var i = 0; i &lt; 10; i++) {
            h.push(oTD, subThemeColors[i], cTD);
        }
        for (var r = 1; r &lt; 4; r++) {
            h.push('&lt;/tr&gt;&lt;tr class=&quot;in&quot;&gt;');
            for (var i = 0; i &lt; 10; i++) {
                h.push(oTD, subThemeColors[r * 10 + i], cTD);
            }
        }
        h.push('&lt;/tr&gt;&lt;tr class=&quot;bottom&quot;&gt;');
        for (var i = 40; i &lt; 50; i++) {
            h.push(oTD, subThemeColors[i], cTD);
        }
        h.push('&lt;/tr&gt;', oTRTH, labels[1], '&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;');
        // standard colors
        for (var i = 0; i &lt; 10; i++) {
            h.push(oTD, standardColors[i], cTD);
        }
        h.push('&lt;/tr&gt;&lt;/table&gt;');
        return h.join('');
    },

    _paletteHTML2: function () {
        function toHex(i) {
            var h = i.toString(16);
            if (h.length == 1) {
                h = '0' + h;
            }
            return h + h + h;
        };
        var h = [],
            oTD = '&lt;td style=&quot;background-color:#',
            cTD = isIE ? '&quot;&gt;&lt;div style=&quot;width:5px;&quot;&gt;&lt;/div&gt;&lt;/td&gt;' : '&quot;&gt;&lt;span/&gt;&lt;/td&gt;',
            oTableTR = '&lt;table class=&quot;evo-palette2' + _ie + '&quot;&gt;&lt;tr&gt;',
            cTableTR = '&lt;/tr&gt;&lt;/table&gt;';
        h.push('&lt;div class=&quot;evo-palcenter&quot;&gt;');
        // hexagon colors
        for (var r = 0, rMax = moreColors.length; r &lt; rMax; r++) {
            h.push(oTableTR);
            var cs = moreColors[r];
            for (var i = 0, iMax = cs.length; i &lt; iMax; i++) {
                h.push(oTD, cs[i], cTD);
            }
            h.push(cTableTR);
        }
        h.push('&lt;div class=&quot;evo-sep&quot;/&gt;');
        // gray scale colors
        var h2 = [];
        h.push(oTableTR);
        for (var i = 255; i &gt; 10; i -= 10) {
            h.push(oTD, toHex(i), cTD);
            i -= 10;
            h2.push(oTD, toHex(i), cTD);
        }
        h.push(cTableTR, oTableTR, h2.join(''), cTableTR);
        h.push('&lt;/div&gt;');
        return h.join('');
    },

    _switchPalette: function (link) {
        if (this._enabled) {
            var labels = this.options.strings.split(',');
            if ($(link).hasClass('evo-hist')) {
                // history
                var h = ['&lt;table class=&quot;evo-palette&quot;&gt;&lt;tr&gt;&lt;th class=&quot;x-widget-content&quot;&gt;',
                    labels[5], '&lt;/th&gt;&lt;/tr&gt;&lt;/tr&gt;&lt;/table&gt;',
                    '&lt;div class=&quot;evo-cHist&quot;&gt;'];
                if (history.length == 0) {
                    h.push('&lt;p&gt;&amp;nbsp;', labels[6], '&lt;/p&gt;');
                } else {
                    for (var i = history.length - 1; i &gt; -1; i--) {
                        h.push('&lt;div style=&quot;background-color:', history[i], '&quot;&gt;&lt;/div&gt;');
                    }
                }
                h.push('&lt;/div&gt;');
                var idx = -this._paletteIdx,
                    content = h.join(''),
                    label = labels[4];
            } else {
                // palette
                if (this._paletteIdx &lt; 0) {
                    var idx = -this._paletteIdx;
                    this._palette.find('.evo-hist').show();
                } else {
                    var idx = (this._paletteIdx == 2) ? 1 : 2;
                }
                var content = this['_paletteHTML' + idx](),
                    label = labels[idx + 1];
                this._paletteIdx = idx;

            }
            this._paletteIdx = idx;
            var e = this._palette.find('.evo-more')
                .prev().html(content).end()
                .children().eq(0).html(label);
            if (idx &lt; 0) {
                e.next().hide();
            }
        }
    },

    _bindColors: function () {
        var es = this._palette.find('div.evo-color'),
            sel = this.options.history ? 'td,.evo-cHist div' : 'td';
        this._cTxt1 = es.eq(0).children().eq(0);
        this._cTxt2 = es.eq(1).children().eq(0);
        var that = this;
        this._palette
            .on('click', sel, function (evt) {
                if (that._enabled) {
                    that._setValue($(this).attr('style').substring(17));
                }
            })
            .on('mouseover', sel, function (evt) {
                if (that._enabled) {
                    var c = $(this).attr('style').substring(17);
                    that._setColorInd(c, 2);
                    that.element.trigger('mouseover.color', c);
                }
            })
            .find('.evo-more a').on('click', function () {
                that._switchPalette(this);
            });
    },

    _setColorInd: function (c, idx) {
        this['_cTxt' + idx].attr('style', 'background-color:' + c)
            .next().html(c);
    },

    _setOption: function (key, value) {
        if (key == 'color') {
            this._setValue(value, true);
        } else {
            this.options[key] = value;
        }
    },

    _add2History: function (c) {
        var iMax = history.length;
        // skip color if already in history
        for (var i = 0; i &lt; iMax; i++) {
            if (c == history[i]) {
                return;
            }
        }
        // limit of 28 colors in history
        if (iMax &gt; 27) {
            history.shift();
        }
        // add to history
        history.push(c);

    }

})</code></span>
                                <div class="doc doc-api-detail">
                                    
                                    
                                </div>
                            </td>
                            <td>
                                <code>any</code>
                            </td>
                            <td class="doc">
                                
                            </td>
                            
                        </tr></table></div>
                        
</article>
    </div>
    <footer id="doc_footer">
        <div class="doc-container">
            <div id="doc_footer_links">
                <a href="https://github.com/Teal/TealUI/issues" target="_blank">反馈建议</a> |
                <a href="../../../../docs/about/contributing.html">贡献指南</a> |
                <a href="https://gitter.im/Teal/TealUI" target="_blank">在线讨论</a>
            </div>
            &copy; 2011-2017 The Teal Team. All Rights Reserved.
        </div>
    </footer>
    <script src="../../../../assets/doc/doc.js"></script>
    <script>
        Doc.init({"root":"../../../..","dir":"components","active":"ui/palette/old/palette.html","imports":["ui/palette/old/palette"]})
    </script>
    <script src="../../../../components/index.js"></script>
    <script>!location.port && /^http/.test(location.protocol) && (document.body.appendChild(document.createElement("script")).src = "//hm.baidu.com/hm.js?9a3cb18d91be19c36c5f9725822b64e8")</script>
</body>
</html>