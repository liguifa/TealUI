{"version":3,"file":"checkBox.js","sourceRoot":"../../..","sources":["components/ui/checkBox/checkBox.tsx"],"sourcesContent":["import * as dom from \"ux/dom\";\r\nimport Control, { VNode, bind } from \"ui/control\";\r\nimport Input from \"ui/input\";\r\nimport \"typo/icon/icon.scss\";\r\nimport \"./checkBox.scss\";\r\n\r\n/**\r\n * 表示一个复选框组基类。\r\n */\r\nexport abstract class CheckBoxBase extends Input {\r\n\r\n    @bind(\"\") body: HTMLElement;\r\n\r\n    /**\r\n     * 是否选中。\r\n     */\r\n    get value() { return this.input.checked; }\r\n    set value(value) {\r\n        this.input.checked = value;\r\n        if (this.defaultValue === undefined) {\r\n            this.defaultValue = value;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 单选按钮的键。\r\n     */\r\n    @bind(\"@input\", \"value\") key: string;\r\n\r\n}\r\n\r\n/**\r\n * 表示一个复选框。\r\n */\r\nexport default class CheckBox extends CheckBoxBase {\r\n\r\n    protected render() {\r\n        return <label class=\"x-checkbox\">\r\n            <input type=\"checkbox\" class=\"x-checkbox-button\" __control__={this as any} />\r\n            <i class=\"x-icon\">☐</i>\r\n            <i class=\"x-icon\">☑</i>\r\n            &nbsp;\r\n        </label>;\r\n    }\r\n\r\n    /**\r\n     * 第三状态图标。\r\n     */\r\n    threeStateIcon: string;\r\n\r\n    /**\r\n     * 是否启用第三状态。\r\n     */\r\n    get threeState() {\r\n        return (this.find(\".x-icon\") as HTMLElement).innerHTML === this.threeStateIcon;\r\n    }\r\n    set threeState(value) {\r\n        const icon = this.find(\".x-icon\") as HTMLElement;\r\n        if (value) {\r\n            this.value = false;\r\n            (icon as any)._innerHTML = icon.innerHTML;\r\n            icon.innerHTML = this.threeStateIcon;\r\n            dom.on(this.input!, \"change\", this.offThreeState, this);\r\n        } else {\r\n            icon.innerHTML = (icon as any)._innerHTML;\r\n            dom.off(this.input!, \"change\", this.offThreeState, this);\r\n        }\r\n    }\r\n\r\n    private offThreeState() {\r\n        this.threeState = false;\r\n    }\r\n\r\n}\r\n\r\nCheckBox.prototype.threeStateIcon = \"⊞\";\r\n"],"mappings":";;;;;;;;IAMA;;OAEG;IACH,kBAAmC,SAAQ,eAAK;QAI5C;;WAEG;QACH,IAAI,KAAK,KAAK,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;QAC1C,IAAI,KAAK,CAAC,KAAK;YACX,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC;YAC3B,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,KAAK,SAAS,CAAC,CAAC,CAAC;gBAClC,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;YAC9B,CAAC;QACL,CAAC;KAOJ;IAlBa;QAAT,cAAI,CAAC,EAAE,CAAC;8CAAmB;IAgBH;QAAxB,cAAI,CAAC,QAAQ,EAAE,OAAO,CAAC;6CAAa;IAlBzC,oCAoBC;IAED;;OAEG;IACH,cAA8B,SAAQ,YAAY;QAEpC,MAAM;YACZ,MAAM,CAAC,kCAAO,KAAK,EAAC,YAAY;gBAC5B,kCAAO,IAAI,EAAC,UAAU,EAAC,KAAK,EAAC,mBAAmB,EAAC,WAAW,EAAE,IAAW,GAAI;gBAC7E,8BAAG,KAAK,EAAC,QAAQ,aAAM;gBACvB,8BAAG,KAAK,EAAC,QAAQ,aAAM;yBAEnB,CAAC;QACb,CAAC;QAOD;;WAEG;QACH,IAAI,UAAU;YACV,MAAM,CAAE,IAAI,CAAC,IAAI,CAAC,SAAS,CAAiB,CAAC,SAAS,KAAK,IAAI,CAAC,cAAc,CAAC;QACnF,CAAC;QACD,IAAI,UAAU,CAAC,KAAK;YAChB,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAgB,CAAC;YACjD,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBACR,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;gBAClB,IAAY,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC;gBAC1C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC;gBACrC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,KAAM,EAAE,QAAQ,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;YAC5D,CAAC;YAAC,IAAI,CAAC,CAAC;gBACJ,IAAI,CAAC,SAAS,GAAI,IAAY,CAAC,UAAU,CAAC;gBAC1C,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,KAAM,EAAE,QAAQ,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;YAC7D,CAAC;QACL,CAAC;QAEO,aAAa;YACjB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QAC5B,CAAC;KAEJ;IAvCD,2BAuCC;IAED,QAAQ,CAAC,SAAS,CAAC,cAAc,GAAG,GAAG,CAAC"}