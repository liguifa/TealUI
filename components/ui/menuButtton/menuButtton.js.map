{"version":3,"file":"menuButtton.js","sourceRoot":"../../..","sources":["components/ui/menuButtton/menuButtton.tsx"],"sourcesContent":["import { Control, VNode, bind } from \"control\";\r\nimport \"./menuButtton.scss\";\r\n\r\n/**\r\n * 表示一个菜单按钮。\r\n */\r\nexport class MenuButtton extends Control {\r\n\r\n    /**\r\n     * 当被子类重写时负责渲染当前控件。\r\n     * @return 返回一个虚拟节点。\r\n     */\r\n    protected render() {\r\n        return <div class=\"x-menubuttton\"></div>;\r\n    }\r\n\r\n}\r\n\r\nexport default MenuButtton;\r\n/**\r\n * @author  xuld\r\n */\r\n\r\n/**\r\n * @author  xuld\r\n */\r\n\r\ntypeof include === \"function\" && include(\"../control/base\");\r\ntypeof include === \"function\" && include(\"../control/dropDown\");\r\n\r\nvar MenuButton = Control.extend({\r\n\r\n    role: \"menuButton\",\r\n\r\n    init: function () {\r\n        var me = this;\r\n        me.dropDown = (Dom(me.menu).valueOf() || me.dom.next('.x-popover, .x-dropdownmenu')).role('popover', {\r\n            target: me.dom\r\n        }).on('show', function() {\r\n            me.dom.addClass('x-button-active');\r\n        }).on('hide', function () {\r\n            me.dom.removeClass('x-button-active');\r\n        });\r\n    }\r\n\r\n});\r\n\r\n\r\nusing(\"Controls.Core.IDropDownOwner\");\r\nusing(\"Controls.Button.Button\");\r\nusing(\"Controls.Button.Menu\");\r\n\r\n\r\n\r\nvar MenuButton = Button.extend(IDropDownOwner).implement({\r\n\t\r\n\txtype: 'menubutton',\r\n\t\r\n\ttpl: '<button class=\"x-button x-control\" type=\"button\">&nbsp;<span class=\"x-button-menu\"></span></button>',\r\n\t\r\n\tcontent: function(){\r\n\t\treturn this.find('.x-button-menu').prev(true);\r\n\t},\r\n\t\r\n\tcreateDropDown: function(existDom){\r\n\t\tif(existDom && !existDom.hasClass('x-menu')){\r\n\t\t\treturn existDom;\r\n\t\t}\r\n\t\treturn new Menu(existDom).on('click', this.onDropDownClick, this);\r\n\t},\r\n\t\r\n\tinit: function () {\r\n\t\tvar next = this.next();\r\n\t\tthis.setDropDown(this.createDropDown(next && next.hasClass('x-dropdown') ? next : null));\r\n\t\tthis.on('click', this.toggleDropDown, this);\r\n\t},\r\n\t\r\n\tonDropDownShow: function(){\r\n\t\tthis.actived(true);\r\n\t\treturn IDropDownOwner.onDropDownShow.apply(this, arguments);\r\n\t},\r\n\t\r\n\tonDropDownHide: function(){\r\n\t\tthis.actived(false);\r\n\t\treturn IDropDownOwner.onDropDownHide.apply(this, arguments);\r\n\t},\r\n\t\r\n\tonDropDownClick: function(){\r\n\t\tthis.hideDropDown();\r\n\t}\r\n\t\r\n});\r\n\r\nListControl.aliasMethods(MenuButton, 'dropDown');\r\n"],"mappings":"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"}