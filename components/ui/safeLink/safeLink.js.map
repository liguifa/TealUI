{"version":3,"file":"safeLink.js","sourceRoot":"../../..","sources":["components/ui/safeLink/safeLink.tsx"],"sourcesContent":["import { Control, VNode, bind } from \"control\";\r\nimport \"./safeLink.scss\";\r\n\r\n/**\r\n * 表示一个安全按钮。\r\n */\r\nexport class SafeLink extends Control {\r\n\r\n    /**\r\n     * 当被子类重写时负责渲染当前控件。\r\n     * @return 返回一个虚拟节点。\r\n     */\r\n    protected render() {\r\n        return <div class=\"x-safelink\"></div>;\r\n    }\r\n\r\n}\r\n\r\nexport default SafeLink;\r\n/**\r\n * @author \r\n */\r\n\r\nimports(\"Controls.Button.SafeAnchor\");\r\n\r\n\r\n\r\n\r\nvar SafeAnthor = Control.extend({\r\n\r\n\ttpl: '<div class=\"x-safeanchor\">\\\r\n\t\t<div class=\"x-safeanchor-header\">\\\r\n\t\t\t<a href=\"#\" class=\"x-safeanchor-link\">继续访问</a>\\\r\n\t\t\t<a href=\"javascript:;\" class=\"x-safeanchor-cancel\">取消</a>\\\r\n\t\t</div>\\\r\n\t\t<div class=\"x-safeanchor-body\">\\\r\n\t\t\t<div class=\"x-safeanchor-content\">\\\r\n\t\t\t\t 该链接已超出本站范围，可能有一定风险。     原网址为：<span class=\"x-safeanchor-text\"></span>\\\r\n\t\t\t</div>\\\r\n\t\t</div>\\\r\n\t</div>',\r\n\t\r\n\tsetHref: function(href, target){\r\n\t\tthis.find('.x-safeanchor-link').node.href = href;\r\n\t\tthis.find('.x-safeanchor-link').node.target = target;\r\n\t\tthis.find('.x-safeanchor-text').setText(href);\r\n\t\tthis.on('click', this.close, this);\r\n\t\t\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\tshowBy: function(elem){\r\n\t\telem = Dom.get(elem)\r\n\t\tthis.appendTo();\r\n\t\tvar pos = elem.getPosition();\r\n\t\tpos.y += elem.getSize().y;\r\n\t\tpos.x -= 10;\r\n\t\tpos.y += 10;\r\n\t\tthis.setPosition(pos);\r\n\t},\r\n\t\r\n\tclose: function(){\r\n\t\tthis.remove();\r\n\t}\r\n\r\n\r\n\r\n});\r\n\r\n\r\n// #todo\r\n\r\n/**\r\n * @author \r\n */\r\n\r\ntypeof include === \"function\" && include(\"ui/button/safeanchor.css\");\r\n\r\n\r\n\r\n\r\nvar SafeAnthor = Control.extend({\r\n\r\n\ttpl: '<div class=\"x-safeanchor\">\\\r\n\t\t<div class=\"x-safeanchor-header\">\\\r\n\t\t\t<a href=\"#\" class=\"x-safeanchor-link\">继续访问</a>\\\r\n\t\t\t<a href=\"javascript:;\" class=\"x-safeanchor-cancel\">取消</a>\\\r\n\t\t</div>\\\r\n\t\t<div class=\"x-safeanchor-body\">\\\r\n\t\t\t<div class=\"x-safeanchor-content\">\\\r\n\t\t\t\t 该链接已超出本站范围，可能有一定风险。     原网址为：<span class=\"x-safeanchor-text\"></span>\\\r\n\t\t\t</div>\\\r\n\t\t</div>\\\r\n\t</div>',\r\n\t\r\n\tsetHref: function(href, target){\r\n\t\tthis.find('.x-safeanchor-link').node.href = href;\r\n\t\tthis.find('.x-safeanchor-link').node.target = target;\r\n\t\tthis.find('.x-safeanchor-text').setText(href);\r\n\t\tthis.on('click', this.close, this);\r\n\t\t\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\tshowBy: function(elem){\r\n\t\telem = Dom.get(elem)\r\n\t\tthis.appendTo();\r\n\t\tvar pos = elem.getPosition();\r\n\t\tpos.y += elem.getSize().y;\r\n\t\tpos.x -= 10;\r\n\t\tpos.y += 10;\r\n\t\tthis.setPosition(pos);\r\n\t},\r\n\t\r\n\tclose: function(){\r\n\t\tthis.remove();\r\n\t}\r\n\r\n\r\n\r\n});\r\n\r\n\r\n\r\n// \r\n// Dom.ready(function(){\r\n// \t\r\n\t// document.on('click', function(e){\r\n\t\t// var t = e.getTarget();\r\n\t\t// if(t.hasClass('h-link')){\r\n\t\t\t// new SafeAnthor().setHref(t.node.href, t.node.target).showBy(t);\r\n\t\t\t// e.stop();\r\n\t\t// }\r\n\t// });\r\n// \t\r\n// \t\r\n// \r\n// });\r\n// \r\n// Dom.ready(function(){\r\n// \t\r\n\t// document.on('click', function(e){\r\n\t\t// var t = e.getTarget();\r\n\t\t// if(t.hasClass('h-link')){\r\n\t\t\t// new SafeAnthor().setHref(t.node.href, t.node.target).showBy(t);\r\n\t\t\t// e.stop();\r\n\t\t// }\r\n\t// });\r\n// \t\r\n// \t\r\n// \r\n// });"],"mappings":";;IAGA;;OAEG;IACH,cAAsB,SAAQ,iBAAO;QAEjC;;;WAGG;QACO,MAAM;YACZ,MAAM,CAAC,gCAAK,KAAK,EAAC,YAAY,GAAO,CAAC;QAC1C,CAAC;KAEJ;IAVD,4BAUC;IAED,kBAAe,QAAQ,CAAC;IACxB;;OAEG;IAEH,OAAO,CAAC,4BAA4B,CAAC,CAAC;IAKtC,IAAI,UAAU,GAAG,iBAAO,CAAC,MAAM,CAAC;QAE/B,GAAG,EAAE;;;;;;;;;;QAUE;QAEP,OAAO,EAAE,UAAS,IAAI,EAAE,MAAM;YAC7B,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACjD,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrD,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YAC9C,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;YAEnC,MAAM,CAAC,IAAI,CAAC;QACb,CAAC;QAED,MAAM,EAAE,UAAS,IAAI;YACpB,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;YACpB,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;YAC7B,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;YAC1B,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;YACZ,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;YACZ,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QACvB,CAAC;QAED,KAAK,EAAE;YACN,IAAI,CAAC,MAAM,EAAE,CAAC;QACf,CAAC;KAID,CAAC,CAAC;IAGH,QAAQ;IAER;;OAEG;IAEH,OAAO,OAAO,KAAK,UAAU,IAAI,OAAO,CAAC,0BAA0B,CAAC,CAAC;IAKrE,IAAI,UAAU,GAAG,iBAAO,CAAC,MAAM,CAAC;QAE/B,GAAG,EAAE;;;;;;;;;;QAUE;QAEP,OAAO,EAAE,UAAS,IAAI,EAAE,MAAM;YAC7B,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACjD,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrD,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YAC9C,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;YAEnC,MAAM,CAAC,IAAI,CAAC;QACb,CAAC;QAED,MAAM,EAAE,UAAS,IAAI;YACpB,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;YACpB,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;YAC7B,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;YAC1B,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;YACZ,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;YACZ,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QACvB,CAAC;QAED,KAAK,EAAE;YACN,IAAI,CAAC,MAAM,EAAE,CAAC;QACf,CAAC;KAID,CAAC,CAAC;;AAIH,GAAG;AACH,wBAAwB;AACxB,IAAI;AACH,oCAAoC;AACnC,yBAAyB;AACzB,4BAA4B;AAC3B,kEAAkE;AAClE,YAAY;AACb,IAAI;AACL,MAAM;AACP,IAAI;AACJ,IAAI;AACJ,GAAG;AACH,MAAM;AACN,GAAG;AACH,wBAAwB;AACxB,IAAI;AACH,oCAAoC;AACnC,yBAAyB;AACzB,4BAA4B;AAC3B,kEAAkE;AAClE,YAAY;AACb,IAAI;AACL,MAAM;AACP,IAAI;AACJ,IAAI;AACJ,GAAG;AACH,MAAM"}