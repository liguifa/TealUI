{"version":3,"file":"menu.js","sourceRoot":"../../..","sources":["components/ui/menu/menu.tsx"],"sourcesContent":["import { Control, VNode, bind } from \"control\";\r\nimport \"./menu.scss\";\r\n\r\n/**\r\n * 表示一个菜单。\r\n */\r\nexport class Menu extends Control {\r\n\r\n    /**\r\n     * 当被子类重写时负责渲染当前控件。\r\n     * @return 返回一个虚拟节点。\r\n     */\r\n    protected render() {\r\n        return <div class=\"x-menu\"></div>;\r\n    }\r\n\r\n}\r\n\r\nexport default Menu;\r\n// #todo\r\n\r\n/**\r\n * @author xuld@vip.qq.com\r\n */\r\n\r\ntypeof include === \"function\" && include(\"../control/base\");\r\ntypeof include === \"function\" && include(\"../utility/dom/pin\");\r\n\r\n/**\r\n * 表示一个菜单。\r\n * @class\r\n * @extends Control\r\n * @remark 菜单可以以三种方式显示：\r\n * 1. 右键菜单。\r\n * 2. 下拉菜单。\r\n * 3. 静态菜单。\r\n */\r\nvar Menu = Control.extend({\r\n    role: \"menu\",\r\n\r\n    /**\r\n     * 获取当前菜单的父菜单。\r\n     * @return {Menu} 返回父菜单。如果不存在父菜单则返回 @null。 \r\n     */\r\n    parent: function () {\r\n        var parent = this.dom.parent().closest(\".x-menu\");\r\n        return parent.length ? parent.role(\"menu\") : null;\r\n    },\r\n\r\n    init: function () {\r\n        var me = this;\r\n\r\n        // 鼠标移到每一项高亮相关项。\r\n        me.dom.on('mouseover', function (e) {\r\n            var item = Dom(e.target);\r\n            if (item.is(\".x-menu > li > a\")) {\r\n                item = item.parent();\r\n                if (item.parent()[0] === me.dom[0]) {\r\n                    me.selectItem(item);\r\n                }\r\n            }\r\n        });\r\n\r\n        // 子菜单：菜单的显示和隐藏由父菜单管理。\r\n        if (!me.parent()) {\r\n            // 主菜单：如果是浮动菜单，则交由浮动处理。\r\n            if (me.dom.is(\".x-popover\") || Dom.data(me.dom[0], 'roles').popover) {\r\n                var popover = me.dom.role('popover');\r\n                // 设置为右键或下拉菜单。\r\n                me.popover = popover.on('show', function () {\r\n                    me.hideSub().selectedItem(null);\r\n                });\r\n                me.dom.on('click', function (e) {\r\n                    e.preventDefault();\r\n                    // 如果是禁用或展开菜单，则点击无效。\r\n                    if (me.onItemClick(e)) {\r\n                        me.popover.hide(e);\r\n                    }\r\n                });\r\n                me.popover.target.keyNav(me.keyBindings());\r\n            } else {\r\n                // 如果不是子菜单，则绑定点击隐藏事件。\r\n                Dom(document).on('click', function (e) {\r\n                    if (!me.dom.contains(e.target) || me.onItemClick(e)) {\r\n                        me.hideSub(e);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    },\r\n\r\n    onItemClick: function (e) {\r\n        var target = Dom(e.target).closest('li');\r\n        // 禁用无法点击。\r\n        // 有子菜单无法点击。\r\n        return !target.is(\".x-menu-disbaled,.x-menu-arrow\") && !target.children(\".x-menu\").length;\r\n    },\r\n\r\n    /**\r\n     * 模拟用户选择一项。\r\n     * @param {Dom} item 要选择的项。 \r\n     * @param {Event} [e] 相关的事件对象。 \r\n     * @return this \r\n     */\r\n    selectItem: function (item) {\r\n        var me = this.selectedItem(item);\r\n        var subMenu = Dom(item).children('.x-menu');\r\n        if (subMenu.length) {\r\n            me._subMenu = subMenu.role('menu').selectedItem(null).show(item);\r\n        }\r\n        return me;\r\n    },\r\n\r\n    /**\r\n     * 获取或设置当前选中的项。\r\n     * @param {Dom} item 要选择的项。 \r\n     * @return this \r\n     */\r\n    selectedItem: function (item) {\r\n        var me = this;\r\n        var selected = me.dom.children('.x-menu-selected');\r\n        if (item === undefined) {\r\n            return selected;\r\n        }\r\n        item = Dom(item);\r\n        if (item[0] === selected[0]) {\r\n            return me;\r\n        }\r\n        selected.removeClass('x-menu-selected');\r\n        item.addClass('x-menu-selected');\r\n        return me.hideSub();\r\n    },\r\n\r\n    /**\r\n     * 显示当前菜单。\r\n     * @param {mixed} [pos] 显示的位置或依靠的节点或事件对象。\r\n     * @return this\r\n     */\r\n    show: function (pos) {\r\n        this.dom.show('opacity', null, this.duration);\r\n        pos && this.dom.pin(pos, \"rt\", 0, -5);\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * 隐藏当前菜单。\r\n     * @return this\r\n     */\r\n    hide: function () {\r\n        this.dom.hide();\r\n        return this.hideSub();\r\n    },\r\n\r\n    /**\r\n     * 关闭当前菜单的所有子菜单。\r\n     * @return this\r\n     */\r\n    hideSub: function () {\r\n        var me = this;\r\n        if (me._subMenu) {\r\n            me._subMenu.hide();\r\n            me._subMenu = null;\r\n        }\r\n        return me;\r\n    },\r\n\r\n    /**\r\n     * 获取当前菜单的默认键盘绑定。\r\n     * @return {Object} 返回各个键盘绑定对象。\r\n     */\r\n    keyBindings: function () {\r\n        var me = this;\r\n\r\n        function activeMenu() {\r\n            var currentMenu = me._activeMenu;\r\n            return currentMenu && !currentMenu.dom.isHidden() ? currentMenu : me;\r\n        }\r\n\r\n        function upDown(isUp, prev, end) {\r\n            var currentMenu = activeMenu();\r\n\r\n            currentMenu.show();\r\n\r\n            // 定位当前选中项。\r\n            var current = prev || currentMenu.selectedItem();\r\n\r\n            // 执行移动。\r\n            current = isUp ? current.prev() : current.next();\r\n\r\n            // 如果移动到末尾则回到第一项。\r\n            if (!current.length) {\r\n                current = isUp ? currentMenu.dom.last() : currentMenu.dom.first();\r\n            }\r\n\r\n            // 跳过禁用项和分隔符。\r\n            // 避免终找不到正确的菜单发生死循环。\r\n            if (current.is(\".x-menu-disabled, .x-menu-divider\") && (!end || current[0] !== end[0])) {\r\n                current = upDown(isUp, current, end || current);\r\n            }\r\n\r\n            // 内部获取实际项。\r\n            if (prev) {\r\n                return current;\r\n            }\r\n\r\n            // 选中指定项。\r\n            currentMenu.selectedItem(current);\r\n\r\n        }\r\n\r\n        return {\r\n            up: function () {\r\n                upDown(true);\r\n            },\r\n            down: function () {\r\n                upDown(false);\r\n            },\r\n            right: function () {\r\n                var currentMenu = activeMenu();\r\n                currentMenu.selectItem(currentMenu.selectedItem());\r\n                if (currentMenu._subMenu) {\r\n                    me._activeMenu = currentMenu._subMenu;\r\n                    upDown(false);\r\n                    return false;\r\n                }\r\n                return true;\r\n            },\r\n            left: function () {\r\n                var currentMenu = activeMenu();\r\n                if (currentMenu !== me) {\r\n                    me._activeMenu = currentMenu.parent() || me;\r\n                    me._activeMenu.hideSub();\r\n                    if (me._activeMenu === me) {\r\n                        delete _activeMenu;\r\n                    }\r\n                    return false;\r\n                }\r\n                return true;\r\n            },\r\n            enter: function () {\r\n                activeMenu().selectedItem().click();\r\n            },\r\n            esc: function () {\r\n                me.hide();\r\n            }\r\n        };\r\n    }\r\n\r\n});\r\n\r\nimports(\"Controls.Button.Menu\");\r\nusing(\"System.Dom.Align\");\r\nusing(\"Controls.Core.TreeControl\");\r\n\r\n\r\n\r\n/**\r\n * 表示菜单项。 \r\n */\r\nvar MenuItem = TreeControl.Item.extend({\r\n\r\n\txtype: 'menuitem',\r\n\r\n\t/**\r\n\t * 当被子类重写时，用于创建子树。\r\n\t * @param {TreeControl} treeControl 要初始化的子树。\r\n\t * @return {TreeControl} 新的 {@link TreeControl} 对象。\r\n\t * @protected override\r\n\t */\r\n\tcreateSubControl: function(treeControl){\r\n\t\treturn new Menu(treeControl);\r\n\t},\r\n\t\r\n\t/**\r\n\t * 当被子类重写时，用于初始化子树。\r\n\t * @param {TreeControl} treeControl 要初始化的子树。\r\n\t * @protected override\r\n\t */\r\n\tinitSubControl: function(treeControl){\r\n\t\ttreeControl.hide();\r\n\t\ttreeControl.floating = false;\r\n\t\tthis.addClass('x-menuitem-submenu');\r\n\t\tthis.on('mouseup', this._cancelHideMenu);\r\n\t},\r\n\t\r\n\t/**\r\n\t * 当被子类重写时，用于删除初始化子树。\r\n\t * @param {TreeControl} treeControl 要删除初始化的子树。\r\n\t * @protected override\r\n\t */\r\n\tuninitSubControl: function(treeControl){\r\n\t\ttreeControl.floating = true;\r\n\t\tthis.removeClass('x-menuitem-submenu');\r\n\t\tthis.un('mouseup', this._cancelHideMenu);\r\n\t},\r\n\r\n\tonMouseOver: function() {\r\n\t\tthis.hovering(true);\r\n\t\tif (this.subControl)\r\n\t\t\tthis.showSubMenu();\r\n\t\telse if(this.parentControl)\r\n\t\t\tthis.parentControl.hideSubMenu();\r\n\t},\r\n\t\r\n\tonMouseOut: function() {\r\n\r\n\t\t// 没子菜单，需要自取消激活。\r\n\t\t// 否则，由父菜单取消当前菜单的状态。\r\n\t\t// 因为如果有子菜单，必须在子菜单关闭后才能关闭激活。\r\n\r\n\t\tif (!this.subControl)\r\n\t\t\tthis.hovering(false);\r\n\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tinit: function() {\r\n\t\tif(this.hasClass('x-' + this.xtype)) {\r\n\t\t\tthis.unselectable();\r\n\t\t\tthis.on('mouseover', this.onMouseOver);\r\n\t\t\tthis.on('mouseout', this.onMouseOut);\r\n\t\t}\r\n\t},\r\n\t\r\n\t_cancelHideMenu: function(e) {\r\n\t\te.stopPropagation();\r\n\t},\r\n\r\n\t_hideTargetMenu: function(e) {\r\n\t\tvar tg = e.relatedTarget;\r\n\t\twhile (tg && !Dom.hasClass(tg, 'x-menu')) {\r\n\t\t\ttg = tg.parentNode;\r\n\t\t}\r\n\r\n\t\tif (tg) {\r\n\t\t\tnew Dom(tg).dataField().control.hideSubMenu();\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetSubMenu: TreeControl.Item.prototype.getSubControl,\r\n\t\r\n\tsetSubMenu: TreeControl.Item.prototype.setSubControl,\r\n\r\n\tshowSubMenu: function(){\r\n\r\n\t\t// 使用父菜单打开本菜单，显示子菜单。\r\n\t\tthis.parentControl && this.parentControl.showSubMenu(this);\r\n\t\t\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\thideSubMenu: function(){\r\n\r\n\t\t// 使用父菜单打开本菜单，显示子菜单。\r\n\t\tthis.parentControl && this.parentControl.hideSubMenu(this);\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\r\n});\r\n\r\nvar MenuSeperator = MenuItem.extend({\r\n\r\n\ttpl: '<div class=\"x-menuseperator\"></div>',\r\n\r\n\tinit: Function.empty\r\n\r\n});\r\n\r\nvar Menu = TreeControl.extend({\r\n\r\n\txtype: 'menu',\r\n\t\r\n\t/**\r\n\t * 表示当前菜单是否为浮动的菜单。 \r\n\t */\r\n\tfloating: false,\r\n\r\n\tcreateTreeItem: function(childControl, parent) {\r\n\t\t\r\n\t\tif(!(childControl instanceof MenuItem)){\r\n\t\r\n\t\t\t// 如果是文本。\r\n\t\t\tif (childControl.node.nodeType === 3) {\r\n\t\r\n\t\t\t\t// - => MenuSeperator\r\n\t\t\t\tif (/^\\s*-\\s*$/.test(childControl.getText())) {\r\n\t\r\n\t\t\t\t\t// 删除文本节点。\r\n\t\t\t\t\tif (parent) {\r\n\t\t\t\t\t\tparent.remove(childControl);\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tchildControl = new MenuSeperator;\r\n\t\r\n\t\t\t\t\t// 其它 => 添加到 MenuItem\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// 保存原有 childControl 。\r\n\t\t\t\t\tvar t = childControl;\r\n\t\t\t\t\tchildControl = new MenuItem;\r\n\t\t\t\t\tchildControl.content().replaceWith(t);\r\n\t\t\t\t}\r\n\t\t\t\tif (parent) {\r\n\t\t\t\t\tparent.prepend(childControl);\r\n\t\t\t\t}\r\n\t\t\t} else if(childControl.hasClass('x-menuseperator')){\r\n\t\t\t\tchildControl = new MenuSeperator;\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// 创建对应的 MenuItem 。\r\n\t\t\t\tchildControl = new MenuItem(childControl);\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t}\r\n\r\n\t\treturn childControl;\r\n\r\n\t},\r\n\r\n\tinit: function() {\r\n\r\n\t\t// 绑定节点和控件，方便发生事件后，根据事件源得到控件。\r\n\t\tthis.dataField().control = this;\r\n\r\n\t\t// 根据已有的 DOM 结构初始化菜单。\r\n\t\tthis.initItems();\r\n\t},\r\n\r\n\tonShow: function() {\r\n\t\t\r\n\t\t// 如果菜单是浮动的，则点击后关闭菜单，否则，只关闭子菜单。\r\n\t\tif(this.floating)\r\n\t\t\tdocument.once('mouseup', this.hide, this);\r\n\t\tthis.trigger('show');\r\n\t},\r\n\r\n\t/**\r\n\t * 关闭本菜单。\r\n\t */\r\n\tonHide: function() {\r\n\r\n\t\t// 先关闭子菜单。\r\n\t\tthis.hideSubMenu();\r\n\t\tthis.trigger('hide');\r\n\t},\r\n\r\n\tshow: function() {\r\n\t\tDom.show(this.node);\r\n\t\tthis.onShow();\r\n\t\treturn this;\r\n\t},\r\n\r\n\thide: function() {\r\n\t\tDom.hide(this.node);\r\n\t\tthis.onHide();\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t * 当前菜单依靠某个控件显示。\r\n\t * @param {Control} ctrl 方向。\r\n\t */\r\n\tshowAt: function(x, y) {\r\n\t\t\r\n\t\t// 确保菜单已添加到文档内。\r\n\t\tif (!this.parent('body')) {\r\n\t\t\tthis.appendTo();\r\n\t\t}\r\n\r\n\t\t// 显示节点。\r\n\t\tthis.show();\r\n\r\n\t\tthis.setPosition(x, y);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * 当前菜单依靠某个控件显示。\r\n\t * @param {Control} ctrl 方向。\r\n\t */\r\n\tshowBy: function(ctrl, pos, offsetX, offsetY, enableReset) {\r\n\r\n\t\t// 确保菜单已添加到文档内。\r\n\t\tif (!this.parent('body')) {\r\n\t\t\tthis.appendTo(ctrl.parent());\r\n\t\t}\r\n\r\n\t\t// 显示节点。\r\n\t\tthis.show();\r\n\r\n\t\tthis.align(ctrl, pos || 'rt', offsetX != null ? offsetX : -5, offsetY != null ? offsetY : -5, enableReset);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * 显示指定项的子菜单。\r\n\t * @param {MenuItem} menuItem 子菜单项。\r\n\t * @protected\r\n\t */\r\n\tshowSubMenu: function(menuItem) {\r\n\r\n\t\t// 如果不是右键的菜单，在打开子菜单后监听点击，并关闭此子菜单。\r\n\t\tif (!this.floating)\r\n\t\t\tdocument.once('mouseup', this.hideSubMenu, this);\r\n\r\n\t\t// 隐藏当前项子菜单。\r\n\t\tthis.hideSubMenu();\r\n\r\n\t\t// 激活本项。\r\n\t\tmenuItem.hovering(true);\r\n\r\n\t\t// 如果指定的项存在子菜单。\r\n\t\tif (menuItem.subControl) {\r\n\r\n\t\t\t// 设置当前激活的项。\r\n\t\t\tthis.currentSubMenu = menuItem;\r\n\r\n\t\t\t// 显示子菜单。\r\n\t\t\tmenuItem.subControl.showBy(menuItem);\r\n\r\n\t\t}\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t * 关闭本菜单打开的子菜单。\r\n\t * @protected\r\n\t */\r\n\thideSubMenu: function() {\r\n\r\n\t\t// 如果有子菜单，就隐藏。\r\n\t\tif (this.currentSubMenu) {\r\n\r\n\t\t\t// 关闭子菜单。\r\n\t\t\tthis.currentSubMenu.subControl.hide();\r\n\r\n\t\t\t// 取消激活菜单。\r\n\t\t\tthis.currentSubMenu.hovering(false);\r\n\t\t\tthis.currentSubMenu = null;\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n});\r\n\r\n\r\n/**\r\n * @author xuld\r\n */\r\n\r\n\r\nimports(\"Controls.Button.Menu-Alt\");\r\nusing(\"System.Dom.Align\");\r\nusing(\"Controls.Core.TreeControl\");\r\n\r\n\r\n\r\n/**\r\n * 表示菜单项。 \r\n */\r\nvar MenuItem = TreeControl.Item.extend({\r\n\r\n\txtype: 'menuitem',\r\n\r\n\t/**\r\n\t * 当被子类重写时，用于创建子树。\r\n\t * @param {TreeControl} treeControl 要初始化的子树。\r\n\t * @return {TreeControl} 新的 {@link TreeControl} 对象。\r\n\t * @protected override\r\n\t */\r\n\tcreateSubControl: function(treeControl){\r\n\t\treturn new Menu(treeControl);\r\n\t},\r\n\t\r\n\t/**\r\n\t * 当被子类重写时，用于初始化子树。\r\n\t * @param {TreeControl} treeControl 要初始化的子树。\r\n\t * @protected override\r\n\t */\r\n\tinitSubControl: function(treeControl){\r\n\t\ttreeControl.hide();\r\n\t\ttreeControl.floating = false;\r\n\t\tthis.addClass('x-menuitem-submenu');\r\n\t\tthis.on('mouseup', this._cancelHideMenu);\r\n\t},\r\n\t\r\n\t/**\r\n\t * 当被子类重写时，用于删除初始化子树。\r\n\t * @param {TreeControl} treeControl 要删除初始化的子树。\r\n\t * @protected override\r\n\t */\r\n\tuninitSubControl: function(treeControl){\r\n\t\ttreeControl.floating = true;\r\n\t\tthis.removeClass('x-menuitem-submenu');\r\n\t\tthis.un('mouseup', this._cancelHideMenu);\r\n\t},\r\n\r\n\tonMouseOver: function() {\r\n\t\tthis.hovering(true);\r\n\t\tif (this.subControl)\r\n\t\t\tthis.showSubMenu();\r\n\t\telse if(this.parentControl)\r\n\t\t\tthis.parentControl.hideSubMenu();\r\n\t},\r\n\t\r\n\tonMouseOut: function() {\r\n\r\n\t\t// 没子菜单，需要自取消激活。\r\n\t\t// 否则，由父菜单取消当前菜单的状态。\r\n\t\t// 因为如果有子菜单，必须在子菜单关闭后才能关闭激活。\r\n\r\n\t\tif (!this.subControl)\r\n\t\t\tthis.hovering(false);\r\n\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tinit: function() {\r\n\t\tif(this.hasClass('x-' + this.xtype)) {\r\n\t\t\tthis.unselectable();\r\n\t\t\tthis.on('mouseover', this.onMouseOver);\r\n\t\t\tthis.on('mouseout', this.onMouseOut);\r\n\t\t\tif(!this.icon()){\r\n\t\t\t\tthis.setIcon('none');\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\t_cancelHideMenu: function(e) {\r\n\t\te.stopPropagation();\r\n\t},\r\n\r\n\t_hideTargetMenu: function(e) {\r\n\t\tvar tg = e.relatedTarget;\r\n\t\twhile (tg && !Dom.hasClass(tg, 'x-menu')) {\r\n\t\t\ttg = tg.parentNode;\r\n\t\t}\r\n\r\n\t\tif (tg) {\r\n\t\t\tnew Dom(tg).dataField().control.hideSubMenu();\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetSubMenu: TreeControl.Item.prototype.getSubControl,\r\n\t\r\n\tsetSubMenu: TreeControl.Item.prototype.setSubControl,\r\n\r\n\tshowSubMenu: function(){\r\n\r\n\t\t// 使用父菜单打开本菜单，显示子菜单。\r\n\t\tthis.parentControl && this.parentControl.showSubMenu(this);\r\n\t\t\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\thideSubMenu: function(){\r\n\r\n\t\t// 使用父菜单打开本菜单，显示子菜单。\r\n\t\tthis.parentControl && this.parentControl.hideSubMenu(this);\r\n\t\t\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\thovering: function(value){\r\n\t\tthis.parent().toggleClass(\"x-menu-hover\", value !== false);\r\n\t\tthis.toggleClass(\"x-menuitem-hover\", value !== false);\r\n\t}\r\n\r\n});\r\n\r\nvar MenuSeperator = MenuItem.extend({\r\n\r\n\ttpl: '<div class=\"x-menuseperator\"></div>',\r\n\r\n\tinit: Function.empty\r\n\r\n});\r\n\r\nvar Menu = TreeControl.extend({\r\n\r\n\txtype: 'menu',\r\n\t\r\n\t/**\r\n\t * 表示当前菜单是否为浮动的菜单。 \r\n\t */\r\n\tfloating: false,\r\n\r\n\tcreateTreeItem: function(childControl, parent) {\r\n\t\t\r\n\t\tif(!(childControl instanceof MenuItem)){\r\n\t\r\n\t\t\t// 如果是文本。\r\n\t\t\tif (childControl.node.nodeType === 3) {\r\n\t\r\n\t\t\t\t// - => MenuSeperator\r\n\t\t\t\tif (/^\\s*-\\s*$/.test(childControl.getText())) {\r\n\t\r\n\t\t\t\t\t// 删除文本节点。\r\n\t\t\t\t\tif (parent) {\r\n\t\t\t\t\t\tparent.remove(childControl);\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tchildControl = new MenuSeperator;\r\n\t\r\n\t\t\t\t\t// 其它 => 添加到 MenuItem\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// 保存原有 childControl 。\r\n\t\t\t\t\tvar t = childControl;\r\n\t\t\t\t\tchildControl = new MenuItem;\r\n\t\t\t\t\tchildControl.content().replaceWith(t);\r\n\t\t\t\t}\r\n\t\t\t\tif (parent) {\r\n\t\t\t\t\tparent.prepend(childControl);\r\n\t\t\t\t}\r\n\t\t\t} else if(childControl.hasClass('x-menuseperator')){\r\n\t\t\t\tchildControl = new MenuSeperator;\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// 创建对应的 MenuItem 。\r\n\t\t\t\tchildControl = new MenuItem(childControl);\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t}\r\n\r\n\t\treturn childControl;\r\n\r\n\t},\r\n\r\n\tinit: function() {\r\n\r\n\t\t// 绑定节点和控件，方便发生事件后，根据事件源得到控件。\r\n\t\tthis.dataField().control = this;\r\n\r\n\t\t// 根据已有的 DOM 结构初始化菜单。\r\n\t\tthis.initItems();\r\n\t},\r\n\r\n\tonShow: function() {\r\n\t\t\r\n\t\t// 如果菜单是浮动的，则点击后关闭菜单，否则，只关闭子菜单。\r\n\t\tif(this.floating)\r\n\t\t\tdocument.once('mouseup', this.hide, this);\r\n\t\tthis.trigger('show');\r\n\t},\r\n\r\n\t/**\r\n\t * 关闭本菜单。\r\n\t */\r\n\tonHide: function() {\r\n\r\n\t\t// 先关闭子菜单。\r\n\t\tthis.hideSubMenu();\r\n\t\tthis.trigger('hide');\r\n\t},\r\n\r\n\tshow: function() {\r\n\t\tDom.show(this.node);\r\n\t\tthis.onShow();\r\n\t\treturn this;\r\n\t},\r\n\r\n\thide: function() {\r\n\t\tDom.hide(this.node);\r\n\t\tthis.onHide();\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t * 当前菜单依靠某个控件显示。\r\n\t * @param {Control} ctrl 方向。\r\n\t */\r\n\tshowAt: function(x, y) {\r\n\t\t\r\n\t\t// 确保菜单已添加到文档内。\r\n\t\tif (!this.parent('body')) {\r\n\t\t\tthis.appendTo();\r\n\t\t}\r\n\r\n\t\t// 显示节点。\r\n\t\tthis.show();\r\n\r\n\t\tthis.setPosition(x, y);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * 当前菜单依靠某个控件显示。\r\n\t * @param {Control} ctrl 方向。\r\n\t */\r\n\tshowBy: function(ctrl, pos, offsetX, offsetY, enableReset) {\r\n\r\n\t\t// 确保菜单已添加到文档内。\r\n\t\tif (!this.parent('body')) {\r\n\t\t\tthis.appendTo(ctrl.parent());\r\n\t\t}\r\n\r\n\t\t// 显示节点。\r\n\t\tthis.show();\r\n\r\n\t\tthis.align(ctrl, pos || 'rt', offsetX != null ? offsetX : -5, offsetY != null ? offsetY : -5, enableReset);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * 显示指定项的子菜单。\r\n\t * @param {MenuItem} menuItem 子菜单项。\r\n\t * @protected\r\n\t */\r\n\tshowSubMenu: function(menuItem) {\r\n\r\n\t\t// 如果不是右键的菜单，在打开子菜单后监听点击，并关闭此子菜单。\r\n\t\tif (!this.floating)\r\n\t\t\tdocument.once('mouseup', this.hideSubMenu, this);\r\n\r\n\t\t// 隐藏当前项子菜单。\r\n\t\tthis.hideSubMenu();\r\n\r\n\t\t// 激活本项。\r\n\t\tmenuItem.hovering(true);\r\n\r\n\t\t// 如果指定的项存在子菜单。\r\n\t\tif (menuItem.subControl) {\r\n\r\n\t\t\t// 设置当前激活的项。\r\n\t\t\tthis.currentSubMenu = menuItem;\r\n\r\n\t\t\t// 显示子菜单。\r\n\t\t\tmenuItem.subControl.showBy(menuItem);\r\n\r\n\t\t}\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t * 关闭本菜单打开的子菜单。\r\n\t * @protected\r\n\t */\r\n\thideSubMenu: function() {\r\n\r\n\t\t// 如果有子菜单，就隐藏。\r\n\t\tif (this.currentSubMenu) {\r\n\r\n\t\t\t// 关闭子菜单。\r\n\t\t\tthis.currentSubMenu.subControl.hide();\r\n\r\n\t\t\t// 取消激活菜单。\r\n\t\t\tthis.currentSubMenu.hovering(false);\r\n\t\t\tthis.currentSubMenu = null;\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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"}