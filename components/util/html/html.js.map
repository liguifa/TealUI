{"version":3,"file":"html.js","sourceRoot":"../../..","sources":["components/util/html/html.ts"],"sourcesContent":["/**\r\n * 编码 HTML 特殊字符。\r\n * @param value 要编码的字符串。\r\n * @return 返回已编码的字符串。HTML 特殊字符 `&`、`<`、`>`、`'`、`\"` 分别会被编码成 `&amp;`、`&lt;`、`&gt;`、`&#39;`、`&quot;`。\r\n * @example encodeHTML(\"<a></a>\") // \"&lt;a&gt;&lt;/a&gt;\"\r\n */\r\nexport function encodeHTML(value: string) {\r\n    return value.replace(/[&<>'\"]/g, c => ({\r\n        \"&\": \"&amp;\",\r\n        \"<\": \"&lt;\",\r\n        \">\": \"&gt;\",\r\n        \"\\'\": \"&#39;\",\r\n        '\\\"': \"&quot;\"\r\n    } as any)[c]);\r\n}\r\n\r\n/**\r\n * 编码 HTML 属性特殊字符。\r\n * @param value 要编码的字符串。\r\n * @return 返回已编码的字符串。HTML 属性特殊字符 `'`、`\"` 分别会被编码成 `&#39;`、`&quot;`。\r\n * @example encodeHTMLAttribute(\"'\") // \"&#39;\"\r\n */\r\nexport function encodeHTMLAttribute(value: string) {\r\n    return value.replace(/['\"]/g, c => ({\r\n        \"\\'\": \"&#39;\",\r\n        '\\\"': \"&quot;\"\r\n    } as any)[c]);\r\n}\r\n\r\n/**\r\n * 解码 HTML 特殊字符。\r\n * @param value 要解码的字符串。\r\n * @return 返回已解码的字符串。\r\n * @example decodeHTML(\"&lt;a&gt;&lt;/a&gt;\") // \"<a></a>\"\r\n */\r\nexport function decodeHTML(value: string) {\r\n    return value.replace(/&(#(\\d+)|\\w+);/g, (_: string, word: string, unicode: string) => unicode ? String.fromCharCode(+unicode) : (({\r\n        \"amp\": \"&\",\r\n        \"lt\": \"<\",\r\n        \"gt\": \">\",\r\n        \"quot\": '\\\"'\r\n    } as any)[word] || word));\r\n}\r\n\r\n/**\r\n * 编码 HTML 属性值（含引号）。\r\n * @param value 要编码的字符串。\r\n * @param quote 要编码的引号。\r\n * @return 返回已编码的字符串。\r\n * @example escapeHTMLAttribute(\"a\", '\"') // \"\\\"a\\\"\"\r\n */\r\nexport function escapeHTMLAttribute(value: string, quote?: string): string {\r\n    const q = quote && quote.charCodeAt(0);\r\n    return q === 34 /*\"*/ ? '\"' + value.replace(/\"/g, \"&quot;\") + '\"' :\r\n        q === 39 /*'*/ ? \"'\" + value.replace(/'/g, \"&#39;\") + \"'\" :\r\n            /[>\\s=\"']/.test(value) ? escapeHTMLAttribute(value, value.indexOf('\"') >= 0 && value.indexOf(\"\\'\") < 0 ? \"\\'\" : '\"') : value;\r\n}\r\n\r\n/**\r\n * 解码 HTML 属性值（含引号）。\r\n * @param value 要编码的字符串。\r\n * @param quote 要编码的引号。\r\n * @return 返回已编码的字符串。\r\n * @example unescapeHTMLAttribute(\"'a'\") // \"a\"\r\n */\r\nexport function unescapeHTMLAttribute(value: string) {\r\n    return decodeHTML(value.replace(/^(['\"])(.*)\\1$/, \"$2\"));\r\n}\r\n"],"mappings":";;IAAA;;;;;OAKG;IACH,oBAA2B,KAAa;QACpC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC;YACnC,GAAG,EAAE,OAAO;YACZ,GAAG,EAAE,MAAM;YACX,GAAG,EAAE,MAAM;YACX,IAAI,EAAE,OAAO;YACb,IAAI,EAAE,QAAQ;SACT,CAAC,CAAC,CAAC,CAAA,CAAC,CAAC;IAClB,CAAC;IARD,gCAQC;IAED;;;;;OAKG;IACH,6BAAoC,KAAa;QAC7C,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;YAChC,IAAI,EAAE,OAAO;YACb,IAAI,EAAE,QAAQ;SACT,CAAC,CAAC,CAAC,CAAA,CAAC,CAAC;IAClB,CAAC;IALD,kDAKC;IAED;;;;;OAKG;IACH,oBAA2B,KAAa;QACpC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,iBAAiB,EAAE,CAAC,CAAS,EAAE,IAAY,EAAE,OAAe,KAAK,OAAO,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC,OAAO,CAAC,GAAG,CAAE;YAC9H,KAAK,EAAE,GAAG;YACV,IAAI,EAAE,GAAG;YACT,IAAI,EAAE,GAAG;YACT,MAAM,EAAE,IAAI;SACP,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC;IAC9B,CAAC;IAPD,gCAOC;IAED;;;;;;OAMG;IACH,6BAAoC,KAAa,EAAE,KAAc;QAC7D,MAAM,CAAC,GAAG,KAAK,IAAI,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QACvC,MAAM,CAAC,CAAC,KAAK,EAAE,CAAC,KAAK,GAAG,GAAG,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,QAAQ,CAAC,GAAG,GAAG;YAC7D,CAAC,KAAK,EAAE,CAAC,KAAK,GAAG,GAAG,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,GAAG,GAAG;gBACrD,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,mBAAmB,CAAC,KAAK,EAAE,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,GAAG,CAAC,GAAG,KAAK,CAAC;IACzI,CAAC;IALD,kDAKC;IAED;;;;;;OAMG;IACH,+BAAsC,KAAa;QAC/C,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,OAAO,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC,CAAC;IAC7D,CAAC;IAFD,sDAEC"}