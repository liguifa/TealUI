{"version":3,"file":"delegate.js","sourceRoot":"../../..","sources":["components/util/delegate/delegate.ts"],"sourcesContent":["/**\r\n * 表示一个委托。\r\n */\r\nexport class Delegate<T extends Function> {\r\n\r\n    /**\r\n     * 获取所有委托函数。\r\n     */\r\n    funcs: T[];\r\n\r\n    /**\r\n     * 初始化新的委托。\r\n     * @param funcs 绑定的函数。\r\n     */\r\n    constructor(...funcs: T[]) {\r\n        const delegate = function (this: any) {\r\n            for (const handler of delegate.funcs) {\r\n                handler.apply(this, arguments);\r\n            }\r\n        } as any as Delegate<T>;\r\n        for (const key in Delegate.prototype) {\r\n            (delegate as any)[key] = (Delegate.prototype as any)[key];\r\n        }\r\n        delegate.funcs = funcs;\r\n        return delegate;\r\n    }\r\n\r\n    /**\r\n     * 增加一个委托函数。\r\n     * @param func 要增加的函数。\r\n     * @example new Delegate().add(function () {})\r\n     */\r\n    add(func: T) {\r\n        this.funcs.push(func);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * 删除一个委托函数。\r\n     * @param func 要删除的函数。\r\n     * @example new Delegate().remove(function () {})\r\n     */\r\n    remove(func: T) {\r\n        const index = this.funcs.indexOf(func);\r\n        if (index >= 0) {\r\n            this.funcs.splice(index, 1);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * 删除所有委托函数。\r\n     * @example new Delegate().clear()\r\n     */\r\n    clear() {\r\n        this.funcs.length = 0;\r\n        return this;\r\n    }\r\n\r\n}\r\n\r\nexport interface Delegate<T extends Function> {\r\n    (...args: any[]): void;\r\n}\r\n\r\nexport default Delegate;\r\n"],"mappings":";;IAAA;;OAEG;IACH;QAOI;;;WAGG;QACH,YAAY,GAAG,KAAU;YACrB,MAAM,QAAQ,GAAG;gBACb,GAAG,CAAC,CAAC,MAAM,OAAO,IAAI,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;oBACnC,OAAO,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;gBACnC,CAAC;YACL,CAAuB,CAAC;YACxB,GAAG,CAAC,CAAC,MAAM,GAAG,IAAI,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC;gBAClC,QAAgB,CAAC,GAAG,CAAC,GAAI,QAAQ,CAAC,SAAiB,CAAC,GAAG,CAAC,CAAC;YAC9D,CAAC;YACD,QAAQ,CAAC,KAAK,GAAG,KAAK,CAAC;YACvB,MAAM,CAAC,QAAQ,CAAC;QACpB,CAAC;QAED;;;;WAIG;QACH,GAAG,CAAC,IAAO;YACP,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACtB,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QAED;;;;WAIG;QACH,MAAM,CAAC,IAAO;YACV,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACvC,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC;gBACb,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAChC,CAAC;YACD,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QAED;;;WAGG;QACH,KAAK;YACD,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;YACtB,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;KAEJ;IAxDD,4BAwDC;IAMD,kBAAe,QAAQ,CAAC"}