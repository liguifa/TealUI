{"version":3,"file":"currency.js","sourceRoot":"../../..","sources":["components/util/currency/currency.ts"],"sourcesContent":["/**\r\n * 精确计算两个货币的和。\r\n * @param x 计算的左值，最大不得超过 1 万亿，最多只能有两位小数。\r\n * @param y 计算的右值，最大不得超过 1 万亿，最多只能有两位小数。\r\n * @return 返回计算的结果。\r\n * @example add(86.24, 0.1) // 86.34\r\n */\r\nexport function add(x: number, y: number) {\r\n    return Math.round((x + y) * 100) / 100;\r\n}\r\n\r\n/**\r\n * 精确计算两个货币的差。\r\n * @param x 计算的左值，最大不得超过 1 万亿，最多只能有两位小数。\r\n * @param y 计算的右值，最大不得超过 1 万亿，最多只能有两位小数。\r\n * @return 返回计算的结果。\r\n * @example sub(7, 0.8) // 6.2\r\n */\r\nexport function sub(x: number, y: number) {\r\n    return Math.round((x - y) * 100) / 100;\r\n}\r\n\r\n/**\r\n * 精确计算两个货币的积。\r\n * @param x 计算的左值。\r\n * @param y 计算的右值。\r\n * @return 返回计算的结果。\r\n * @example mul(7, 0.8) // 5.6\r\n */\r\nexport function mul(x: number, y: number) {\r\n    return (x * 1000) * (y * 1000) / 1000000;\r\n}\r\n\r\n/**\r\n * 精确计算两个货币的商。\r\n * @param x 计算的左值。\r\n * @param y 计算的右值。\r\n * @return 返回计算的结果。\r\n * @example div(7, 0.8) // 8.75\r\n */\r\nexport function div(x: number, y: number) {\r\n    return Math.round(x * 100 / y) / 100;\r\n}\r\n\r\n/**\r\n * 保留小数点后两位四舍五入。\r\n * @param value 要处理的值。\r\n * @return 返回计算的结果。\r\n * @example round(86.245) // 86.25\r\n */\r\nexport function round(value: number) {\r\n    return Math.round(value * 100) / 100;\r\n}\r\n\r\n/**\r\n * 将指定的货币格式化为字符串。\r\n * @param value 要处理的值。\r\n * @return 返回格式化后的字符串。字符串保留两位小数，整数部分每 3 位包含一个逗号分隔符。\r\n * @example format(86234.245) // \"86,234.25\"\r\n */\r\nexport function format(value: number) {\r\n    const t = Math.round(Math.abs(value) * 100);\r\n    const result = Math.floor(value) + \"\";\r\n    const c = (result.length - 1) % 3 + (value < 0 ? 2 : 1);\r\n    return result.substr(0, c) + result.substr(c).replace(/(\\d{3})/g, \",$1\") + \".\" + Math.floor(t / 10) % 10 + t % 10;\r\n}\r\n"],"mappings":";;IAAA;;;;;;OAMG;IACH,aAAoB,CAAS,EAAE,CAAS;QACpC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC;IAC3C,CAAC;IAFD,kBAEC;IAED;;;;;;OAMG;IACH,aAAoB,CAAS,EAAE,CAAS;QACpC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC;IAC3C,CAAC;IAFD,kBAEC;IAED;;;;;;OAMG;IACH,aAAoB,CAAS,EAAE,CAAS;QACpC,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,OAAO,CAAC;IAC7C,CAAC;IAFD,kBAEC;IAED;;;;;;OAMG;IACH,aAAoB,CAAS,EAAE,CAAS;QACpC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC;IACzC,CAAC;IAFD,kBAEC;IAED;;;;;OAKG;IACH,eAAsB,KAAa;QAC/B,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC;IACzC,CAAC;IAFD,sBAEC;IAED;;;;;OAKG;IACH,gBAAuB,KAAa;QAChC,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC;QAC5C,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;QACtC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;QACxD,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;IACtH,CAAC;IALD,wBAKC"}