{"version":3,"file":"md5.js","sourceRoot":"../../..","sources":["components/util/md5/md5.ts"],"sourcesContent":["\r\n/**\r\n * 使用 MD5 算法加密指定字符串。\r\n * @param value 要加密的字符串。\r\n * @return 返回加密后的字符串，其中只包含小写字母。\r\n * @example md5(\"a\") // \"0cc175b9c0f1b6a831c399e269772661\"\r\n */\r\nexport default function md5(value: string) {\r\n    return binaryToString(raw(value));\r\n}\r\n\r\n/**\r\n * 编码使用的字符集。如果需要更改加密返回的大小写可更改此字段。\r\n * @private\r\n */\r\nexport const hexChars = \"0123456789abcdef\";\r\n\r\n/**\r\n * 将文本转为字节数组。\r\n * @param value 要编码的文本。\r\n * @return 返回二进制字节数组。\r\n * @desc 只支持处理 ASCII 字符，如果字符编码大于 255，则会将高位截断。\r\n * @private\r\n */\r\nexport function stringToBinary(value: string) {\r\n    const len = value.length * 8;\r\n    const result: number[] = [];\r\n    for (let i = 0; i < len; i += 8) {\r\n        result[i >> 5] |= (value.charCodeAt(i / 8) & 0xff) << (i % 32);\r\n    }\r\n    return result;\r\n}\r\n\r\n/**\r\n * 将字节数组转为文本。\r\n * @param value 要解码的二进制数组。\r\n * @return 返回字符串。\r\n *  @desc 只支持处理 ASCII 字符，如果字符编码大于 255，则会将高位截断。\r\n * @private\r\n */\r\nexport function binaryToString(value: number[]) {\r\n    const len = value.length * 32;\r\n    let result = \"\";\r\n    for (let i = 0; i < len; i += 8) {\r\n        const t = (value[i >> 5] >>> (i % 32)) & 0xFF;\r\n        result += hexChars[(t >>> 4) & 0x0F] + hexChars[t & 0x0F];\r\n    }\r\n    return result;\r\n}\r\n\r\n/**\r\n * 解码函数。\r\n */\r\ndeclare function unescape(value: string): string;\r\n\r\n/**\r\n * 执行 MD5 加密算法。\r\n * @param value 要加密的字符串。\r\n * @return 返回加密后的字节数组。\r\n */\r\nexport function raw(value: string) {\r\n    value = unescape(encodeURIComponent(value));\r\n    return calc(stringToBinary(value), value.length * 8);\r\n}\r\n\r\n/**\r\n * 执行 MD5 加密算法。\r\n * @param value 要计算的字节数组。\r\n * @param length 总位数。\r\n * @return 返回已加密的字节数组。\r\n * @private\r\n */\r\nexport function calc(value: number[], count: number) {\r\n    const fns = [\r\n        (b: number, c: number, d: number) => b & c | ~b & d,\r\n        (b: number, c: number, d: number) => b & d | c & ~d,\r\n        (b: number, c: number, d: number) => b ^ c ^ d,\r\n        (b: number, c: number, d: number) => c ^ (b | ~d)\r\n    ];\r\n    const pss = [\r\n        [7, 12, 17, 22],\r\n        [5, 9, 14, 20],\r\n        [4, 11, 16, 23],\r\n        [6, 10, 15, 21],\r\n    ];\r\n    // 对齐字符串。\r\n    value[count >> 5] |= 0x80 << (count % 32);\r\n    value[(((count + 64) >>> 9) << 4) + 14] = count;\r\n    let a = 1732584193;\r\n    let b = -271733879;\r\n    let c = -1732584194;\r\n    let d = 271733878;\r\n    let procIndex = 0;\r\n    for (let i = 0; i < value.length; i += 16) {\r\n        const oldA = a;\r\n        const oldB = b;\r\n        const oldC = c;\r\n        const oldD = d;\r\n        const safeAdd = (x: number, y: number) => {\r\n            const lsw = (x & 0xFFFF) + (y & 0xFFFF);\r\n            return ((x >> 16) + (y >> 16) + (lsw >> 16)) << 16 | lsw & 0xFFFF;\r\n        };\r\n        const combine = (q: number, a: number, b: number, x: number, str: number, t: number) => {\r\n            const num = safeAdd(safeAdd(a, q), safeAdd(x, t));\r\n            return safeAdd((num << str) | (num >>> (32 - str)), b);\r\n        };\r\n        const proc = (j0: number, j1: number, j2: number, j3: number, ts0: number, ts1: number, ts2: number, ts3: number) => {\r\n            const fn = fns[procIndex];\r\n            const ps = pss[procIndex];\r\n            a = combine(fn(b, c, d), a, b, value[i + j0], ps[0], ts0);\r\n            d = combine(fn(a, b, c), d, a, value[i + j1], ps[1], ts1);\r\n            c = combine(fn(d, a, b), c, d, value[i + j2], ps[2], ts2);\r\n            b = combine(fn(c, d, a), b, c, value[i + j3], ps[3], ts3);\r\n        };\r\n\r\n        procIndex = 0;\r\n        proc(0, 1, 2, 3, -680876936, -389564586, 606105819, -1044525330);\r\n        proc(4, 5, 6, 7, -176418897, 1200080426, -1473231341, -45705983);\r\n        proc(8, 9, 10, 11, 1770035416, -1958414417, -42063, -1990404162);\r\n        proc(12, 13, 14, 15, 1804603682, -40341101, -1502002290, 1236535329);\r\n\r\n        procIndex = 1;\r\n        proc(1, 6, 11, 0, -165796510, -1069501632, 643717713, -373897302);\r\n        proc(5, 10, 15, 4, -701558691, 38016083, -660478335, -405537848);\r\n        proc(9, 14, 3, 8, 568446438, -1019803690, -187363961, 1163531501);\r\n        proc(13, 2, 7, 12, -1444681467, -51403784, 1735328473, -1926607734);\r\n\r\n        procIndex = 2;\r\n        proc(5, 8, 11, 14, -378558, -2022574463, 1839030562, -35309556);\r\n        proc(1, 4, 7, 10, -1530992060, 1272893353, -155497632, -1094730640);\r\n        proc(13, 0, 3, 6, 681279174, -358537222, -722521979, 76029189);\r\n        proc(9, 12, 15, 2, -640364487, -421815835, 530742520, -995338651);\r\n\r\n        procIndex = 3;\r\n        proc(0, 7, 14, 5, -198630844, 1126891415, -1416354905, -57434055);\r\n        proc(12, 3, 10, 1, 1700485571, -1894986606, -1051523, -2054922799);\r\n        proc(8, 15, 6, 13, 1873313359, -30611744, -1560198380, 1309151649);\r\n        proc(4, 11, 2, 9, -145523070, -1120210379, 718787259, -343485551);\r\n\r\n        a = safeAdd(a, oldA);\r\n        b = safeAdd(b, oldB);\r\n        c = safeAdd(c, oldC);\r\n        d = safeAdd(d, oldD);\r\n    }\r\n    return [a, b, c, d];\r\n}\r\n"],"mappings":"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"}