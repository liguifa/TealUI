{"version":3,"file":"base64.js","sourceRoot":"../../..","sources":["components/util/base64/base64.ts"],"sourcesContent":["/**\r\n * 对指定的字符串进行 Base64 编码(支持中文)。\r\n * @param value 要转换的字符串。\r\n * @return 返回转换后的字符串。\r\n * @example encodeBase64(\"中文\") // \"5Lit5paH\"\r\n */\r\nexport function encodeBase64(value: string) {\r\n\r\n    // 转换 Unicode 字符为 UTF8 字符序列，确保每个字符都是 ASCII 字符。\r\n    const t: number[] = [];\r\n    for (let i = 0; i < value.length; i++) {\r\n        const c = value.charCodeAt(i);\r\n        if (c < 128) {\r\n            t.push(c);\r\n        } else if (c < 2048) {\r\n            t.push(192 | c >> 6 & 31, 128 | c >> 0 & 63);\r\n        } else {\r\n            t.push(224 | c >> 12 & 15, 128 | c >> 6 & 63, 128 | c >> 0 & 63);\r\n        }\r\n    }\r\n\r\n    // 一次编码 3 个字符，得到 4 位 Base64 编码，如果位数不够则补 '='。\r\n    const base64Chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n    const length = t.length;\r\n    let result = \"\";\r\n    for (let i = 0; i < length;) {\r\n\r\n        const c1 = t[i++];\r\n        result += base64Chars.charAt(c1 >> 2);\r\n        if (i === length) {\r\n            result += base64Chars.charAt((c1 & 3) << 4) + \"==\";\r\n            break;\r\n        }\r\n\r\n        const c2 = t[i++];\r\n        result += base64Chars.charAt((c1 & 3) << 4 | (c2 & 240) >> 4);\r\n        if (i === length) {\r\n            result += base64Chars.charAt((c2 & 15) << 2) + \"=\";\r\n            break;\r\n        }\r\n\r\n        const c3 = t[i++];\r\n        result += base64Chars.charAt((c2 & 15) << 2 | (c3 & 192) >> 6) + base64Chars.charAt(c3 & 63);\r\n\r\n    }\r\n    return result;\r\n}\r\n\r\n/**\r\n * 对指定的字符串进行 Base64 解码(支持中文)。\r\n * @param value 要转换的字符串。\r\n * @return 返回转换后的字符串。\r\n * @example decodeBase64(\"5Lit5paH\") // \"中文\"\r\n */\r\nexport function decodeBase64(value: string) {\r\n\r\n    // 一次解码 4 个 Base64 字符，得到 3 个字符。\r\n    const base64Chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n    const t: number[] = [];\r\n    for (let i = 0; i < value.length;) {\r\n\r\n        const c1 = i < value.length ? base64Chars.indexOf(value.charAt(i++)) : -1;\r\n        const c2 = i < value.length ? base64Chars.indexOf(value.charAt(i++)) : -1;\r\n        if (c1 < 0 || c2 < 0) continue;\r\n        t.push(c1 << 2 | (c2 & 48) >> 4);\r\n\r\n        const c3 = i < value.length ? base64Chars.indexOf(value.charAt(i++)) : -1;\r\n        if (c3 < 0) continue;\r\n        t.push((c2 & 15) << 4 | (c3 & 60) >> 2);\r\n\r\n        const c4 = i < value.length ? base64Chars.indexOf(value.charAt(i++)) : -1;\r\n        if (c4 < 0) continue;\r\n        t.push((c3 & 3) << 6 | c4);\r\n\r\n    }\r\n\r\n    // 转换 ASCII 字符为 Unicode 字符。\r\n    let result = \"\";\r\n    for (let i = 0; i < t.length;) {\r\n        const c = t[i++];\r\n        if (c < 128) {\r\n            result += String.fromCharCode(c);\r\n        } else if (c > 191 && c < 224) {\r\n            result += String.fromCharCode((c & 31) << 6 | t[i++] & 63);\r\n        } else if (c > 223 && c < 240) {\r\n            result += String.fromCharCode((c & 15) << 12 | (t[i++] & 63) << 6 | (t[i++] & 63) << 0);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n"],"mappings":"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"}