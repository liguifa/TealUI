{"version":3,"file":"string.js","sourceRoot":"../../..","sources":["components/util/string/string.ts"],"sourcesContent":["/**\r\n * 格式化指定的字符串。\r\n * @param formatString 格式字符串。具体见下文。\r\n * @param args 格式化参数。\r\n * @return 返回格式化后的字符串。\r\n * @desc\r\n * 格式字符串中，以下内容会被替换：\r\n *\r\n * 元字符   | 意义      | 示例\r\n * --------|-----------|--------\r\n * {数字}   | 替换为参数列表 | 如 `String.format(\"{0}年{1}月{2}日\", 2012, 12, 3)` 中，{0} 被替换成 2012，{1} 被替换成 12 ，依次类推。\r\n * {字符串} | 替换为参数对象 | 如 `String.format(\"{year}年{month} 月 \", {year: 2012, month:12})`。\r\n * {{      | 被替换为 { |\r\n * }}      | 被替换为 } |\r\n *\r\n * @example format(\"我是{0}，不是{1}\", \"小黑\", \"大白\") // \"我是小黑，不是大白\"\r\n * @example format(\"我是{xiaohei}，不是{dabai}\", {xiaohei: \"小黑\", dabai: \"大白\"}) // \"我是小黑，不是大白\"\r\n * @example format(\"在字符串内使用两个{{和}}避免被转换\") //  \"在字符串内使用两个{和}避免被转换\"\r\n */\r\nexport function format(formatString: string, ...args: any[]) {\r\n    return formatString ? formatString.replace(/\\{\\{|\\{(.+?)\\}|\\}\\}/g, (source: string, argName: string) => {\r\n        if (argName == undefined) {\r\n            return source.charAt(0);\r\n        }\r\n        argName = +argName >= 0 ? args[argName as any] : args[0][argName];\r\n        return argName == undefined ? \"\" : argName;\r\n    }) : \"\";\r\n}\r\n\r\n/**\r\n * 判断一个对象是否是字符串。\r\n * @param obj 要判断的对象。\r\n * @return 如果 obj 是字符串则返回 true，否则返回 false。\r\n * @example isString(\"\") // true\r\n */\r\nexport function isString(obj: any): obj is string {\r\n    return typeof obj === \"string\";\r\n}\r\n\r\n/**\r\n * 将字符串限定在指定长度内，超出部分用 ... 代替。\r\n * @param str 要处理的字符串。\r\n * @param length 最终期望的最大长度。\r\n * @return 返回处理后的字符串。\r\n * @example ellipsis(\"1234567\", 6) // \"123...\"\r\n * @example ellipsis(\"1234567\", 9) // \"1234567\"\r\n */\r\nexport function ellipsis(str: string, length: number) {\r\n    return str ? str.length > length ? str.substr(0, length - 3) + \"...\" : str : \"\";\r\n}\r\n\r\n/**\r\n * 将字符串限定在指定长度内，超出部分用 ... 代替。同时确保不强制分割单词。\r\n * @param str 要处理的字符串。\r\n * @param length 最终期望的最大长度。\r\n * @return 返回处理后的字符串。\r\n * @example ellipsisByWord(\"abc def\", 6) //   \"abc...\"\r\n */\r\nexport function ellipsisByWord(str: string, length: number) {\r\n    if (str && str.length > length) {\r\n        length -= 3;\r\n        if (/[\\x00-\\xff]/.test(str.charAt(length))) {\r\n            const p = str.lastIndexOf(\" \", length);\r\n            if (p !== -1) {\r\n                length = p;\r\n            }\r\n        }\r\n        str = str.substr(0, length) + \"...\";\r\n    }\r\n    return str || \"\";\r\n}\r\n\r\n/**\r\n * 判断字符串是否包含指定单词。\r\n * @param value 要判断的字符串。\r\n * @param separator 指定单词的分割符，默认为空格。\r\n * @return 如果包含指定的单词则返回 true，否则返回 false。\r\n * @example containsWord(\"abc ab\", \"ab\")\r\n */\r\nexport function containsWord(str: string, value: string, separator = \" \") {\r\n    separator = separator || \" \";\r\n    return (separator ? (separator + str + separator) : str).indexOf(value) >= 0;\r\n}\r\n\r\n/**\r\n * 删除字符串的公共缩进部分。\r\n * @param str 要处理的字符串。\r\n * @return 返回处理后的字符串。\r\n * @example removeLeadingWhiteSpaces(\"  a\") // \"a\"\r\n */\r\nexport function removeLeadingWhiteSpaces(str: string) {\r\n    str = str.replace(/^[\\r\\n]+/, \"\").replace(/\\s+$/, \"\");\r\n    const match = /^\\s+/.exec(str);\r\n    if (match) {\r\n        const space = match[0];\r\n        const t = str.split(/[\\r\\n]/);\r\n        for (let i = t.length - 1; i >= 0; i--) {\r\n            t[i] = t[i].replace(space, \"\");\r\n        }\r\n        str = t.join(\"\\n\");\r\n    }\r\n    return str;\r\n}\r\n\r\n/**\r\n * 替换当前字符串内全部子字符串。\r\n * @param from 替换的源字符串。\r\n * @param to 替换的目标字符串。\r\n * @return 返回替换后的字符串。\r\n * @example replaceAll(\"1121\", \"1\", \"3\") // \"3323\"\r\n */\r\nexport function replaceAll(str: string, from: string, to: string) {\r\n    for (let p = 0; (p = str.indexOf(from, p)) >= 0; p += to.length) {\r\n        str = str.replace(from, to);\r\n    }\r\n    return str;\r\n}\r\n\r\n/**\r\n * 删除当前字符串内所有空格。\r\n * @return 返回新字符串。\r\n * @example clean(\" a b   \") // \"ab\"\r\n */\r\nexport function clean(str: string) {\r\n    return str.replace(/\\s+/g, \"\");\r\n}\r\n\r\n/**\r\n * 获得当前字符串按字节计算的长度（英文算一个字符，中文算两个个字符）。\r\n * @return 返回长度值。\r\n * @example byteLength(\"a中文\") // 5\r\n */\r\nexport function byteLength(str: string) {\r\n    const arr = str.match(/[^\\x00-\\xff]/g);\r\n    return str.length + (arr ? arr.length : 0);\r\n}\r\n\r\n/**\r\n * 删除字符串内的重复字符。\r\n * @return 返回新字符串。\r\n * @example unique(\"aabbcc\") // \"abc\"\r\n */\r\nexport function unique(str: string) {\r\n    let result = \"\";\r\n    for (const char of str) {\r\n        if (result.indexOf(char) < 0) {\r\n            result += char;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n/**\r\n * 将字符串首字母大写。\r\n * @return 返回新字符串。\r\n * @example capitalize(\"qwert\") // \"Qwert\"\r\n */\r\nexport function capitalize(str: string) {\r\n    return str.charAt(0).toUpperCase() + str.slice(1);\r\n}\r\n\r\n/**\r\n * 将字符串首字母小写。\r\n * @return 返回新字符串。\r\n * @example uncapitalize(\"Qwert\") // \"qwert\"\r\n */\r\nexport function uncapitalize(str: string) {\r\n    return str.charAt(0).toLowerCase() + str.slice(1);\r\n}\r\n\r\n/**\r\n * 将字符串转为骆驼规则（如 fontSize）。\r\n * @return 处理后的字符串。\r\n * @example toCamelCase(\"font-size\") // \"fontSize\"\r\n */\r\nexport function toCamelCase(str: string) {\r\n    return str.replace(/-(\\w)/g, (all, word: string) => word.toUpperCase());\r\n}\r\n\r\n/**\r\n * 获取字符串左边指定长度的子字符串。\r\n * @param length 要获取的子字符串长度。\r\n * @return 返回字符串左边 length 长度的子字符串。\r\n * @example left(\"abcde\", 3) // \"abc\"\r\n */\r\nexport function left(str: string, length: number) {\r\n    return str.substr(0, length);\r\n}\r\n\r\n/**\r\n * 获取字符串右边指定长度的子字符串。\r\n * @param length 要获取的子字符串长度。\r\n * @return 返回字符串右边 length 长度的子字符串。\r\n * @example right(\"abcde\", 3) // \"cde\"\r\n */\r\nexport function right(str: string, length: number) {\r\n    return str.substr(str.length - length, length);\r\n}\r\n"],"mappings":"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"}